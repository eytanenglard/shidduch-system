################################################################################
# Directory Content Map For: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
# Generated on: 2025-10-07 23:49:52
################################################################################

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\SmartEngagementOrchestrator.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/SmartEngagementOrchestrator.ts

import prisma from '@/lib/prisma';
import { CampaignStatus } from '@prisma/client';
import aiService from '@/lib/services/aiService';
import profileAiService from '@/lib/services/profileAiService';
import { profileFeedbackService } from '@/lib/services/profileFeedbackService';
import { getQuestionnaireQuestionsDictionary } from '@/lib/dictionaries';

/**
 * ğŸ§  ×”××•×— ×”××¨×›×–×™ ×©×œ ××¢×¨×›×ª ×”-Engagement
 * ××ª×–××Ÿ ××ª ×›×œ ×¡×•×’×™ ×”×ª×§×©×•×¨×ª ×¢× ×”××©×ª××©×™× ×‘×¦×•×¨×” ×—×›××”
 */

// ================== ×˜×™×™×¤×™× ××¨×›×–×™×™× ==================

interface UserEngagementProfile {
  userId: string;
  daysInSystem: number;

  // ××¦×‘ ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ
  completionStatus: {
    overall: number; // 0-100
    photos: { current: number; needed: number; isDone: boolean };
    personalDetails: { missing: string[]; isDone: boolean };
    partnerPreferences: { missing: string[]; isDone: boolean };
    questionnaire: {
      completionPercent: number;
      worldsStatus: Array<{
        world: string;
        completed: number;
        total: number;
        isDone: boolean;
      }>;
    };
    hasSeenPreview: boolean;
  };

  // ×ª×•×‘× ×•×ª AI
  aiInsights: {
    personalitySummary?: string;
    lookingForSummary?: string;
    topStrengths: string[];
    topGaps: string[];
  } | null;

  // ×”×™×¡×˜×•×¨×™×™×ª ××™× ×˜×¨××§×¦×™×•×ª
  lastEmailSent?: Date;
  lastEmailType?: string;
  emailsSentCount: number;
  lastActiveDate?: Date;

  // ×˜×¨×™×’×¨×™× ××™×•×—×“×™×
  triggers: {
    justCompletedSection?: string; // ×”×¨×’×¢ ×”×©×œ×™× ××©×”×•
    stagnant?: boolean; // ×œ× ×¤×¢×™×œ 5+ ×™××™×
    almostDone?: boolean; // ××¢×œ 90%
  };
}

interface EmailToSend {
  type: 'ONBOARDING' | 'NUDGE' | 'CELEBRATION' | 'INSIGHT' | 'VALUE' | 'EVENING_FEEDBACK' | 'AI_SUMMARY';
  priority: 'HIGH' | 'NORMAL' | 'LOW';
  subject: string;
  content: {
    hook: string;
    mainMessage: string;
    aiContent?: string;
    specificAction?: string;
    progressVisualization?: string;
    encouragement: string;
    // ×©×“×•×ª ×—×“×©×™× ×œ××™×™×œ×™ ×¢×¨×‘ ×•-AI
    systemSummary?: string;  // ×“×‘×¨ ×”××¢×¨×›×ª
    aiInsight?: string;       // ×ª×•×‘× ×ª AI ×¨××©×•× ×™×ª
    todayProgress?: {         // ×”×ª×§×“××•×ª ×”×™×•×
      itemsCompleted: string[];
      newCompletion: number;
    };
  };
  sendInDays: number;
}


// ================== ×”×©×™×¨×•×ª ×”××¨×›×–×™ ==================

export class SmartEngagementOrchestrator {
  // ========== ×¤×•× ×§×¦×™×” ×—×“×©×”: ×–×™×”×•×™ ×¤×¢×™×œ×•×ª ×™×•××™×ª ==========
  private static async detectDailyActivity(userId: string): Promise<{
    hasActivity: boolean;
    completedToday: string[];
    progressDelta: number;
  }> {
    const today = new Date();
    today.setHours(0, 0, 0, 0);

    // ×‘×“×™×§×ª ×¢×“×›×•× ×™× ××”×™×•×
    const recentUpdates = await prisma.profile.findUnique({
      where: { userId },
      select: {
        updatedAt: true,
        user: {
          select: {
            questionnaireResponses: {
              where: {
                lastSaved: { gte: today }
              },
              orderBy: { lastSaved: 'desc' },
              take: 1
            },
            images: {
              where: {
                createdAt: { gte: today }
              }
            }
          }
        }
      }
    });

    const hasActivity =
      (recentUpdates?.updatedAt && recentUpdates.updatedAt >= today) ||
      (recentUpdates?.user.questionnaireResponses.length ?? 0) > 0 ||
      (recentUpdates?.user.images.length ?? 0) > 0;

    const completedToday: string[] = [];

    if (recentUpdates?.user.images.length) {
      completedToday.push(`${recentUpdates.user.images.length} ×ª××•× ×•×ª ×—×“×©×•×ª`);
    }

    if (recentUpdates?.user.questionnaireResponses.length) {
      completedToday.push('×”×ª×§×“××•×ª ×‘×©××œ×•×Ÿ');
    }

    // ×—×™×©×•×‘ ×©×™× ×•×™ ×‘××—×•×–×™× (×“×•×¨×© ×”×©×•×•××” ×œ××¦×‘ ××ª××•×œ)
    const progressDelta = 0; // TODO: ×œ×××© ×œ×•×’×™×§×” ××œ××”

    return { hasActivity, completedToday, progressDelta };
  }

  // ========== ×¤×•× ×§×¦×™×” ×—×“×©×”: ×™×¦×™×¨×ª ××™×™×œ ×¤×™×“×‘×§ ×¢×¨×‘ ==========
  private static async getEveningFeedbackEmail(
    profile: UserEngagementProfile,
    dailyActivity: Awaited<ReturnType<typeof SmartEngagementOrchestrator.detectDailyActivity>>
  ): Promise<EmailToSend | null> {

    if (!dailyActivity.hasActivity) {
      return null; // ××™×Ÿ ×¤×¢×™×œ×•×ª ×”×™×•× = ××™×Ÿ ××™×™×œ
    }

    const { completionStatus, aiInsights } = profile;

    return {
      type: 'EVENING_FEEDBACK',
      priority: 'NORMAL',
      subject: `${profile.userId}, ×¡×™×›×•× ×™×•× ××¢×•×œ×”! âœ¨`,
      content: {
        hook: `×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×©×§×¢×” ×©×œ×š ×”×™×•×!`,
        mainMessage: `×¨××™× ×• ××ª ×”×”×ª×§×“××•×ª ×©×œ×š ×”×™×•× ×•×¨×¦×™× ×• ×œ×©×ª×£ ××•×ª×š ×‘××” ×©×œ××“× ×•`,
        todayProgress: {
          itemsCompleted: dailyActivity.completedToday,
          newCompletion: dailyActivity.progressDelta
        },
        systemSummary: aiInsights?.personalitySummary
          ? `×“×‘×¨ ×”××¢×¨×›×ª: ${aiInsights.personalitySummary.slice(0, 200)}...`
          : undefined,
        aiInsight: aiInsights?.topStrengths[0],
        specificAction: this.getNextBestAction(profile),
        progressVisualization: this.generateProgressBar(completionStatus.overall),
        encouragement: '×××©×™×›×™× ×œ×¢×‘×•×“! ××—×¨ × ××©×™×š ğŸ’ª'
      },
      sendInDays: 0
    };
  }

  // ========== ×¤×•× ×§×¦×™×” ×—×“×©×”: ××™×™×œ ×¡×™×›×•× AI ==========
  private static async getAiSummaryEmail(
    profile: UserEngagementProfile
  ): Promise<EmailToSend | null> {

    const { aiInsights, completionStatus } = profile;

    // × ×©×œ×— ×¨×§ ×× ×™×© ××¡×¤×™×§ ××™×“×¢ ×œ-AI
    if (!aiInsights || completionStatus.overall < 40) {
      return null;
    }

    return {
      type: 'AI_SUMMARY',
      priority: 'NORMAL',
      subject: `${profile.userId}, ×’×™×œ×™× ×• ××©×”×• ××¢× ×™×™×Ÿ ×¢×œ×™×š ğŸ§ `,
      content: {
        hook: '×”××¢×¨×›×ª ×©×œ× ×• × ×™×ª×—×” ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š...',
        mainMessage: '×”× ×” ×ª×•×‘× ×” ××™×•×—×“×ª:',
        systemSummary: `×“×‘×¨ ×”××¢×¨×›×ª (×¡×™×›×•× ×”×©×“×›×Ÿ):\n"${aiInsights.personalitySummary}"`,
        aiInsight: aiInsights.lookingForSummary,
        specificAction: '×›×“×™ ×©× ×•×›×œ ×œ×”×‘×™×Ÿ ××•×ª×š ×¢×•×“ ×™×•×ª×¨ ×˜×•×‘, × ×©××¨ ×¨×§: ' + this.getNextBestAction(profile),
        encouragement: '×¤×¨×•×¤×™×œ×™× ××œ××™× ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª ××™×›×•×ª×™×•×ª!'
      },
      sendInDays: 0
    };
  }

  /**
   * ğŸ¬ ×”×¤×•× ×§×¦×™×” ×”×¨××©×™×ª - ×¨×¦×” ×¢×œ ×›×œ ×”××©×ª××©×™× ×•×ª×—×œ×™×˜ ××” ×œ×©×œ×•×—
   */
  static async runDailyCampaign() {
    console.log('ğŸš€ [Smart Engagement] Starting daily campaign run...');

    // ×©×œ×‘ 1: ××¦× ××ª ×›×œ ×”××©×ª××©×™× ×”×¤×¢×™×œ×™× ×©×¦×¨×™×›×™× ×ª×©×•××ª ×œ×‘
    const usersToProcess = await this.getActiveUsers();

    console.log(`ğŸ“Š [Smart Engagement] Found ${usersToProcess.length} users to process`);

    let emailsSent = 0;

    for (const user of usersToProcess) {
      try {
        // ×©×œ×‘ 2: ×‘× ×” ×¤×¨×•×¤×™×œ engagement ××œ× ×¢×‘×•×¨ ×”××©×ª××©
        const profile = await this.buildUserEngagementProfile(user.id);

        // ×©×œ×‘ 3: ×”×—×œ×˜ ××™×–×” ××™×™×œ ×œ×©×œ×•×— (×× ×‘×›×œ×œ)
        const emailToSend = await this.decideNextEmail(profile);

        if (emailToSend) {
          // ×©×œ×‘ 4: ×©×œ×— ××ª ×”××™×™×œ
          await this.sendEmail(user, emailToSend);

          // ×©×œ×‘ 5: ×¢×“×›×Ÿ ××ª ×”×§××¤×™×™×Ÿ ×‘××¡×“ ×”× ×ª×•× ×™×
          await this.updateCampaignRecord(user.id, emailToSend.type);

          emailsSent++;
          console.log(`âœ… [Smart Engagement] Sent ${emailToSend.type} email to user ${user.id}`);
        } else {
          console.log(`â­ï¸ [Smart Engagement] No email needed for user ${user.id} at this time`);
        }

      } catch (error) {
        console.error(`âŒ [Smart Engagement] Error processing user ${user.id}:`, error);
      }
    }

    console.log(`ğŸ‰ [Smart Engagement] Campaign complete. Sent ${emailsSent} emails.`);
    return { processed: usersToProcess.length, sent: emailsSent };
  }

  /**
   * ğŸŒ™ ×”×¤×•× ×§×¦×™×” ×”×¨××©×™×ª ×œ×§××¤×™×™×Ÿ ×¢×¨×‘ - ×¨×¦×” ×¢×œ ××©×ª××©×™× ×©×¤×¢×œ×• ×”×™×•×
   */
  static async runEveningCampaign() {
    console.log('ğŸŒ™ [Smart Engagement] Starting evening feedback campaign run...');

    // ×©×œ×‘ 1: ××¦× ××ª ×›×œ ×”××©×ª××©×™× ×©×”×™×• ×¤×¢×™×œ×™× ×”×™×•×
    const usersToProcess = await this.getTodaysActiveUsers();

    console.log(`ğŸ“Š [Smart Engagement] Found ${usersToProcess.length} active users today`);

    let emailsSent = 0;

    for (const user of usersToProcess) {
      try {
        // ×©×œ×‘ 2: ×‘× ×” ×¤×¨×•×¤×™×œ engagement ××œ× ×¢×‘×•×¨ ×”××©×ª××©
        const profile = await this.buildUserEngagementProfile(user.id);

        // ×©×œ×‘ 3: ×‘×“×•×§ ×¤×¢×™×œ×•×ª ×™×•××™×ª ×•×¦×•×¨ ××ª ××™×™×œ ×”×¤×™×“×‘×§
        const dailyActivity = await this.detectDailyActivity(profile.userId);
        const emailToSend = await this.getEveningFeedbackEmail(profile, dailyActivity);

        if (emailToSend) {
          // ×©×œ×‘ 4: ×©×œ×— ××ª ×”××™×™×œ
          await this.sendEmail(user, emailToSend);

          // ×©×œ×‘ 5: ×¢×“×›×Ÿ ××ª ×”×§××¤×™×™×Ÿ ×‘××¡×“ ×”× ×ª×•× ×™×
          await this.updateCampaignRecord(user.id, emailToSend.type);

          emailsSent++;
          console.log(`âœ… [Smart Engagement] Sent EVENING_FEEDBACK email to user ${user.id}`);
        } else {
          console.log(`â­ï¸ [Smart Engagement] No activity detected for user ${user.id}, skipping evening email.`);
        }

      } catch (error) {
        console.error(`âŒ [Smart Engagement] Error processing user ${user.id} in evening campaign:`, error);
      }
    }

    console.log(`ğŸ‰ [Smart Engagement] Evening campaign complete. Sent ${emailsSent} emails.`);
    return { processed: usersToProcess.length, sent: emailsSent };
  }

  /**
   * ğŸ” ××¦× ××©×ª××©×™× ×©×–×§×•×§×™× ×œ×ª×©×•××ª ×œ×‘ (×œ×§××¤×™×™×Ÿ ×™×•××™ ×›×œ×œ×™)
   */
  private static async getActiveUsers() {
    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        marketingConsent: true,
        // ×¨×§ ××©×ª××©×™× ×©×œ× ×”×©×œ×™××• 100%
        isProfileComplete: false,
      },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true,
      },
    });
  }

  /**
   * ğŸŒ™ ××¦× ××©×ª××©×™× ×©×”×™×• ×¤×¢×™×œ×™× ×”×™×•× (×œ×§××¤×™×™×Ÿ ×¢×¨×‘)
   */
  private static async getTodaysActiveUsers() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);

    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        marketingConsent: true,
        isProfileComplete: false, // × ××©×™×š ×œ×¢×•×“×“ ×”×©×œ××ª ×¤×¨×•×¤×™×œ
        // ××¦× ××©×ª××©×™× ×©×”×ª×—×‘×¨×• ××• ×¢×•×“×›× ×• ×”×™×•×
        OR: [
          { lastLogin: { gte: today } },
          { updatedAt: { gte: today } },
          {
            questionnaireResponses: {
              some: { lastSaved: { gte: today } }
            }
          }
        ],
      },
    });
  }

  /**
   * ğŸ§© ×‘× ×” ×¤×¨×•×¤×™×œ engagement ××§×™×£
   */
  private static async buildUserEngagementProfile(userId: string): Promise<UserEngagementProfile> {
    const user = await prisma.user.findUnique({
      where: { id: userId },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true,
      },
    });

    if (!user) throw new Error(`User ${userId} not found`);

    const daysInSystem = Math.floor(
      (Date.now() - user.createdAt.getTime()) / (1000 * 60 * 60 * 24)
    );

    // ×©×™××•×© ×‘×œ×•×’×™×§×” ×©×œ ProfileChecklist
    const questionsDict = await getQuestionnaireQuestionsDictionary('he');
    const feedbackReport = await profileFeedbackService.compileFeedbackReport(
      userId,
      'he',
      questionsDict
    );

    // ×§×‘×œ×ª ×ª×•×‘× ×•×ª AI
    let aiInsights: UserEngagementProfile['aiInsights'] = null;
    const narrativeProfile = await profileAiService.generateNarrativeProfile(userId);
    if (narrativeProfile) {
      const analysis = await aiService.getProfileAnalysis(narrativeProfile);
      if (analysis) {
        aiInsights = {
          personalitySummary: analysis.personalitySummary,
          lookingForSummary: analysis.lookingForSummary,
          topStrengths: analysis.completenessReport
            .filter(r => r.status === 'COMPLETE')
            .slice(0, 3)
            .map(r => r.feedback),
          topGaps: analysis.actionableTips.slice(0, 3).map(t => t.tip),
        };
      }
    }

    const campaign = user.dripCampaign;
    const lastActiveDate = user.lastLogin || user.updatedAt;
    const daysSinceActive = Math.floor(
      (Date.now() - lastActiveDate.getTime()) / (1000 * 60 * 60 * 24)
    );

    return {
      userId,
      daysInSystem,
      completionStatus: {
        overall: feedbackReport.completionPercentage,
        photos: {
          current: user.images.length,
          needed: 3,
          isDone: user.images.length >= 3,
        },
        personalDetails: {
          missing: feedbackReport.missingProfileItems,
          isDone: feedbackReport.missingProfileItems.length === 0,
        },
        partnerPreferences: {
          missing: feedbackReport.missingProfileItems.filter(item =>
            item.includes('×”×¢×“×¤') || item.includes('××—×¤×©')
          ),
          isDone: feedbackReport.missingProfileItems.filter(item =>
            item.includes('×”×¢×“×¤') || item.includes('××—×¤×©')
          ).length === 0,
        },
        questionnaire: {
          completionPercent: feedbackReport.completionPercentage,
          worldsStatus: feedbackReport.missingQuestionnaireItems.map(item => ({
            world: item.world,
            completed: 0, // ×™×© ×œ×”×©×œ×™× ××”×“××˜×”
            total: 19,
            isDone: false,
          })),
        },
        hasSeenPreview: user.profile?.hasViewedProfilePreview || false,
      },
      aiInsights,
      lastEmailSent: campaign?.updatedAt,
      lastEmailType: campaign?.lastSentType || undefined,
      emailsSentCount: campaign?.currentStep || 0,
      lastActiveDate,
      triggers: {
        stagnant: daysSinceActive >= 5,
        almostDone: feedbackReport.completionPercentage >= 90,
      },
    };
  }

  /**
   * ğŸ² ×”×›×¨×¢×”: ××™×–×” ××™×™×œ ×œ×©×œ×•×—? (×¢×‘×•×¨ ×”×§××¤×™×™×Ÿ ×”×™×•××™)
   */
  private static async decideNextEmail(profile: UserEngagementProfile): Promise<EmailToSend | null> {
    const { daysInSystem, completionStatus, triggers, lastEmailSent } = profile;

    // ×›×œ×œ 1: ××œ ×ª×©×œ×— ××™×™×œ ×× ×©×œ×—× ×• ××©×”×• ×œ×¤× ×™ ×¤×—×•×ª ×-3 ×™××™×
    if (lastEmailSent) {
      const daysSinceLastEmail = Math.floor(
        (Date.now() - lastEmailSent.getTime()) / (1000 * 60 * 60 * 24)
      );
      if (daysSinceLastEmail < 3) {
        return null;
      }
    }

    // === ××©×ª××©×™× ×—×“×©×™× (×™××™× 1-7) ===
    if (daysInSystem <= 7) {
      return this.getOnboardingEmail(profile);
    }

    // === ××©×ª××©×™× ×•×ª×™×§×™× (8+ ×™××™×) ===

    // ×˜×¨×™×’×¨ 1: ×™×© ××¡×¤×™×§ ××™×“×¢ ×œ-AI ××‘×œ ×¢×“×™×™×Ÿ ×œ× ×©×œ×—× ×• ×¡×™×›×•×
    if (completionStatus.overall >= 40 && completionStatus.overall < 90) {
      const aiEmail = await this.getAiSummaryEmail(profile);
      if (aiEmail) return aiEmail;
    }

    // ×˜×¨×™×’×¨ 2: ×›××¢×˜ ×¡×™×™× (90%+)
    if (triggers.almostDone) {
      return this.getAlmostDoneEmail(profile);
    }

    // ×˜×¨×™×’×¨ 3: ×œ× ×¤×¢×™×œ 5+ ×™××™×
    if (triggers.stagnant) {
      return this.getReengagementEmail(profile);
    }

    // ×˜×¨×™×’×¨ 4: ×™×© ×¤×¢×¨×™× ×§×¨×™×˜×™×™×
    if (!completionStatus.photos.isDone) {
      return this.getPhotoNudgeEmail(profile);
    }

    if (completionStatus.questionnaire.completionPercent < 50) {
      return this.getQuestionnaireNudgeEmail(profile);
    }

    // ×‘×¨×™×¨×ª ××—×“×œ: ××™×™×œ ×¢×¨×š ×›×œ×œ×™
    if (daysInSystem % 14 === 0) {
      return this.getValueEmail(profile);
    }

    return null;
  }

  // ================== ×™×•×¦×¨×™ ××™×™×œ×™× ×¡×¤×¦×™×¤×™×™× ==================

  private static getOnboardingEmail(profile: UserEngagementProfile): EmailToSend {
    const { daysInSystem, completionStatus, aiInsights } = profile;

    if (daysInSystem === 1) {
      return {
        type: 'ONBOARDING',
        priority: 'HIGH',
        subject: `${profile.userId}, ×‘×¨×•×š ×”×‘×! ×”×¦×¢×“ ×”×¨××©×•×Ÿ ×©×œ×š ğŸ‰`,
        content: {
          hook: '××¨×’×© ×©×”×¦×˜×¨×¤×ª! ×‘×•××• × ×ª×—×™×œ ×‘×¦×¢×“ ×”×¨××©×•×Ÿ ×•×”×›×™ ×—×©×•×‘.',
          mainMessage: `×™×© ×œ×š ${3 - completionStatus.photos.current} ×ª××•× ×•×ª ×œ×”×¢×œ×•×ª, ×•-${completionStatus.personalDetails.missing.length} ×¤×¨×˜×™× ×‘×¡×™×¡×™×™× ×œ××œ×. ×–×” ×™×™×§×— ×‘×¢×¨×š 5 ×“×§×•×ª ×•×™×¢×©×” ×”×‘×“×œ ×¢× ×§.`,
          aiContent: aiInsights?.topGaps[0],
          specificAction: completionStatus.photos.current === 0
            ? '×”×•×¡×£ ×ª××•× ×” ××—×ª ×œ×¤×—×•×ª'
            : completionStatus.personalDetails.missing[0],
          encouragement: '×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š ×‘×›×œ ×©×œ×‘! ğŸ’™',
        },
        sendInDays: 0,
      };
    }

    if (daysInSystem === 3) {
      return {
        type: 'NUDGE',
        priority: 'NORMAL',
        subject: '××™×š ××ª×§×“××™×? ×¢×“×›×•×Ÿ ××”×™×¨ ğŸ“Š',
        content: {
          hook: `×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-${completionStatus.overall}%! ×›×œ ×”×›×‘×•×“!`,
          mainMessage: `×›×œ ×¤×¨×˜ ×©××ª/×” ××•×¡×™×£/×” ×¢×•×–×¨ ×œ××¢×¨×›×ª ×”-AI ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×™×•×ª×¨ ×œ×¢×•××§. ×œ××©×œ, ${aiInsights?.topStrengths[0] || '×”××™×“×¢ ×©××™×œ××ª ×¢×“ ×›×” ××¨×©×™×'}`,
          specificAction: this.getNextBestAction(profile),
          progressVisualization: this.generateProgressBar(completionStatus.overall),
          encouragement: '××ª/×” ×‘×“×¨×š ×”× ×›×•× ×”! ğŸš€',
        },
        sendInDays: 0,
      };
    }

    // ×™×•× 7
    return {
      type: 'INSIGHT',
      priority: 'NORMAL',
      subject: '×©×‘×•×¢ ×¢×‘×¨ - ×”× ×” ××” ×©×’×™×œ×™× ×• ×¢×œ×™×™×š ğŸ”',
      content: {
        hook: `${profile.userId}, ×¢×‘×¨×œ×š ×©×‘×•×¢ ×××– ×”×¦×˜×¨×¤×ª. ×”× ×” ×ª×•×‘× ×” ××™×•×—×“×ª:`,
        mainMessage: aiInsights?.personalitySummary || '×”××¢×¨×›×ª ×©×œ× ×• ×›×‘×¨ ××ª×—×™×œ×” ×œ×œ××•×“ ×¢×œ×™×š',
        aiContent: `×‘×”×ª×‘×¡×¡ ×¢×œ ××” ×©××™×œ××ª, × ×¨××” ×©${aiInsights?.topStrengths[0] || '×™×© ×œ×š ×¤×¨×•×¤×™×œ ××¢× ×™×™×Ÿ'}. ${aiInsights?.lookingForSummary || ''}`,
        specificAction: '×›×“×™ ×©× ×•×›×œ ×œ×”×‘×™×Ÿ ××•×ª×š ×¢×•×“ ×™×•×ª×¨ ×˜×•×‘, × ×©××¨ ×¨×§: ' + this.getNextBestAction(profile),
        encouragement: '×¤×¨×•×¤×™×œ×™× ××œ××™× ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª ××™×›×•×ª×™×•×ª!',
      },
      sendInDays: 0,
    };
  }

  private static getPhotoNudgeEmail(profile: UserEngagementProfile): EmailToSend {
    return {
      type: 'NUDGE',
      priority: 'HIGH',
      subject: '×ª××•× ×” ××—×ª = ××œ×£ ××™×œ×™× (×××©!) ğŸ“¸',
      content: {
        hook: '×”×¤×¨×•×¤×™×œ ×©×œ×š ××¢× ×™×™×Ÿ ×•×¢×©×™×¨ ×‘×ª×•×›×Ÿ, ××‘×œ...',
        mainMessage: `×—×¡×¨×•×ª ${3 - profile.completionStatus.photos.current} ×ª××•× ×•×ª. ×–×• ×œ× ×©××œ×” ×©×œ ×™×•×¤×™ - ×–×• ×©××œ×” ×©×œ ×”×ª×××” ×××™×ª×™×ª. 98% ××”××©×ª××©×™× ×¢× ×ª××•× ×•×ª ××§×‘×œ×™× ×”×¦×¢×•×ª ×ª×•×š ×©×‘×•×¢×™×™×.`,
        aiContent: profile.aiInsights?.personalitySummary
          ? `×”××¢×¨×›×ª ×©×œ× ×• ×›×‘×¨ ××›×™×¨×” ××•×ª×š: "${profile.aiInsights.personalitySummary.slice(0, 150)}..." - ×¢×›×©×™×• ×–××Ÿ ×©×’× ×”××“× ×”×××™×ª×™ ××”×¦×“ ×”×©× ×™ ×™×¨××” ××™ ×××—×•×¨×™ ×”××™×œ×™×.`
          : undefined,
        specificAction: '×”×¢×œ×” 3 ×ª××•× ×•×ª - ×™×™×§×— 2 ×“×§×•×ª',
        encouragement: '×ª××•× ×” ××—×ª = ×§×¤×™×¦×” ×œ-30%+ ×‘×¤×¨×•×¤×™×œ ×©×œ×š!',
      },
      sendInDays: 0,
    };
  }

  private static getQuestionnaireNudgeEmail(profile: UserEngagementProfile): EmailToSend {
    const { worldsStatus } = profile.completionStatus.questionnaire;
    const mostEmptyWorld = worldsStatus.reduce((prev, curr) =>
      curr.completed < prev.completed ? curr : prev
    );

    return {
      type: 'NUDGE',
      priority: 'NORMAL',
      subject: '×”×©××œ×•×Ÿ - ×œ× ×¢×•×“ ×©××œ×•×Ÿ ××©×¢×× ğŸ§ ',
      content: {
        hook: `${profile.userId}, ×©×× ×• ×œ×‘ ×©×”×ª×—×œ×ª ×œ××œ× ××ª ×”×©××œ×•×Ÿ - ××¢×•×œ×”!`,
        mainMessage: `×”×©××œ×•×Ÿ ×©×œ× ×• ×”×•× ×œ× "×¢×•×“ ×©××œ×•×Ÿ". ×›×œ ×ª×©×•×‘×” ×××¤×©×¨×ª ×œ-AI ×©×œ× ×• ×œ×œ××•×“ ×¢×œ×™×š ××©×”×• ×¢××•×§. ×œ××©×œ, ×¢×•×œ× "${mostEmptyWorld.world}" - ${mostEmptyWorld.completed}/${mostEmptyWorld.total} ×©××œ×•×ª.`,
        aiContent: profile.aiInsights?.topGaps[0],
        specificAction: `×”×©×œ× ××ª ×¢×•×œ× "${mostEmptyWorld.world}" (${mostEmptyWorld.total - mostEmptyWorld.completed} ×©××œ×•×ª × ×•×ª×¨×•)`,
        encouragement: '××©×ª××©×™× ×¢× ×©××œ×•×Ÿ ××œ× ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª ××“×•×™×§×•×ª!',
      },
      sendInDays: 0,
    };
  }

  private static getAlmostDoneEmail(profile: UserEngagementProfile): EmailToSend {
    return {
      type: 'CELEBRATION',
      priority: 'HIGH',
      subject: `${profile.userId}, ××ª/×” ×›××¢×˜ ×©×! ğŸŠ`,
      content: {
        hook: `×•×•××•! ${profile.completionStatus.overall}% - ×–×” ××“×”×™×!`,
        mainMessage: '×”×¤×¨×•×¤×™×œ ×©×œ×š ×›××¢×˜ ××•×©×œ×. × ×©××¨ ×¨×§ ×¤×¨×˜ ××—×“ ×§×˜×Ÿ ×•××ª/×” ×‘-100%.',
        specificAction: this.getNextBestAction(profile),
        aiContent: profile.aiInsights?.personalitySummary
          ? `×”× ×” ××” ×©×”-AI ×©×œ× ×• ×›×‘×¨ ××‘×™×Ÿ ×¢×œ×™×š: "${profile.aiInsights.personalitySummary.slice(0, 200)}..." - ××¨×©×™×!`
          : undefined,
        encouragement: '×¦×¢×“ ××—×“ ×§×˜×Ÿ ×•×”×¤×¨×•×¤×™×œ ×©×œ×š ××•×›×Ÿ ×œ×§×‘×œ ×”×¦×¢×•×ª!',
      },
      sendInDays: 0,
    };
  }

  private static getReengagementEmail(profile: UserEngagementProfile): EmailToSend {
    return {
      type: 'NUDGE',
      priority: 'NORMAL',
      subject: '×–×•×›×¨/×ª ××•×ª× ×•? ×™×© ×œ× ×• ×—×“×©×•×ª ×‘×©×‘×™×œ×š ğŸ’Œ',
      content: {
        hook: `${profile.userId}, ×¢×‘×¨ ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...`,
        mainMessage: `×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×•××“ ×¢×œ ${profile.completionStatus.overall}% - ×•×–×” × ×”×“×¨! ×”××¢×¨×›×ª ×©×œ× ×• ×”×©×ª×¤×¨×” ×××–, ×•×¢×›×©×™×• ×–×” ×”×–××Ÿ ×”××•×©×œ× ×œ×—×–×•×¨ ×•×œ×”×©×œ×™×.`,
        aiContent: profile.aiInsights?.topStrengths[0]
          ? `×× ×—× ×• ×–×•×›×¨×™×: ${profile.aiInsights.topStrengths[0]}. ×¢×›×©×™×• ×‘×•×/×™ × ×©×œ×™× ××ª ×”×ª××•× ×”.`
          : undefined,
        specificAction: this.getNextBestAction(profile),
        encouragement: '×œ× ×××•×—×¨ ×œ×—×–×•×¨. ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š.',
      },
      sendInDays: 0,
    };
  }

  private static getValueEmail(profile: UserEngagementProfile): EmailToSend {
    const topics = [
      {
        subject: '×œ××” ×ª××•× ×•×ª ×”×Ÿ ×›×œ ×›×š ×—×©×•×‘×•×ª? ×”×ª×©×•×‘×” ××¤×ª×™×¢×”',
        content: '××—×§×¨ ×—×“×© ××¨××” ×©×ª××•× ×•×ª ×¢×•×–×¨×•×ª ×œ×–×”×•×ª ×ª××™××•×ª ×¨×’×©×™×ª...',
      },
      {
        subject: '3 ×˜×¢×•×™×•×ª × ×¤×•×¦×•×ª ×‘×‘× ×™×™×ª ×¤×¨×•×¤×™×œ ×©×™×“×•×›×™×',
        content: '×©×“×›× ×™× ×¢× 20 ×©× ×•×ª × ×™×¡×™×•×Ÿ ×—×•×©×¤×™× ××” ×‘×××ª ×¢×•×‘×“...',
      },
      {
        subject: '×”×¡×™×¤×•×¨ ×©×œ ×“× ×™ ×•×™×¢×œ - ××™×š ×”×©××œ×•×Ÿ ×©×œ× ×• ×¢×–×¨ ×œ×”×',
        content: '×“× ×™ ×”×™×¡×¡ ×œ××œ× ××ª ×”×©××œ×•×Ÿ. ×™×¢×œ ×›××¢×˜ ×•×™×ª×¨×”. ×”× ×” ××” ×©×§×¨×”...',
      },
    ];

    const topic = topics[Math.floor(Math.random() * topics.length)];

    return {
      type: 'VALUE',
      priority: 'LOW',
      subject: topic.subject,
      content: {
        hook: topic.content,
        mainMessage: '×§×¨×/×™ ××ª ×”×¡×™×¤×•×¨ ×”××œ× >>',
        encouragement: '×× ×—× ×• ×›××Ÿ ×›×“×™ ×œ×¢×–×•×¨ ×œ×š, ×‘×›×œ ×©×œ×‘.',
      },
      sendInDays: 0,
    };
  }

  // ================== ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ==================

  private static getNextBestAction(profile: UserEngagementProfile): string {
    if (!profile.completionStatus.photos.isDone) {
      return `×”×¢×œ×” ${3 - profile.completionStatus.photos.current} ×ª××•× ×•×ª × ×•×¡×¤×•×ª`;
    }
    if (profile.completionStatus.personalDetails.missing.length > 0) {
      return profile.completionStatus.personalDetails.missing[0];
    }
    if (profile.completionStatus.questionnaire.completionPercent < 80) {
      return '×”×©×œ× ××ª ×”×©××œ×•×Ÿ';
    }
    if (!profile.completionStatus.hasSeenPreview) {
      return '×¢×™×™×Ÿ ×‘×ª×¦×•×’×” ×”××§×“×™××” ×©×œ ×”×¤×¨×•×¤×™×œ';
    }
    return '×”×¤×¨×•×¤×™×œ ×›××¢×˜ ××•×©×œ×!';
  }

  private static generateProgressBar(percentage: number): string {
    const filled = Math.floor(percentage / 10);
    const empty = 10 - filled;
    return 'â–ˆ'.repeat(filled) + 'â–‘'.repeat(empty) + ` ${percentage}%`;
  }

  private static async sendEmail(user: any, email: EmailToSend) {
    const { emailService } = await import('./emailService');

    try {
      let success = false;

      // ×‘×—×™×¨×ª ×”×¤×•× ×§×¦×™×” ×”××ª××™××” ×œ×¤×™ ×¡×•×’ ×”××™×™×œ
      switch (email.type) {
        case 'ONBOARDING':
          if (email.content.specificAction) {
            success = await emailService.sendOnboardingDay1({
              email: user.email,
              firstName: user.firstName,
              completionData: {
                progressPercentage: 15,
                completedItems: ['× ×¨×©××ª ×œ××¢×¨×›×ª'],
                missingItemsCount: 5,
                nextAction: email.content.specificAction,
                aiInsight: email.content.aiContent,
              }
            });
          }
          break;

        case 'NUDGE':
          if (email.subject.includes('××™×š ××ª×§×“××™×')) {
            success = await emailService.sendProgressUpdate({
              email: user.email,
              firstName: user.firstName,
              progressData: {
                progressPercentage: 45,
                aiLearning: email.content.aiContent || '×”××¢×¨×›×ª ×œ×•××“×ª ×¢×œ×™×š',
                photosCount: 2,
                photosComplete: false,
                photosPercent: 66,
                personalComplete: true,
                personalMissingCount: 0,
                personalPercent: 100,
                questionnaireComplete: false,
                questionnairePercent: 60,
                preferencesComplete: false,
                preferencesMissingCount: 3,
                preferencesPercent: 40,
                nextAction: email.content.specificAction || '×”××©×š ×œ××œ× ××ª ×”×¤×¨×•×¤×™×œ',
                estimatedTime: '5 ×“×§×•×ª',
                nextMilestone: 70,
                aiPersonalInsight: email.content.aiContent,
                ctaLink: `${process.env.NEXT_PUBLIC_BASE_URL}/profile`,
                ctaText: '×œ×”××©×š ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ'
              }
            });
          }
          break;

        case 'CELEBRATION':
          success = await emailService.sendAlmostDone({
            email: user.email,
            firstName: user.firstName,
            celebrationData: {
              progressPercentage: 95,
              remainingItem: email.content.specificAction || '×¦×¢×“ ××—×“ ××—×¨×•×Ÿ',
              estimatedTime: '2 ×“×§×•×ª',
              aiSummary: email.content.aiContent,
              ctaLink: `${process.env.NEXT_PUBLIC_BASE_URL}/profile`
            }
          });
          break;

        // ========== ××™×™×œ×™× ×—×“×©×™× ==========

        case 'EVENING_FEEDBACK':
          success = await emailService.sendTemplateEmail({
            to: user.email,
            subject: email.subject,
            templateName: 'evening_feedback',
            context: {
              firstName: user.firstName,
              progressPercentage: email.content.progressVisualization?.match(/\d+/)?.[0] || '0',
              todayCompletedItems: email.content.todayProgress?.itemsCompleted || [],
              systemSummary: email.content.systemSummary,
              aiInsight: email.content.aiInsight,
              nextAction: email.content.specificAction,
              estimatedTime: '5 ×“×§×•×ª',
              ctaLink: `${process.env.NEXT_PUBLIC_BASE_URL}/profile`,
              ctaText: '×œ×”××©×š ×‘× ×™×™×ª ×”×¤×¨×•×¤×™×œ'
            }
          });
          break;

        case 'AI_SUMMARY':
          success = await emailService.sendTemplateEmail({
            to: user.email,
            subject: email.subject,
            templateName: 'aiInsight',
            context: {
              firstName: user.firstName,
              personalitySummary: email.content.systemSummary || email.content.aiContent,
            }
          });
          break;

        default:
          // fallback - ×©×œ×™×—×ª ××™×™×œ ×¤×©×•×˜
          success = await emailService.sendCustomEmail(
            user.email,
            email.subject,
            'generic',
            {
              firstName: user.firstName,
              mainMessage: email.content.mainMessage,
              encouragement: email.content.encouragement
            }
          );
      }

      if (success) {
        console.log(`ğŸ“§ Successfully sent ${email.type} email to ${user.email}`);
      } else {
        console.error(`âŒ Failed to send ${email.type} email to ${user.email}`);
      }

    } catch (error) {
      console.error(`âŒ Error in sendEmail for user ${user.id}:`, error);
    }
  }

  private static async updateCampaignRecord(userId: string, emailType: string) {
    const updateData: any = {
      currentStep: { increment: 1 },
      lastSentType: emailType,
      updatedAt: new Date(),
    };

    // ğŸ†• ×¢×“×›×•×Ÿ ×¡×¤×¦×™×¤×™ ×œ×¤×™ ×¡×•×’ ×”××™×™×œ
    if (emailType === 'EVENING_FEEDBACK') {
      updateData.lastEveningEmailSent = new Date();
      updateData.eveningEmailsCount = { increment: 1 };
    }

    if (emailType === 'AI_SUMMARY') {
      updateData.lastAiSummarySent = new Date();
      updateData.aiSummaryCount = { increment: 1 };
    }

    await prisma.userDripCampaign.upsert({
      where: { userId },
      update: updateData,
      create: {
        userId,
        currentStep: 1,
        lastSentType: emailType,
        nextSendDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000),
        status: 'ACTIVE',
        ...(emailType === 'EVENING_FEEDBACK' && {
          lastEveningEmailSent: new Date(),
          eveningEmailsCount: 1
        }),
        ...(emailType === 'AI_SUMMARY' && {
          lastAiSummarySent: new Date(),
          aiSummaryCount: 1
        })
      },
    });
  }

}

export default SmartEngagementOrchestrator;
--- End of Content for SmartEngagementOrchestrator.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\emailService.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/emailService.ts

import nodemailer from 'nodemailer';
import Handlebars from 'handlebars';
import fs from 'fs';
import path from 'path';

/**
 * ğŸ“§ ×©×™×¨×•×ª ××™×™×œ×™× ××©×•×¤×¨ ×¢× ×ª××™×›×” ×‘×ª×‘× ×™×•×ª Handlebars
 */

interface EmailData {
  to: string;
  subject: string;
  templateName: string;
  context: Record<string, any>;
}

class EmailService {
  private transporter: nodemailer.Transporter;
  private templatesCache: Map<string, HandlebarsTemplateDelegate> = new Map();

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });

    // ×‘×“×™×§×ª ×—×™×‘×•×¨
    this.transporter.verify((error) => {
      if (error) {
        console.error('âŒ Email service initialization failed:', error);
      } else {
        console.log('âœ… Email service ready');
      }
    });
  }

  /**
   * ×˜×¢×™× ×ª ×ª×‘× ×™×ª ××”×§×•×‘×¥ ×•-cache ×©×œ×”
   */
  private loadTemplate(templateName: string): HandlebarsTemplateDelegate {
    // ×‘×“×™×§×” ×× ×”×ª×‘× ×™×ª ×›×‘×¨ ×‘-cache
    if (this.templatesCache.has(templateName)) {
      return this.templatesCache.get(templateName)!;
    }

    const templatePath = path.join(
      process.cwd(),
      'src',
      'lib',
      'engagement',
      'templates',
      'email',
      `${templateName}.hbs`
    );

    if (!fs.existsSync(templatePath)) {
      throw new Error(`Template not found: ${templateName} at ${templatePath}`);
    }

    const source = fs.readFileSync(templatePath, 'utf-8');
    const template = Handlebars.compile(source);

    // ×©××™×¨×” ×‘-cache
    this.templatesCache.set(templateName, template);

    return template;
  }

  /**
   * ×©×œ×™×—×ª ××™×™×œ ×¢× ×ª×‘× ×™×ª
   */
  async sendTemplateEmail(data: EmailData): Promise<boolean> {
    try {
      // ×”×•×¡×¤×ª baseUrl ×œ×§×•× ×˜×§×¡×˜ ××•×˜×•××˜×™×ª
      const enhancedContext = {
        ...data.context,
        baseUrl: process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000',
        currentYear: new Date().getFullYear(),
      };

      // ×˜×¢×™× ×ª ×”×ª×‘× ×™×ª
      const template = this.loadTemplate(data.templateName);
      
      // ×¨× ×“×•×¨ ×”-HTML
      const htmlContent = template(enhancedContext);

      // ×©×œ×™×—×ª ×”××™×™×œ
      const info = await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: data.to,
        subject: data.subject,
        html: htmlContent,
      });

      console.log(`âœ… Email sent to ${data.to} | Template: ${data.templateName} | ID: ${info.messageId}`);
      return true;

    } catch (error) {
      console.error(`âŒ Failed to send email to ${data.to}:`, error);
      return false;
    }
  }

  /**
   * ×©×œ×™×—×ª ××™×™×œ onboarding ×™×•× 1
   */
  async sendOnboardingDay1(user: {
    email: string;
    firstName: string;
    completionData: {
      progressPercentage: number;
      completedItems: string[];
      missingItemsCount: number;
      nextAction: string;
      aiInsight?: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: `${user.firstName}, ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech! ğŸ‰`,
      templateName: 'onboardingDay1',
      context: {
        firstName: user.firstName,
        ...user.completionData,
      },
    });
  }

  /**
   * ×©×œ×™×—×ª ××™×™×œ ×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª
   */
  async sendProgressUpdate(user: {
    email: string;
    firstName: string;
    progressData: {
      progressPercentage: number;
      aiLearning: string;
      photosCount: number;
      photosComplete: boolean;
      photosPercent: number;
      personalComplete: boolean;
      personalMissingCount: number;
      personalPercent: number;
      questionnaireComplete: boolean;
      questionnairePercent: number;
      preferencesComplete: boolean;
      preferencesMissingCount: number;
      preferencesPercent: number;
      nextAction: string;
      estimatedTime: string;
      nextMilestone: number;
      aiPersonalInsight?: string;
      ctaLink: string;
      ctaText: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: `${user.firstName}, ××™×š ××ª×§×“××™×? ğŸ“Š`,
      templateName: 'progressUpdate',
      context: {
        firstName: user.firstName,
        ...user.progressData,
      },
    });
  }

  /**
   * ×©×œ×™×—×ª ××™×™×œ "×›××¢×˜ ×¡×™×™××ª"
   */
  async sendAlmostDone(user: {
    email: string;
    firstName: string;
    celebrationData: {
      progressPercentage: number;
      remainingItem: string;
      estimatedTime: string;
      aiSummary?: string;
      ctaLink: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: `${user.firstName}, ××ª/×” ×›××¢×˜ ×©×! ğŸŠ`,
      templateName: 'almostDone',
      context: {
        firstName: user.firstName,
        ...user.celebrationData,
      },
    });
  }

  /**
   * ×©×œ×™×—×ª ××™×™×œ generic (×¢× ×ª×‘× ×™×ª ××•×ª×××ª)
   */
  async sendCustomEmail(
    to: string,
    subject: string,
    templateName: string,
    context: Record<string, any>
  ): Promise<boolean> {
    return this.sendTemplateEmail({
      to,
      subject,
      templateName,
      context,
    });
  }

  /**
   * × ×™×§×•×™ cache ×©×œ ×ª×‘× ×™×•×ª (×©×™××•×©×™ ×‘-development)
   */
  clearTemplateCache(): void {
    this.templatesCache.clear();
    console.log('ğŸ“¦ Template cache cleared');
  }
}

// ×™×¦×•× instance ×™×—×™×“
export const emailService = new EmailService();
export default emailService;
--- End of Content for emailService.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\engagement_contents.txt
--------------------------------------------------------------------------------
[This is the output log file itself. Content not included.]

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\email.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/email.adapter.ts
import nodemailer from 'nodemailer';

export interface RecipientInfo {
  email: string;
  phone?: string | null;
  name: string;
}

export interface NotificationContent {
  subject: string;
  body: string; // For text-based channels like SMS or simple emails
  htmlBody?: string; // For rich HTML emails
}

export class EmailAdapter {
  private transporter: nodemailer.Transporter;

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!recipient.email;
  }

  public async send(recipient: RecipientInfo, content: NotificationContent): Promise<boolean> {
    if (!this.canSend(recipient)) return false;

    try {
      await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: recipient.email,
        subject: content.subject,
        html: content.htmlBody || `<p>${content.body.replace(/\n/g, '<br>')}</p>`,
      });
      console.log(`[EmailAdapter] Email sent to ${recipient.email}`);
      return true;
    } catch (error) {
      console.error(`[EmailAdapter] Failed to send email to ${recipient.email}:`, error);
      return false;
    }
  }
}
--- End of Content for email.adapter.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\whatsapp.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/whatsapp.adapter.ts
import twilio from 'twilio';
import { RecipientInfo } from './email.adapter';

export class WhatsAppAdapter {
  private client: twilio.Twilio | null;
  private fromNumber: string;

  constructor() {
    this.fromNumber = process.env.TWILIO_WHATSAPP_NUMBER || '';
    if (process.env.TWILIO_ACCOUNT_SID && process.env.TWILIO_AUTH_TOKEN) {
      this.client = twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN);
    } else {
      this.client = null;
      console.warn('[WhatsAppAdapter] Twilio is not configured.');
    }
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!(this.client && recipient.phone && recipient.phone.startsWith('+'));
  }

  public async send(recipient: RecipientInfo, templateSid: string, contentVariables: Record<string, string>): Promise<boolean> {
    if (!this.canSend(recipient) || !recipient.phone) return false;

    try {
      await this.client!.messages.create({
        contentSid: templateSid,
        contentVariables: JSON.stringify(contentVariables),
        from: `whatsapp:${this.fromNumber}`,
        to: `whatsapp:${recipient.phone}`,
      });
      console.log(`[WhatsAppAdapter] Message sent to ${recipient.phone}`);
      return true;
    } catch (error: any) {
      console.error(`[WhatsAppAdapter] Failed to send message to ${recipient.phone}:`, error.message);
      return false;
    }
  }
}
--- End of Content for whatsapp.adapter.ts ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates
================================================================================

(This directory contains subdirectories but no files directly. See subdirectories below.)

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\aiInsight.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×’×™×œ×™× ×• ××©×”×• ××¢× ×™×™×Ÿ ×¢×œ×™×š</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <div style="font-size: 64px; margin-bottom: 20px;">ğŸ§ âœ¨</div>
                            <h1 style="color: white; margin: 0; font-size: 30px; font-weight: 800; line-height: 1.4; text-shadow: 0 2px 15px rgba(0,0,0,0.15);">
                                {{firstName}}, ×™×© ×œ× ×• ×ª×•×‘× ×•×ª ××¨×ª×§×•×ª ×¢×œ×™×š!
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                ××¢×¨×›×ª ×”-AI ×©×œ× ×• × ×™×ª×—×” ××ª ×”×©××œ×•×Ÿ ×©×œ×š
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                ×ª×•×“×” ×©×”×©×§×¢×ª ×–××Ÿ ×œ××œ× ××ª ×”×©××œ×•×Ÿ ×©×œ× ×•! ×”×ª×©×•×‘×•×ª ×©×œ×š ×¢×–×¨×• ×œ××¢×¨×›×ª ×”-AI ×”××ª×§×“××ª ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×˜×•×‘ ×™×•×ª×¨. ×”× ×” ××” ×©×’×™×œ×™× ×•:
                            </p>

                            <!-- AI Analysis Box -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 20px; padding: 32px; margin: 28px 0; border: 2px solid rgba(139, 92, 246, 0.2); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 18px;">
                                    <span style="font-size: 36px; margin-left: 15px;">ğŸ¯</span>
                                    <h2 style="color: transparent; background: linear-gradient(135deg, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; margin: 0; font-size: 22px; font-weight: 800;">
                                        ×”×ª×•×‘× ×•×ª ×©×œ× ×• ×¢×œ×™×š:
                                    </h2>
                                </div>
                                <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 15px rgba(0,0,0,0.06);">
                                    <p style="color: #1e293b; margin: 0; font-size: 17px; line-height: 1.8; white-space: pre-wrap; font-weight: 500;">{{personalitySummary}}</p>
                                </div>
                            </div>

                            <div style="background: #f7fafc; border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h3 style="color: #2d3748; margin: 0 0 15px 0; font-size: 18px; font-weight: 600;">
                                    ğŸŒŸ ×œ××” ×–×” ×—×©×•×‘?
                                </h3>
                                <p style="color: #4a5568; margin: 0 0 12px 0; font-size: 15px; line-height: 1.7;">
                                    <strong>âœ“ ×”×ª×××” ××“×•×™×§×ª ×™×•×ª×¨:</strong> ×”×©×“×›× ×™× ×©×œ× ×• ××©×ª××©×™× ×‘×ª×•×‘× ×•×ª ×”××œ×” ×›×“×™ ×œ××¦×•× ×œ×š ×”×ª×××•×ª ×©××ª××™××•×ª ×‘×××ª ×œ××™ ×©××ª/×”.
                                </p>
                                <p style="color: #4a5568; margin: 0 0 12px 0; font-size: 15px; line-height: 1.7;">
                                    <strong>âœ“ ×”×‘× ×” ××¢××™×§×”:</strong> ×× ×—× ×• ×œ× ×¨×§ ××¡×ª×›×œ×™× ×¢×œ "×’×•×‘×”" ×•×¢×™×¡×•×§ - ×× ×—× ×• ××‘×™× ×™× ××ª ×”×¢×¨×›×™×, ×”××™×©×™×•×ª ×•×”×—×œ×•××•×ª ×©×œ×š.
                                </p>
                                <p style="color: #4a5568; margin: 0; font-size: 15px; line-height: 1.7;">
                                    <strong>âœ“ ×©×™×—×•×ª ×˜×•×‘×•×ª ×™×•×ª×¨:</strong> ×”×”×ª×××•×ª ×©×œ×š ×™×›×™×¨×• ××•×ª×š ×˜×•×‘ ×™×•×ª×¨ ×›×‘×¨ ××”×”×ª×—×œ×”.
                                </p>
                            </div>

                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);">
                                            ×œ×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ ×”××œ× ×©×œ×™ ğŸ¯
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                <strong>×©××œ×•×ª ××• ×¨×•×¦×” ×œ×“×‘×¨ ×¢× ×©×“×›×Ÿ?</strong><br>
                                ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×!
                            </p>
                        </td>
                    </tr>

                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 10px 0; color: #4a5568; font-size: 14px;">
                                ××—×›×™× ×œ×¨××•×ª ×œ××Ÿ ×–×” ××•×‘×™×œ!
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×‘×‘×¨×›×”,<br>×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for aiInsight.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\almostDone.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×–×•×›×¨ ××•×ª× ×•?</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¢×‘×¨ ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×. ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h3 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600; text-align: center;">
                                    ××™×¤×” ×”×¤×¡×§× ×•?
                                </h3>
                                <div style="text-align: center; margin: 15px 0;">
                                    <div style="font-size: 48px; font-weight: 900; background: linear-gradient(135deg, #06b6d4, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                                        {{progressPercentage}}%
                                    </div>
                                    <p style="color: #4a5568; margin: 8px 0 0 0; font-size: 15px;">×”×•×©×œ×</p>
                                </div>
                                <p style="color: #4a5568; margin: 12px 0 0 0; font-size: 15px; text-align: center;">
                                    ×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×•××“ ×¢×œ <strong>{{progressPercentage}}%</strong> - ×–×” ×™×¤×”!<br>
                                    × ×©××¨ ×¨×§ ×§×¦×ª ×›×“×™ ×œ×”×’×™×¢ ×œ-100%.
                                </p>
                            </div>

                            {{#if aiRemembered}}
                            <!-- What We Remember -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #5a67d8; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×× ×—× ×• ×–×•×›×¨×™× ×¢×œ×™×š
                                </h3>
                                <div style="background: white; border-radius: 8px; padding: 16px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{aiRemembered}}"
                                    </p>
                                </div>
                                <p style="color: #6b21a8; margin: 12px 0 0 0; font-size: 14px;">
                                    ×–×” ××” ×©×œ××“× ×• ×¢×œ×™×š. ×‘×•×/×™ × ×©×œ×™× ××ª ×”×ª××•× ×”!
                                </p>
                            </div>
                            {{/if}}

                            <!-- What's New -->
                            <div style="background: #f0fdf4; border-right: 4px solid #10b981; border-radius: 8px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #166534; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×—×“×© ×××–
                                </h3>
                                <p style="color: #15803d; margin: 0 0 8px 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - ×™×•×ª×¨ ××“×•×™×§ ××ª××™×“
                                </p>
                                <p style="color: #15803d; margin: 0 0 8px 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                </p>
                                <p style="color: #15803d; margin: 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ {{newUsersCount}}+ ××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©
                                </p>
                            </div>

                            <!-- Next Step -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-right: 4px solid #f59e0b; border-radius: 8px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">
                                    ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #a16207; margin: 12px 0 0 0; font-size: 14px;">
                                    ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
                                </p>
                            </div>

                            <!-- Social Proof -->
                            <div style="background: #f0fdfa; border-right: 3px solid #06b6d4; border-radius: 8px; padding: 15px; margin: 20px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>××’×‘:</strong> ××©×ª××©×™× ×©×—×–×¨×• ×•×”×©×œ×™××• ×¨××• ×ª×•×¦××•×ª ×ª×•×š ×©×‘×•×¢×™×™×. ×œ× ×××•×—×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                                            ×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×•
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                ×× ××©×”×• ××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>
                                ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="font-size: 64px; margin-bottom: 20px;">ğŸ’Œ</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¢×‘×¨ ×§×¦×ª ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×, ×•×™×© ×”××•×Ÿ ×“×‘×¨×™× ×¢×œ ×”×¨××©. 
                                ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%); border-radius: 16px; padding: 28px; margin: 25px 0; border: 2px solid #3b82f6;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700; text-align: center;">
                                    ğŸ“Œ ××™×¤×” ×”×¤×¡×§× ×•?
                                </h3>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="display: inline-block; width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                                        <div style="color: white; text-align: center;">
                                            <div style="font-size: 42px; font-weight: 900; line-height: 1;">{{progressPercentage}}%</div>
                                            <div style="font-size: 13px; margin-top: 5px; opacity: 0.9;">×”×•×©×œ×</div>
                                        </div>
                                    </div>
                                </div>
                                <p style="color: #1e40af; margin: 15px 0 0 0; font-size: 15px; text-align: center; line-height: 1.6;">
                                    ×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×•××“ ×¢×œ <strong>{{progressPercentage}}%</strong> - ×–×” ×‘×××ª ×™×¤×”!<br>
                                    × ×©××¨ ×¨×§ ×§×¦×ª ×¢×‘×•×“×” ×›×“×™ ×œ×”×’×™×¢ ×œ-100%.
                                </p>
                            </div>

                            {{#if aiRemembered}}
                            <!-- What We Remember About You -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid #a78bfa;">
                                <h3 style="color: #5b21b6; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    ğŸ§  ××” ×× ×—× ×• ×–×•×›×¨×™× ×¢×œ×™×š
                                </h3>
                                <div style="background: white; border-radius: 12px; padding: 20px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{aiRemembered}}"
                                    </p>
                                </div>
                                <p style="color: #6b21a8; margin: 15px 0 0 0; font-size: 14px;">
                                    ×–×” ××” ×©×œ××“× ×• ×¢×œ×™×š ×¢×“ ×¢×›×©×™×•. ×‘×•×/×™ × ×©×œ×™× ××ª ×”×ª××•× ×”!
                                </p>
                            </div>
                            {{/if}}

                            <!-- What's New -->
                            <div style="background: #f0fdf4; border-radius: 16px; padding: 24px; margin: 25px 0; border-right: 4px solid #10b981;">
                                <h3 style="color: #166534; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    âœ¨ ××” ×—×“×© ×××– ×©×œ× ×”×™×™×ª×
                                </h3>
                                <ul style="color: #15803d; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">
                                        ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - <strong>×™×•×ª×¨ ××“×•×™×§ ××ª××™×“</strong>
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        {{newUsersCount}}+ ××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©
                                    </li>
                                </ul>
                            </div>

                            <!-- Next Step -->
                            <div style="background: linear-gradient(to left, #fef3c7, #fed7aa); border-radius: 16px; padding: 4px; margin: 30px 0;">
                                <div style="background: white; border-radius: 12px; padding: 24px;">
                                    <h3 style="color: #92400e; margin: 0 0 15px 0; font-size: 19px; font-weight: 700; text-align: center;">
                                        ğŸ¯ ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                    </h3>
                                    <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; text-align: center; font-weight: 500;">
                                        {{nextAction}}
                                    </p>
                                    <p style="color: #a16207; margin: 15px 0 0 0; font-size: 14px; text-align: center;">
                                        ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
                                    </p>
                                </div>
                            </div>

                            <!-- Social Proof -->
                            <div style="background: #fef2f8; border-radius: 12px; padding: 20px; margin: 25px 0; border-right: 3px solid #ec4899;">
                                <p style="color: #9f1239; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¬ ××’×‘:</strong> ××©×ª××©×™× ×©×—×–×¨×• ×•×”×©×œ×™××• ××ª ×”×¤×¨×•×¤×™×œ ××—×¨×™ ×”×¤×¡×§×” ×¨××• ×ª×•×¦××•×ª ×ª×•×š ×©×‘×•×¢×™×™× ×‘×××•×¦×¢. ×–×” ×œ× ×××•×—×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4); text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                            ×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×• ğŸ’ª
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <!-- Personal Touch -->
                            <div style="background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <p style="color: #9f1239; margin: 0; font-size: 15px; line-height: 1.7; text-align: center; font-style: italic;">
                                    "×”×—×™×™× ××ª×§×“××™× ×‘××”×™×¨×•×ª. ×œ×¤×¢××™× ×¦×¨×™×š ×¨×§ ×ª×–×›×•×¨×ª ×§×˜× ×” ×›×“×™ ×œ×—×–×•×¨ ×œ××¡×œ×•×œ."
                                </p>
                            </div>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                ×× ×™×© ××©×”×• ×©××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>
                                ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨ ×œ×š.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0 0 10px 0; color: #4b5563; font-size: 14px; font-weight: 600;">
                                ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š ğŸ’™
                            </p>
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for almostDone.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\evening_feedback.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¡×™×›×•× ×”×”×ª×§×“××•×ª ×©×œ×š</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 50px 30px; text-align: center;">
                            <div style="font-size: 64px; margin-bottom: 20px;">âœ¨</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                ×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×©×§×¢×”, {{firstName}}!
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¨××™× ×• ××ª ×”×”×ª×§×“××•×ª ×©×œ×š ×”×™×•×
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                ×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-<strong>{{progressPercentage}}%</strong> - ××™×–×• ×”×ª×§×“××•×ª × ×”×“×¨×ª!
                            </p>

                            <!-- Progress Bar -->
                            <div style="margin: 20px 0;">
                                <div style="background: #e2e8f0; border-radius: 10px; height: 12px; overflow: hidden;">
                                    <div style="background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; width: {{progressPercentage}}%;"></div>
                                </div>
                            </div>

                            <!-- What was done today -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700;">
                                    âœ… ××” ×”×©×œ××ª ×”×™×•×
                                </h3>
                                <ul style="color: #1e40af; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    {{#each todayCompletedItems}}
                                    <li style="margin-bottom: 8px;">{{this}}</li>
                                    {{/each}}
                                </ul>
                            </div>

                            <!-- AI System Summary (×“×‘×¨ ×”××¢×¨×›×ª) -->
                            {{#if systemSummary}}
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid #a78bfa;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <span style="font-size: 32px; margin-left: 12px;">ğŸ§ </span>
                                    <h3 style="color: #5b21b6; margin: 0; font-size: 20px; font-weight: 700;">
                                        ×“×‘×¨ ×”××¢×¨×›×ª (×¡×™×›×•× ×”×©×“×›×Ÿ)
                                    </h3>
                                </div>
                                <div style="background: white; border-radius: 12px; padding: 20px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{systemSummary}}"
                                    </p>
                                </div>
                            </div>
                            {{/if}}

                            <!-- AI Insight -->
                            {{#if aiInsight}}
                            <div style="background: #f0fdfa; border-right: 4px solid #06b6d4; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #0f766e; margin: 0 0 12px 0; font-size: 18px; font-weight: 700;">
                                    ğŸ’¡ ×ª×•×‘× ×ª AI ×¨××©×•× ×™×ª
                                </h3>
                                <p style="color: #115e59; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{aiInsight}}
                                </p>
                                <p style="font-size: 13px; color: #134e4a; margin-top: 12px; font-style: italic;">
                                    ×–×•×”×™ ×¨×§ ×˜×¢×™××” ×××” ×©×”××¢×¨×›×ª ×œ×•××“×ª. ×›×›×œ ×©×ª×©×œ×™× ×™×•×ª×¨ ×¤×¨×˜×™×, ×›×š ×”×ª××•× ×” ×ª×”×™×” ××“×•×™×§×ª ×™×•×ª×¨.
                                </p>
                            </div>
                            {{/if}}

                            <!-- Next Step -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-right: 4px solid #f59e0b; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 19px; font-weight: 700;">
                                    ğŸ¯ ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; font-weight: 500;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #92400e; margin: 15px 0 0 0; font-size: 14px;">
                                    ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);">
                                            {{ctaText}} ğŸ’ª
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                ×™×© ×©××œ×”? ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ - ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š!
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0 0 10px 0; color: #4b5563; font-size: 14px; font-weight: 600;">
                                ×××©×™×›×™× ×œ×¢×‘×•×“! ğŸ”¥
                            </p>
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for evening_feedback.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\generic.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{emailTitle}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Dynamic Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                {{headerTitle}}
                            </h1>
                            {{#if headerSubtitle}}
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{headerSubtitle}}
                            </p>
                            {{/if}}
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{greeting}}
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                {{{mainMessage}}}
                            </p>

                            {{#if highlightBox}}
                            <!-- Highlight Box -->
                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 20px; margin: 20px 0;">
                                <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{{highlightBox}}}
                                </p>
                            </div>
                            {{/if}}

                            {{#if bulletPoints}}
                            <!-- Bullet Points -->
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 20px 0;">
                                <ul style="color: #475569; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    {{#each bulletPoints}}
                                    <li style="margin-bottom: 10px;">{{{this}}}</li>
                                    {{/each}}
                                </ul>
                            </div>
                            {{/if}}

                            {{#if ctaLink}}
                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                                            {{ctaText}}
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            {{/if}}

                            {{#if encouragement}}
                            <!-- Encouragement -->
                            <div style="background: #f0fdf4; border-right: 4px solid #10b981; border-radius: 8px; padding: 15px; margin: 20px 0;">
                                <p style="color: #166534; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{{encouragement}}}
                                </p>
                            </div>
                            {{/if}}

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                {{footerMessage}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                {{closingMessage}}
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden;">
                    
                    <!-- Dynamic Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); padding: 45px 30px; text-align: center;">
                            {{#if headerIcon}}
                            <div style="font-size: 56px; margin-bottom: 15px;">{{{headerIcon}}}</div>
                            {{/if}}
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{headerTitle}}
                            </h1>
                            {{#if headerSubtitle}}
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                {{headerSubtitle}}
                            </p>
                            {{/if}}
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{greeting}}
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                {{{mainMessage}}}
                            </p>

                            {{#if highlightBox}}
                            <!-- Highlight Box -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #dbeafe 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid rgba(139, 92, 246, 0.2);">
                                <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{{highlightBox}}}
                                </p>
                            </div>
                            {{/if}}

                            {{#if bulletPoints}}
                            <!-- Bullet Points -->
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <ul style="color: #475569; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    {{#each bulletPoints}}
                                    <li style="margin-bottom: 10px;">{{{this}}}</li>
                                    {{/each}}
                                </ul>
                            </div>
                            {{/if}}

                            {{#if ctaLink}}
                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);">
                                            {{ctaText}}
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            {{/if}}

                            {{#if encouragement}}
                            <!-- Encouragement -->
                            <div style="background: #f0fdf4; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <p style="color: #166534; margin: 0; font-size: 15px; line-height: 1.7; text-align: center;">
                                    {{{encouragement}}}
                                </p>
                            </div>
                            {{/if}}

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                {{footerMessage}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                {{closingMessage}}
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for generic.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\onboardingDay1.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech, {{firstName}}!
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×”××¡×¢ ×©×œ×š ××ª×—×™×œ ×›××Ÿ
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×©×œ×•× {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech - ××¢×¨×›×ª ×”×©×™×“×•×›×™× ×”×—×›××” ×©××©×œ×‘×ª ×˜×›× ×•×œ×•×’×™×” ××ª×§×“××ª ×¢× ×œ×™×•×•×™ ×× ×•×©×™ ×•×—×.
                            </p>

                            <!-- What's Next -->
                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h2 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600;">
                                    ğŸ’¡ ××” ×”×œ××”?
                                </h2>
                                <ul style="color: #4a5568; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">
                                        <strong>×”×©×œ× ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š</strong> - ×›×›×œ ×©× ×›×™×¨ ××•×ª×š ×™×•×ª×¨, ×›×š × ×•×›×œ ×œ××¦×•× ×œ×š ×”×ª×××” ×˜×•×‘×” ×™×•×ª×¨
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        <strong>×”×•×¡×£ ×ª××•× ×•×ª</strong> - ×ª××•× ×” ×©×•×•×” ××œ×£ ××™×œ×™×, ×•-3 ×ª××•× ×•×ª? ×”×¨×‘×” ×™×•×ª×¨!
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        <strong>××œ× ××ª ×”×©××œ×•×Ÿ</strong> - ×–×” ×¢×•×–×¨ ×œ× ×• ×œ×”×‘×™×Ÿ ××™ ××ª×” ×‘×××ª ×•××” ×—×©×•×‘ ×œ×š
                                    </li>
                                </ul>
                            </div>

                            <!-- Progress -->
                            <div style="margin: 20px 0;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="color: #4a5568; font-size: 14px; font-weight: 500;">×”×”×ª×§×“××•×ª ×©×œ×š</span>
                                    <span style="color: #06b6d4; font-weight: 600;">{{progressPercentage}}%</span>
                                </div>
                                <div style="background: #e2e8f0; border-radius: 10px; height: 12px; overflow: hidden;">
                                    <div style="background: linear-gradient(90deg, #06b6d4, #8b5cf6); height: 100%; width: {{progressPercentage}}%; transition: width 0.5s;"></div>
                                </div>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7;">
                                <strong>×”×¦×¢×“ ×”×‘× ×©×œ×š:</strong> {{nextAction}}
                            </p>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div style="background: #f0fdfa; border-right: 4px solid #06b6d4; border-radius: 8px; padding: 20px; margin: 20px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¡ ×˜×™×¤ ×—×›×:</strong> {{aiInsight}}
                                </p>
                            </div>
                            {{/if}}

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7;">
                                <strong>×˜×™×¤ ×—×©×•×‘:</strong> ×¤×¨×•×¤×™×œ×™× ××œ××™× ×¢× ×ª××•× ×•×ª ××™×›×•×ª×™×•×ª ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª!
                            </p>

                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: transform 0.2s;">
                                            ×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×™
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×™×© ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š! ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 10px 0; color: #718096; font-size: 14px;">
                                ×‘×”×¦×œ×—×” ×‘××¡×¢! ğŸ’™
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech. 
                                ×”××¢×¨×›×ª ×©×œ× ×• ×›×‘×¨ ××ª×—×™×œ×” ×œ×œ××•×“ ×¢×œ×™×š, ×•×›×œ ×¤×¨×˜ ×©×ª×•×¡×™×£ ×™×¢×–×•×¨ ×œ× ×• ×œ××¦×•× ×œ×š ××ª ×”×”×ª×××” ×”××•×©×œ××ª.
                            </p>

                            <!-- Progress Section -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 18px; font-weight: 600;">
                                    ğŸ“Š ××™×¤×” ×× ×—× ×• ×¢×›×©×™×•?
                                </h3>
                                
                                <!-- Progress Bar -->
                                <div style="background: #e2e8f0; border-radius: 12px; height: 24px; margin: 15px 0; overflow: hidden; position: relative;">
                                    <div style="background: linear-gradient(90deg, #06b6d4, #8b5cf6); height: 100%; width: {{progressPercentage}}%; transition: width 0.5s; border-radius: 12px;"></div>
                                    <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #1e293b; font-weight: 600; font-size: 13px;">
                                        {{progressPercentage}}% ×”×•×©×œ×
                                    </span>
                                </div>

                                <div style="margin-top: 20px;">
                                    <p style="color: #475569; margin: 0 0 8px 0; font-size: 14px;">
                                        <strong>âœ“ ××” ×”×•×©×œ×:</strong> {{#each completedItems}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
                                    </p>
                                    <p style="color: #dc2626; margin: 0; font-size: 14px;">
                                        <strong>â—‹ ××” ×—×¡×¨:</strong> {{missingItemsCount}} ×¤×¨×˜×™× × ×•×¡×¤×™×
                                    </p>
                                </div>
                            </div>

                            <!-- Next Step -->
                            <div style="background: #fef3c7; border-right: 4px solid #f59e0b; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">
                                    ğŸ¯ ×”×¦×¢×“ ×”×¨××©×•×Ÿ ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                            </div>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid rgba(139, 92, 246, 0.2);">
                                <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                    <span style="font-size: 28px; margin-left: 10px;">ğŸ§ </span>
                                    <h3 style="color: transparent; background: linear-gradient(135deg, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; margin: 0; font-size: 18px; font-weight: 700;">
                                        ×ª×•×‘× ×ª AI ××™×©×™×ª
                                    </h3>
                                </div>
                                <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{aiInsight}}
                                </p>
                            </div>
                            {{/if}}

                            <!-- Fun Fact -->
                            <div style="background: #f0fdfa; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¡ ×¢×•×‘×“×” ××¢× ×™×™× ×ª:</strong> ××©×ª××©×™× ×©×××œ××™× ××ª 3 ×”×ª××•× ×•×ª ×”×¨××©×•× ×•×ª ×‘×™×•× ×”×¨××©×•×Ÿ ××§×‘×œ×™× ×”×¦×¢×•×ª ××“×•×™×§×•×ª ×™×•×ª×¨ ×‘-85% ××”××§×¨×™×!
                                </p>
                            </div>

                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3); transition: transform 0.2s;">
                                            ×‘×•××• × ×ª×—×™×œ! ğŸš€
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š 24/7. ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×”!
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 10px 0; color: #718096; font-size: 14px;">
                                ×‘×”×¦×œ×—×” ×‘××¡×¢! ğŸ’™
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for onboardingDay1.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\profileNudge.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×˜×™×¤ ×§×˜×Ÿ ×©×™×¢×©×” ×”×‘×“×œ ×’×“×•×œ</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden; border: 1px solid rgba(255,255,255,0.7);">
                    
                    <tr>
                        <td style="background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); padding: 45px 30px; text-align: center; position: relative;">
                            <div style="font-size: 56px; margin-bottom: 15px;">ğŸ’¡</div>
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{firstName}}, ×™×© ×›××Ÿ ×›××” ×“×‘×¨×™× ×©×—×¡×¨×™×...
                            </h1>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×©×œ×•× {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                ×©×× ×• ×œ×‘ ×©×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×“×™×™×Ÿ ×œ× ××•×©×œ× ×œ×’××¨×™. ×× ×—× ×• ×™×•×“×¢×™× ×©×–×” ×œ×•×§×— ×–××Ÿ, ××‘×œ ×™×© ×œ× ×• × ×ª×•×Ÿ ××¢× ×™×™×Ÿ ×œ×©×ª×£ ××ª×š:
                            </p>

                            <div style="background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 100%); border-right: 4px solid #ec4899; border-radius: 16px; padding: 24px; margin: 28px 0; box-shadow: 0 4px 15px rgba(236, 72, 153, 0.1);">
                                <p style="color: #be123c; margin: 0; font-size: 16px; line-height: 1.8; font-weight: 600;">
                                    <strong style="font-size: 20px; display: block; margin-bottom: 8px;">ğŸ“Š × ×ª×•×Ÿ ×©×•×•×” ×œ×“×¢×ª:</strong>
                                    ×¤×¨×•×¤×™×œ×™× ××œ××™× ×¢× ×ª××•× ×•×ª ××™×›×•×ª×™×•×ª ××§×‘×œ×™× <strong style="font-size: 20px; background: linear-gradient(135deg, #ec4899, #f97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">×¤×™ 3 ×™×•×ª×¨</strong> ×”×¦×¢×•×ª ×”×ª×××” ××¤×¨×•×¤×™×œ×™× ×—×œ×§×™×™×!
                                </p>
                            </div>

                            <h2 style="color: #2d3748; margin: 30px 0 20px 0; font-size: 20px; font-weight: 600;">
                                ×”× ×” ××” ×©×—×¡×¨ ×‘×¤×¨×•×¤×™×œ ×©×œ×š:
                            </h2>

                            <div style="background: #f7fafc; border-radius: 12px; padding: 25px; margin: 20px 0;">
                                {{#each missingItems}}
                                <div style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                                    <span style="color: #f56565; font-size: 20px; margin-left: 10px; flex-shrink: 0;">âœ—</span>
                                    <p style="color: #4a5568; margin: 0; line-height: 1.6; font-size: 15px;">{{this}}</p>
                                </div>
                                {{/each}}
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 25px 0; line-height: 1.7;">
                                ×× ×—× ×• ××‘×˜×™×—×™× ×©×–×” ×œ× ×™×™×§×— ×™×•×ª×¨ ×-<strong>10 ×“×§×•×ª</strong>! ×•×–×” ×™×›×•×œ ×œ×¢×©×•×ª ××ª ×›×œ ×”×”×‘×“×œ ×‘×”×¦×œ×—×” ×©×œ×š ×œ××¦×•× ××ª ×”×”×ª×××” ×”××•×©×œ××ª.
                            </p>

                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(236, 72, 153, 0.35);">
                                            ×‘×•× × ×©×œ×™× ××ª ×–×” ×ª×•×š 10 ×“×§×•×ª ğŸš€
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×¦×¨×™×š ×¢×–×¨×” ××• ×™×© ×©××œ×•×ª? ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” - ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š!
                            </p>
                        </td>
                    </tr>

                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                ××××™× ×™× ×‘×š! â¤ï¸
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for profileNudge.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\progressUpdate.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                {{firstName}}, ××™×š ××ª×§×“××™×?
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¢×“×›×•×Ÿ ××”×™×¨ ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×š
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <!-- Progress Circle -->
                            <div style="text-align: center; margin: 30px 0;">
                                <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 20px; padding: 30px; display: inline-block;">
                                    <div style="font-size: 56px; font-weight: 900; background: linear-gradient(135deg, #06b6d4, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1;">
                                        {{progressPercentage}}%
                                    </div>
                                    <div style="color: #4a5568; font-size: 16px; margin-top: 8px; font-weight: 500;">×”×•×©×œ×</div>
                                </div>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7; text-align: center;">
                                <strong>×›×œ ×”×›×‘×•×“!</strong> ×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-{{progressPercentage}}%.
                            </p>

                            <!-- Why It Matters -->
                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h3 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600;">
                                    ×œ××” ×–×” ×›×œ ×›×š ×—×©×•×‘?
                                </h3>
                                <p style="color: #4a5568; margin: 0; font-size: 15px; line-height: 1.7;">
                                    ×›×œ ×¤×¨×˜ ×©××ª×” ××•×¡×™×£ ×¢×•×–×¨ ×œ××¢×¨×›×ª ×”-AI ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×™×•×ª×¨ ×œ×¢×•××§. ×œ××©×œ, {{aiLearning}}
                                </p>
                            </div>

                            <!-- Detailed Progress -->
                            <div style="background: #f8fafc; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #2d3748; margin: 0 0 20px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×”×•×©×œ× ×¢×“ ×›×”?
                                </h3>
                                
                                <!-- Photos -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #4a5568; font-size: 15px; font-weight: 500;">×ª××•× ×•×ª</span>
                                        <span style="color: {{#if photosComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{photosCount}}/3
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if photosComplete}}linear-gradient(90deg, #10b981, #059669){{else}}linear-gradient(90deg, #f59e0b, #d97706){{/if}}; height: 100%; width: {{photosPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Personal Details -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #4a5568; font-size: 15px; font-weight: 500;">×¤×¨×˜×™× ××™×©×™×™×</span>
                                        <span style="color: {{#if personalComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{#if personalComplete}}âœ“ ×”×•×©×œ×{{else}}{{personalMissingCount}} ×—×¡×¨×™×{{/if}}
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if personalComplete}}linear-gradient(90deg, #10b981, #059669){{else}}linear-gradient(90deg, #f59e0b, #d97706){{/if}}; height: 100%; width: {{personalPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Questionnaire -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #4a5568; font-size: 15px; font-weight: 500;">×©××œ×•×Ÿ</span>
                                        <span style="color: {{#if questionnaireComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{questionnairePercent}}%
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if questionnaireComplete}}linear-gradient(90deg, #10b981, #059669){{else}}linear-gradient(90deg, #f59e0b, #d97706){{/if}}; height: 100%; width: {{questionnairePercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Preferences -->
                                <div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #4a5568; font-size: 15px; font-weight: 500;">×”×¢×“×¤×•×ª ×‘×Ÿ/×‘×ª ×–×•×’</span>
                                        <span style="color: {{#if preferencesComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{#if preferencesComplete}}âœ“ ×”×•×©×œ×{{else}}{{preferencesMissingCount}} ×—×¡×¨×™×{{/if}}
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if preferencesComplete}}linear-gradient(90deg, #10b981, #059669){{else}}linear-gradient(90deg, #f59e0b, #d97706){{/if}}; height: 100%; width: {{preferencesPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Next Action -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-right: 4px solid #f59e0b; border-radius: 8px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">
                                    ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0 0 10px 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #92400e; margin: 0; font-size: 14px;">
                                    ×–×” ×™×™×§×— ×¨×§ <strong>{{estimatedTime}}</strong> ×•×™×§×¤×™×¥ ××•×ª×š ×œ-<strong>{{nextMilestone}}%</strong>!
                                </p>
                            </div>

                            {{#if aiPersonalInsight}}
                            <!-- AI Insight -->
                            <div style="background: #f0fdfa; border-right: 4px solid #06b6d4; border-radius: 8px; padding: 20px; margin: 20px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¡ ×ª×•×‘× ×” ××™×©×™×ª:</strong> {{aiPersonalInsight}}
                                </p>
                            </div>
                            {{/if}}

                            <!-- Social Proof -->
                            <div style="background: #f0fdfa; border-right: 3px solid #14b8a6; border-radius: 8px; padding: 15px; margin: 20px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>×˜×™×¤:</strong> ××©×ª××©×™× ×©××’×™×¢×™× ×œ-70% ×‘×©×‘×•×¢ ×”×¨××©×•×Ÿ ××§×‘×œ×™× ×”×¦×¢×•×ª ××™×›×•×ª×™×•×ª ×¤×™ 4 ×™×•×ª×¨ ××”×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                                            {{ctaText}}
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×™×© ×©××œ×”? ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ - ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š!
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                ×××©×™×›×™× ×œ×¢×‘×•×“!
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); padding: 45px 30px; text-align: center;">
                            <div style="font-size: 56px; margin-bottom: 15px;">ğŸ“Š</div>
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{firstName}}, ××ª×” ×¢×•×©×” ×¢×‘×•×“×” ××¢×•×œ×”!
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                ×”× ×” ×¢×“×›×•×Ÿ ××”×™×¨ ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×š
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <!-- Big Progress Number -->
                            <div style="text-align: center; margin: 30px 0;">
                                <div style="display: inline-block; background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); border-radius: 50%; width: 140px; height: 140px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);">
                                    <div style="color: white;">
                                        <div style="font-size: 48px; font-weight: 800; line-height: 1;">{{progressPercentage}}%</div>
                                        <div style="font-size: 14px; margin-top: 5px;">×”×•×©×œ×</div>
                                    </div>
                                </div>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7; text-align: center;">
                                <strong>×›×œ ×”×›×‘×•×“!</strong> ×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-{{progressPercentage}}%.
                            </p>

                            <!-- What Makes This Special -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #dbeafe 100%); border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 18px; font-weight: 600;">
                                    ğŸ§  ×œ××” ×–×” ×›×œ ×›×š ×—×©×•×‘?
                                </h3>
                                <p style="color: #1e40af; margin: 0; font-size: 15px; line-height: 1.7;">
                                    ×›×œ ×¤×¨×˜ ×©××ª×” ××•×¡×™×£ ×¢×•×–×¨ ×œ××¢×¨×›×ª ×”-AI ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×™×•×ª×¨ ×œ×¢×•××§. 
                                    ×œ××©×œ, {{aiLearning}}
                                </p>
                            </div>

                            <!-- Detailed Breakdown -->
                            <div style="background: #f8fafc; border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #334155; margin: 0 0 20px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×”×•×©×œ× ×¢×“ ×›×”?
                                </h3>
                                
                                <!-- Task 1: Photos -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            ğŸ“¸ ×ª××•× ×•×ª
                                        </span>
                                        <span style="color: {{#if photosComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{photosCount}}/3
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if photosComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{photosPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Task 2: Personal Details -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            ğŸ‘¤ ×¤×¨×˜×™× ××™×©×™×™×
                                        </span>
                                        <span style="color: {{#if personalComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{#if personalComplete}}âœ“ ×”×•×©×œ×{{else}}{{personalMissingCount}} ×—×¡×¨×™×{{/if}}
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if personalComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{personalPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Task 3: Questionnaire -->
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            ğŸ“ ×©××œ×•×Ÿ
                                        </span>
                                        <span style="color: {{#if questionnaireComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{questionnairePercent}}%
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if questionnaireComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{questionnairePercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>

                                <!-- Task 4: Partner Preferences -->
                                <div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            ğŸ¯ ×”×¢×“×¤×•×ª ×‘×Ÿ/×‘×ª ×–×•×’
                                        </span>
                                        <span style="color: {{#if preferencesComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{#if preferencesComplete}}âœ“ ×”×•×©×œ×{{else}}{{preferencesMissingCount}} ×—×¡×¨×™×{{/if}}
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if preferencesComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{preferencesPercent}}%; transition: width 0.5s;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Next Action -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-right: 4px solid #f59e0b; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    ğŸš€ ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0 0 15px 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #92400e; margin: 0; font-size: 14px;">
                                    ×–×” ×™×™×§×— ×¨×§ <strong>{{estimatedTime}} ×“×§×•×ª</strong> ×•×™×§×¤×™×¥ ××•×ª×š ×œ-<strong>{{nextMilestone}}%</strong>!
                                </p>
                            </div>

                            {{#if aiPersonalInsight}}
                            <!-- AI Personal Insight -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid rgba(139, 92, 246, 0.2);">
                                <div style="margin-bottom: 12px;">
                                    <span style="font-size: 28px; margin-left: 10px;">ğŸ’¡</span>
                                    <span style="color: transparent; background: linear-gradient(135deg, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; font-size: 18px; font-weight: 700;">
                                        ×ª×•×‘× ×” ××•×ª×××ª ××™×©×™×ª ×¢×‘×•×¨×š
                                    </span>
                                </div>
                                <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                    "{{aiPersonalInsight}}"
                                </p>
                            </div>
                            {{/if}}

                            <!-- Social Proof -->
                            <div style="background: #f0fdfa; border-radius: 12px; padding: 20px; margin: 25px 0; border-right: 3px solid #14b8a6;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¬ ×˜×™×¤ ××”×©×“×›× ×™×:</strong> ××©×ª××©×™× ×©××’×™×¢×™× ×œ-70% ×‘×©×‘×•×¢ ×”×¨××©×•×Ÿ ××§×‘×œ×™× ×”×¦×¢×•×ª ××™×›×•×ª×™×•×ª ×¤×™ 4 ×™×•×ª×¨ ××”×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);">
                                            {{ctaText}} ğŸ’ª
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×™×© ×©××œ×”? ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ - ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š!
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                ×××©×™×›×™× ×œ×¢×‘×•×“! ğŸ”¥
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for progressUpdate.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\reengagement.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×–×•×›×¨ ××•×ª× ×•?</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¢×‘×¨ ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×. ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h3 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600; text-align: center;">
                                    ××™×¤×” ×”×¤×¡×§× ×•?
                                </h3>
                                <div style="text-align: center; margin: 15px 0;">
                                    <div style="font-size: 48px; font-weight: 900; background: linear-gradient(135deg, #06b6d4, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                                        {{progressPercentage}}%
                                    </div>
                                    <p style="color: #4a5568; margin: 8px 0 0 0; font-size: 15px;">×”×•×©×œ×</p>
                                </div>
                                <p style="color: #4a5568; margin: 12px 0 0 0; font-size: 15px; text-align: center;">
                                    ×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×•××“ ×¢×œ <strong>{{progressPercentage}}%</strong> - ×–×” ×™×¤×”!<br>
                                    × ×©××¨ ×¨×§ ×§×¦×ª ×›×“×™ ×œ×”×’×™×¢ ×œ-100%.
                                </p>
                            </div>

                            {{#if aiRemembered}}
                            <!-- What We Remember -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #5a67d8; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×× ×—× ×• ×–×•×›×¨×™× ×¢×œ×™×š
                                </h3>
                                <div style="background: white; border-radius: 8px; padding: 16px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{aiRemembered}}"
                                    </p>
                                </div>
                                <p style="color: #6b21a8; margin: 12px 0 0 0; font-size: 14px;">
                                    ×–×” ××” ×©×œ××“× ×• ×¢×œ×™×š. ×‘×•×/×™ × ×©×œ×™× ××ª ×”×ª××•× ×”!
                                </p>
                            </div>
                            {{/if}}

                            <!-- What's New -->
                            <div style="background: #f0fdf4; border-right: 4px solid #10b981; border-radius: 8px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #166534; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    ××” ×—×“×© ×××–
                                </h3>
                                <p style="color: #15803d; margin: 0 0 8px 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - ×™×•×ª×¨ ××“×•×™×§ ××ª××™×“
                                </p>
                                <p style="color: #15803d; margin: 0 0 8px 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                </p>
                                <p style="color: #15803d; margin: 0; font-size: 14px; line-height: 1.6;">
                                    â€¢ {{newUsersCount}}+ ××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©
                                </p>
                            </div>

                            <!-- Next Step -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-right: 4px solid #f59e0b; border-radius: 8px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">
                                    ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #a16207; margin: 12px 0 0 0; font-size: 14px;">
                                    ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
                                </p>
                            </div>

                            <!-- Social Proof -->
                            <div style="background: #f0fdfa; border-right: 3px solid #06b6d4; border-radius: 8px; padding: 15px; margin: 20px 0;">
                                <p style="color: #0f766e; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>××’×‘:</strong> ××©×ª××©×™× ×©×—×–×¨×• ×•×”×©×œ×™××• ×¨××• ×ª×•×¦××•×ª ×ª×•×š ×©×‘×•×¢×™×™×. ×œ× ×××•×—×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                                            ×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×•
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                ×× ××©×”×• ××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>
                                ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 5px 0; color: #718096; font-size: 14px;">
                                ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="font-size: 64px; margin-bottom: 20px;">ğŸ’Œ</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×¢×‘×¨ ×§×¦×ª ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×”×™×™ {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×, ×•×™×© ×”××•×Ÿ ×“×‘×¨×™× ×¢×œ ×”×¨××©. 
                                ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%); border-radius: 16px; padding: 28px; margin: 25px 0; border: 2px solid #3b82f6;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700; text-align: center;">
                                    ğŸ“Œ ××™×¤×” ×”×¤×¡×§× ×•?
                                </h3>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="display: inline-block; width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                                        <div style="color: white; text-align: center;">
                                            <div style="font-size: 42px; font-weight: 900; line-height: 1;">{{progressPercentage}}%</div>
                                            <div style="font-size: 13px; margin-top: 5px; opacity: 0.9;">×”×•×©×œ×</div>
                                        </div>
                                    </div>
                                </div>
                                <p style="color: #1e40af; margin: 15px 0 0 0; font-size: 15px; text-align: center; line-height: 1.6;">
                                    ×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×•××“ ×¢×œ <strong>{{progressPercentage}}%</strong> - ×–×” ×‘×××ª ×™×¤×”!<br>
                                    × ×©××¨ ×¨×§ ×§×¦×ª ×¢×‘×•×“×” ×›×“×™ ×œ×”×’×™×¢ ×œ-100%.
                                </p>
                            </div>

                            {{#if aiRemembered}}
                            <!-- What We Remember About You -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid #a78bfa;">
                                <h3 style="color: #5b21b6; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    ğŸ§  ××” ×× ×—× ×• ×–×•×›×¨×™× ×¢×œ×™×š
                                </h3>
                                <div style="background: white; border-radius: 12px; padding: 20px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{aiRemembered}}"
                                    </p>
                                </div>
                                <p style="color: #6b21a8; margin: 15px 0 0 0; font-size: 14px;">
                                    ×–×” ××” ×©×œ××“× ×• ×¢×œ×™×š ×¢×“ ×¢×›×©×™×•. ×‘×•×/×™ × ×©×œ×™× ××ª ×”×ª××•× ×”!
                                </p>
                            </div>
                            {{/if}}

                            <!-- What's New -->
                            <div style="background: #f0fdf4; border-radius: 16px; padding: 24px; margin: 25px 0; border-right: 4px solid #10b981;">
                                <h3 style="color: #166534; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    âœ¨ ××” ×—×“×© ×××– ×©×œ× ×”×™×™×ª×
                                </h3>
                                <ul style="color: #15803d; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">
                                        ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - <strong>×™×•×ª×¨ ××“×•×™×§ ××ª××™×“</strong>
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        {{newUsersCount}}+ ××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©
                                    </li>
                                </ul>
                            </div>

                            <!-- Next Step -->
                            <div style="background: linear-gradient(to left, #fef3c7, #fed7aa); border-radius: 16px; padding: 4px; margin: 30px 0;">
                                <div style="background: white; border-radius: 12px; padding: 24px;">
                                    <h3 style="color: #92400e; margin: 0 0 15px 0; font-size: 19px; font-weight: 700; text-align: center;">
                                        ğŸ¯ ×”×¦×¢×“ ×”×‘× ×©×œ×š
                                    </h3>
                                    <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; text-align: center; font-weight: 500;">
                                        {{nextAction}}
                                    </p>
                                    <p style="color: #a16207; margin: 15px 0 0 0; font-size: 14px; text-align: center;">
                                        ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
                                    </p>
                                </div>
                            </div>

                            <!-- Social Proof -->
                            <div style="background: #fef2f8; border-radius: 12px; padding: 20px; margin: 25px 0; border-right: 3px solid #ec4899;">
                                <p style="color: #9f1239; margin: 0; font-size: 14px; line-height: 1.6;">
                                    <strong>ğŸ’¬ ××’×‘:</strong> ××©×ª××©×™× ×©×—×–×¨×• ×•×”×©×œ×™××• ××ª ×”×¤×¨×•×¤×™×œ ××—×¨×™ ×”×¤×¡×§×” ×¨××• ×ª×•×¦××•×ª ×ª×•×š ×©×‘×•×¢×™×™× ×‘×××•×¦×¢. ×–×” ×œ× ×××•×—×¨!
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4); text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                            ×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×• ğŸ’ª
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <!-- Personal Touch -->
                            <div style="background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <p style="color: #9f1239; margin: 0; font-size: 15px; line-height: 1.7; text-align: center; font-style: italic;">
                                    "×”×—×™×™× ××ª×§×“××™× ×‘××”×™×¨×•×ª. ×œ×¤×¢××™× ×¦×¨×™×š ×¨×§ ×ª×–×›×•×¨×ª ×§×˜× ×” ×›×“×™ ×œ×—×–×•×¨ ×œ××¡×œ×•×œ."
                                </p>
                            </div>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                ×× ×™×© ××©×”×• ×©××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>
                                ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨ ×œ×š.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0 0 10px 0; color: #4b5563; font-size: 14px; font-weight: 600;">
                                ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š ğŸ’™
                            </p>
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for reengagement.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\welcome.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×¨×•×›×™× ×”×‘××™× ×œ-NeshamaTech</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); direction: rtl;">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    <!-- Header with gradient matching site -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="position: absolute; top: 20px; right: 20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; filter: blur(20px);"></div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                ğŸ‰ ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                ×”××¡×¢ ×©×œ×š ×œ×”×ª×××” ××•×©×œ××ª ××ª×—×™×œ ×›××Ÿ
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                ×©×œ×•× {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech - ××¢×¨×›×ª ×”×©×™×“×•×›×™× ×”×—×›××” ×©××©×œ×‘×ª ×˜×›× ×•×œ×•×’×™×” ××ª×§×“××ª ×¢× ×”×‘×™× ×” ×•×”×—×•× ×”×× ×•×©×™×™× ×©×œ ×©×“×›× ×™× ××§×¦×•×¢×™×™×.
                            </p>

                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h2 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600;">
                                    ğŸ’¡ ××” ×”×œ××”?
                                </h2>
                                <ul style="color: #4a5568; margin: 0; padding-right: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">
                                        <strong>×”×©×œ× ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š</strong> - ×›×›×œ ×©× ×“×¢ ××•×ª×š ×™×•×ª×¨, ×›×š × ×•×›×œ ×œ××¦×•× ×œ×š ×”×ª×××” ×˜×•×‘×” ×™×•×ª×¨
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        <strong>×”×•×¡×£ ×ª××•× ×•×ª</strong> - ×ª××•× ×” ×©×•×•×” ××œ×£ ××™×œ×™×, ×•-3 ×ª××•× ×•×ª? ×–×” ×”×¨×‘×” ×™×•×ª×¨!
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        <strong>××œ× ××ª ×”×©××œ×•×Ÿ</strong> - ×–×” ×¢×•×–×¨ ×œ× ×• ×œ×”×‘×™×Ÿ ××™ ××ª×” ×‘×××ª ×•××” ×—×©×•×‘ ×œ×š
                                    </li>
                                </ul>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7;">
                                <strong>×˜×™×¤ ×—×©×•×‘:</strong> ×¤×¨×•×¤×™×œ×™× ××œ××™× ×¢× ×ª××•× ×•×ª ××™×›×•×ª×™×•×ª ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª! ××– ×›×“××™ ×œ×”×©×§×™×¢ ×›××” ×“×§×•×ª ×¢×›×©×™×•.
                            </p>

                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 30px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: transform 0.2s;">
                                            ×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×™
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                ×™×© ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š! ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 10px 0; color: #718096; font-size: 14px;">
                                ×‘×”×¦×œ×—×” ×‘××¡×¢ ×©×œ×š! ğŸ’™
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                ×¦×•×•×ª NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for welcome.hbs ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\whatsapp
================================================================================

(This directory is empty.)

