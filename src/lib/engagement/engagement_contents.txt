################################################################################
# Directory Content Map For: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
# Generated on: 2025-10-28 16:04:35
################################################################################

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\SmartEngagementOrchestrator.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/SmartEngagementOrchestrator.ts

import prisma from '@/lib/prisma';
import { CampaignStatus, Language, User, Prisma } from '@prisma/client';
import aiService from '@/lib/services/aiService';
import profileAiService from '@/lib/services/profileAiService';
import { profileFeedbackService } from '@/lib/services/profileFeedbackService';
import { getEmailDictionary } from '@/lib/dictionaries';
import type { EmailDictionary } from '@/types/dictionaries/email';
import { SignJWT } from 'jose';

interface UserEngagementProfile {
  userId: string;
  firstName: string;
  daysInSystem: number;
  completionStatus: {
    overall: number;
    photos: { current: number; needed: number; isDone: boolean };
    personalDetails: { missing: string[]; isDone: boolean };
    partnerPreferences: { missing: string[]; isDone: boolean };
    questionnaire: {
      completionPercent: number;
      worldsStatus: Array<{ world: string; completed: number; total: number; isDone: boolean; }>;
    };
    hasSeenPreview: boolean;
  };
  aiInsights: {
    personalitySummary?: string;
    lookingForSummary?: string;
    topStrengths: string[];
    topGaps: string[];
  } | null;
  lastEmailSent?: Date;
  lastEmailType?: string;
  emailsSentCount: number;
  lastActiveDate?: Date;
    dripCampaign?: {
    sentEmailTypes: string[];
  } | null;

  triggers: {
    stagnant?: boolean;
    almostDone?: boolean;
    askedForTestimonial?: boolean;
  };
}

interface EmailToSend {
  type: 'ONBOARDING_DAY_1' | 'ONBOARDING_PHOTOS' | 'ONBOARDING_AI_TEASER' | 'ONBOARDING_QUESTIONNAIRE_WHY' | 'ONBOARDING_VALUE_ADD' | 'NUDGE' | 'CELEBRATION' | 'INSIGHT' | 'VALUE' | 'EVENING_FEEDBACK' | 'AI_SUMMARY';
  priority: 'HIGH' | 'NORMAL' | 'LOW';
  subject: string;
  content: {
    hook: string;
    mainMessage: string;
    aiContent?: string;
    specificAction?: string;
    progressVisualization?: string;
    encouragement: string;
    systemSummary?: string;
    aiInsight?: string;
    todayProgress?: {
      itemsCompleted: string[];
      newCompletion: number;
    };
  };
  sendInDays: number;
}

function populateTemplate(template: string, data: Record<string, any>): string {
  if (!template) return '';
  let result = template;
  for (const key in data) {
    result = result.replace(new RegExp(`{{${key}}}`, 'g'), String(data[key]));
  }
  return result;
}

export class SmartEngagementOrchestrator {

  // ========== Test Methods ==========
  
  static async testBuildUserEngagementProfile(userId: string) {
    return this.buildUserEngagementProfile(userId, false);
  }

  static async testDetectDailyActivity(userId: string) {
    return this.detectDailyActivity(userId);
  }

  static async testGetEveningFeedbackEmail(
    profile: UserEngagementProfile,
    dailyActivity: Awaited<ReturnType<typeof SmartEngagementOrchestrator.detectDailyActivity>>,
    dict: EmailDictionary
  ) {
    return this.getEveningFeedbackEmail(profile, dailyActivity, dict);
  }

  // [+] Exposing morning campaign emails for manual sending from dashboard
  static async testGetOnboardingDay1Email(profile: UserEngagementProfile, dict: EmailDictionary) {
      return this.getOnboardingDay1Email(profile, dict);
  }
  
  static async testGetOnboardingPhotosEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
      return this.getOnboardingPhotosEmail(profile, dict);
  }
  
  static async testGetOnboardingAiTeaserEmail(profile: UserEngagementProfile, dict: EmailDictionary, language: Language) {
      if (!profile.aiInsights) {
          await this.loadAiInsights(profile, language);
      }
      return this.getOnboardingAiTeaserEmail(profile, dict);
  }
  
  static async testGetOnboardingQuestionnaireWhyEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
      return this.getOnboardingQuestionnaireWhyEmail(profile, dict);
  }
  
  static async testGetOnboardingValueAddEmail(profile: UserEngagementProfile, dict: EmailDictionary, language: Language) {
      if (!profile.aiInsights) {
          await this.loadAiInsights(profile, language);
      }
      return this.getOnboardingValueAddEmail(profile, dict);
  }

  static async testGetPhotoNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
    return this.getPhotoNudgeEmail(profile, dict);
  }
  
  static async testGetQuestionnaireNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
    return this.getQuestionnaireNudgeEmail(profile, dict);
  }

  static async testGetAlmostDoneEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
    return this.getAlmostDoneEmail(profile, dict);
  }

  static async testGetAiSummaryEmail(profile: UserEngagementProfile, dict: EmailDictionary, language: Language) {
    if (!profile.aiInsights) {
        console.log(`ğŸ§  [Manual AI Summary] AI insights not pre-loaded. Fetching now...`);
        await this.loadAiInsights(profile, language);
    }
    return this.getAiSummaryEmail(profile, dict);
  }

  static async testGetValueEmail(profile: UserEngagementProfile, dict: EmailDictionary) {
    return this.getValueEmail(profile, dict);
  }

  // ========== Main Campaign Methods ==========
  
  static async runDailyCampaign() {
    console.log('ğŸš€ [Smart Engagement] Starting daily campaign run...');
    const usersToProcess = await this.getActiveUsers();
    console.log(`ğŸ“Š [Smart Engagement] Found ${usersToProcess.length} users to process`);
    
    let emailsSent = 0;
    
    for (const user of usersToProcess) {
      try {
        // STEP 1: Build profile WITHOUT expensive AI
        const profile = await this.buildUserEngagementProfile(user.id, false);
        const dict = await getEmailDictionary(user.language as Language);
        
        // STEP 2: Decide if email is needed (smart check)
        const emailType = await this.determineEmailType(profile);
        
        if (!emailType) {
          console.log(`â­ï¸ [Smart Engagement] No email needed for user ${user.id} at this time`);
          continue;
        }
        
        // STEP 3: Only NOW get AI insights if needed
        const needsAI = emailType === 'AI_SUMMARY' || emailType === 'INSIGHT' || emailType === 'ONBOARDING_AI_TEASER' || emailType === 'ONBOARDING_VALUE_ADD';
        if (needsAI && !profile.aiInsights) {
          console.log(`ğŸ§  [Smart Engagement] Fetching AI insights for ${emailType} email...`);
          await this.loadAiInsights(profile, user.language as Language);
        }
        
        // STEP 4: Generate the actual email
        const emailToSend = await this.generateEmail(emailType, profile, dict);
        
        if (emailToSend) {
          await this.sendEmail(user, emailToSend);
          await this.updateCampaignRecord(user.id, emailToSend.type);
          emailsSent++;
          console.log(`âœ… [Smart Engagement] Sent ${emailToSend.type} email to user ${user.id}`);
        }
        
      } catch (error) {
        console.error(`âŒ [Smart Engagement] Error processing user ${user.id}:`, error);
      }
    }
    
    console.log(`ğŸ‰ [Smart Engagement] Campaign complete. Sent ${emailsSent} emails.`);
    return { processed: usersToProcess.length, sent: emailsSent };
  }

// ========== Evening Campaign (Enhanced with Detailed Logging) ==========
  
  static async runEveningCampaign() {
    console.log('\n========================================');
    console.log('ğŸŒ™ [Evening Campaign] Starting...');
    console.log('========================================\n');
    
    const usersToProcess = await this.getTodaysActiveUsers();
    console.log(`ğŸ“Š [Evening Campaign] Found ${usersToProcess.length} potentially active users today\n`);
    
    let emailsSent = 0;
    let skippedNoActivity = 0;
    let errors = 0;
    
    for (let i = 0; i < usersToProcess.length; i++) {
      const user = usersToProcess[i];
      
      console.log(`\n--- Processing User ${i + 1}/${usersToProcess.length} ---`);
      console.log(`ğŸ‘¤ User: ${user.firstName} ${user.lastName} (${user.id})`);
      console.log(`ğŸ“§ Email: ${user.email}`);
      
      try {
        // ×‘× ×™×™×ª ×¤×¨×•×¤×™×œ
        console.log(`ğŸ”¨ Building engagement profile...`);
        const profile = await this.buildUserEngagementProfile(user.id, false);
        
        // ×˜×¢×™× ×ª dictionary
        const dict = await getEmailDictionary(user.language as Language);
        
        // ×‘×“×™×§×ª ×¤×¢×™×œ×•×ª ×™×•××™×ª
        console.log(`ğŸ” Detecting daily activity...`);
        const dailyActivity = await this.detectDailyActivity(profile.userId);
        
        if (!dailyActivity.hasActivity) {
          console.log(`â­ï¸  SKIPPING: No activity detected for user ${user.id}`);
          console.log(`   Reason: User didn't update profile, upload images, or answer questionnaire today`);
          skippedNoActivity++;
          continue;
        }
        
        console.log(`âœ… Activity detected! Preparing evening feedback email...`);
        
        // ×™×¦×™×¨×ª ×”××™×™×œ
        const emailToSend = await this.getEveningFeedbackEmail(profile, dailyActivity, dict);
        
        if (emailToSend) {
          console.log(`ğŸ“§ Sending EVENING_FEEDBACK email...`);
          await this.sendEmail(user, emailToSend);
          await this.updateCampaignRecord(user.id, emailToSend.type);
          emailsSent++;
          console.log(`âœ… Successfully sent EVENING_FEEDBACK to ${user.email}`);
        } else {
          console.log(`âš ï¸  Email generation returned null - skipping`);
        }
        
      } catch (error) {
        errors++;
        console.error(`âŒ Error processing user ${user.id}:`, error);
        if (error instanceof Error) {
          console.error(`   Error message: ${error.message}`);
          console.error(`   Stack trace:`, error.stack);
        }
      }
    }
    
    console.log('\n========================================');
    console.log('ğŸ‰ Evening Campaign Complete!');
    console.log('========================================');
    console.log(`ğŸ“Š Summary:`);
    console.log(`   Total Users Checked: ${usersToProcess.length}`);
    console.log(`   âœ… Emails Sent: ${emailsSent}`);
    console.log(`   â­ï¸  Skipped (No Activity): ${skippedNoActivity}`);
    console.log(`   âŒ Errors: ${errors}`);
    console.log('========================================\n');
    
    return { processed: usersToProcess.length, sent: emailsSent };
  }

  // ========== Core Logic Methods ==========
  
  private static async buildUserEngagementProfile(
    userId: string, 
    includeAI: boolean = false
  ): Promise<UserEngagementProfile> {
    const user = await prisma.user.findUnique({
      where: { id: userId },
      include: {
        profile: {
          include: {
            testimonials: { where: { status: 'APPROVED' } }
          }
        },
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
    
    if (!user) throw new Error(`User ${userId} not found`);

    const daysInSystem = Math.floor((Date.now() - user.createdAt.getTime()) / (1000 * 60 * 60 * 24));
    const feedbackReport = await profileFeedbackService.compileFeedbackReport(
      userId, 
      user.language as Language,
      undefined,
      !includeAI
    );

    let aiInsights: UserEngagementProfile['aiInsights'] = null;
    if (includeAI) {
      aiInsights = await this.getAiInsights(userId, user.language as Language);
    }

    const campaign = user.dripCampaign;
    const lastActiveDate = user.lastLogin || user.updatedAt;
    const daysSinceActive = Math.floor((Date.now() - lastActiveDate.getTime()) / (1000 * 60 * 60 * 24));
    const hasAskedForTestimonial = !!(user.profile?.testimonials && user.profile.testimonials.length > 0);

    return {
      userId,
      firstName: user.firstName,
      daysInSystem,
      completionStatus: {
        overall: feedbackReport.completionPercentage,
        photos: { 
          current: user.images.length, 
          needed: 3, 
          isDone: user.images.length >= 3 
        },
        personalDetails: { 
          missing: feedbackReport.missingProfileItems, 
          isDone: feedbackReport.missingProfileItems.length === 0 
        },
        partnerPreferences: { 
          missing: feedbackReport.missingProfileItems.filter(item => 
            item.includes('×”×¢×“×¤') || item.includes('××—×¤×©')
          ), 
          isDone: feedbackReport.missingProfileItems.filter(item => 
            item.includes('×”×¢×“×¤') || item.includes('××—×¤×©')
          ).length === 0 
        },
        questionnaire: {
          completionPercent: feedbackReport.completionPercentage,
          worldsStatus: feedbackReport.missingQuestionnaireItems.map(item => ({
            world: item.world,
            completed: 0,
            total: 19, // This is an approximation
            isDone: false
          }))
        },
        hasSeenPreview: user.profile?.hasViewedProfilePreview || false
      },
      aiInsights,
      lastEmailSent: campaign?.updatedAt,
      lastEmailType: campaign?.lastSentType || undefined,
      emailsSentCount: campaign?.currentStep || 0,
      lastActiveDate,
        dripCampaign: user.dripCampaign ? { sentEmailTypes: user.dripCampaign.sentEmailTypes } : null,

      triggers: {
        stagnant: daysSinceActive >= 5 && daysInSystem > 7,
        almostDone: feedbackReport.completionPercentage >= 90,
        askedForTestimonial: hasAskedForTestimonial,
      }
    };
  }

  private static async loadAiInsights(
    profile: UserEngagementProfile, 
    language: Language
  ): Promise<void> {
    const aiInsights = await this.getAiInsights(profile.userId, language);
    profile.aiInsights = aiInsights;
  }

  private static async getAiInsights(
    userId: string, 
    language: Language
  ): Promise<UserEngagementProfile['aiInsights']> {
    try {
        const narrativeProfile = await profileAiService.generateNarrativeProfile(userId);
        if (!narrativeProfile) return null;

        const analysis = await aiService.getProfileAnalysis(narrativeProfile, language);
        if (!analysis) return null;

        return {
        personalitySummary: analysis.personalitySummary,
        lookingForSummary: analysis.lookingForSummary,
        topStrengths: analysis.completenessReport
            .filter(r => r.status === 'COMPLETE')
            .slice(0, 3)
            .map(r => r.feedback),
        topGaps: analysis.actionableTips
            .slice(0, 3)
            .map(t => t.tip)
        };
    } catch (error) {
        console.error(`[AI Service] Failed to get AI insights for user ${userId}:`, error);
        return null;
    }
  }

  private static async determineEmailType(
    profile: UserEngagementProfile
  ): Promise<EmailToSend['type'] | null> {
    const { daysInSystem, completionStatus, triggers, lastEmailSent, lastEmailType } = profile;

    if (lastEmailSent) {
      const daysSinceLastEmail = Math.floor(
        (Date.now() - lastEmailSent.getTime()) / (1000 * 60 * 60 * 24)
      );
      if (daysSinceLastEmail < 1) {
        return null;
      }
    }

const sentEmailTypes = new Set(profile.dripCampaign?.sentEmailTypes || []); // <--- ×–×• ×”×©×•×¨×” ×”××ª×•×§× ×ª
    // Smart Onboarding Campaign (First 7 Days)
    if (daysInSystem <= 7) {
        if (daysInSystem <= 1 && !sentEmailTypes.has('ONBOARDING_DAY_1')) {
            return 'ONBOARDING_DAY_1';
        }
        if (daysInSystem >= 2 && !completionStatus.photos.isDone && !sentEmailTypes.has('ONBOARDING_PHOTOS')) {
            return 'ONBOARDING_PHOTOS';
        }
        if (daysInSystem >= 3 && completionStatus.photos.isDone && completionStatus.questionnaire.completionPercent < 20 && !sentEmailTypes.has('ONBOARDING_AI_TEASER')) {
            return 'ONBOARDING_AI_TEASER';
        }
        if (daysInSystem >= 5 && completionStatus.questionnaire.completionPercent >= 20 && completionStatus.questionnaire.completionPercent < 80 && !sentEmailTypes.has('ONBOARDING_QUESTIONNAIRE_WHY')) {
            return 'ONBOARDING_QUESTIONNAIRE_WHY';
        }
        if (daysInSystem >= 7 && completionStatus.questionnaire.completionPercent >= 80 && !triggers.askedForTestimonial && !sentEmailTypes.has('ONBOARDING_VALUE_ADD')) {
            return 'ONBOARDING_VALUE_ADD';
        }
    }

    // Post-Onboarding Logic (After Day 7)
    if (triggers.almostDone && lastEmailType !== 'CELEBRATION') return 'CELEBRATION';
    if (triggers.stagnant && lastEmailType !== 'NUDGE') return 'NUDGE';
    if (!completionStatus.photos.isDone) return 'NUDGE';
    if (completionStatus.questionnaire.completionPercent < 50) return 'NUDGE';
    if (completionStatus.overall >= 40 && completionStatus.overall < 90 && lastEmailType !== 'AI_SUMMARY') return 'AI_SUMMARY';
    
    if (daysInSystem > 7 && daysInSystem % 14 === 0) return 'VALUE';
    
    return null;
  }

  private static async generateEmail(
    emailType: EmailToSend['type'],
    profile: UserEngagementProfile,
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    switch (emailType) {
      case 'ONBOARDING_DAY_1':
        return this.getOnboardingDay1Email(profile, dict);
      case 'ONBOARDING_PHOTOS':
        return this.getOnboardingPhotosEmail(profile, dict);
      case 'ONBOARDING_AI_TEASER':
        return this.getOnboardingAiTeaserEmail(profile, dict);
      case 'ONBOARDING_QUESTIONNAIRE_WHY':
          return this.getOnboardingQuestionnaireWhyEmail(profile, dict);
      case 'ONBOARDING_VALUE_ADD':
          return this.getOnboardingValueAddEmail(profile, dict);
      case 'NUDGE':
        if (!profile.completionStatus.photos.isDone) {
          return this.getPhotoNudgeEmail(profile, dict);
        } else {
          return this.getQuestionnaireNudgeEmail(profile, dict);
        }
      case 'CELEBRATION':
        return this.getAlmostDoneEmail(profile, dict);
      case 'AI_SUMMARY':
        return this.getAiSummaryEmail(profile, dict);
      case 'VALUE':
        return this.getValueEmail(profile, dict);
      default:
        return null;
    }
  }

  // ========== Email Generators (New & Existing) ==========
  
  private static getOnboardingDay1Email(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.onboardingDay1;
    let mainMessage = emailDict.mainMessage;
    if (profile.completionStatus.overall > 50 && emailDict.fastUserMainMessage) {
        
        mainMessage = emailDict.fastUserMainMessage;
    }
    
    return {
      type: 'ONBOARDING_DAY_1',
      priority: 'HIGH',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: mainMessage,
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }
  
  private static getOnboardingPhotosEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    
    const emailDict = dict.engagement.onboardingPhotos;
    const missingCount = 3 - profile.completionStatus.photos.current;
    return {
      type: 'ONBOARDING_PHOTOS',
      priority: 'HIGH',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: populateTemplate(emailDict.mainMessage, { missingCount }),
        specificAction: emailDict.specificAction,
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getOnboardingAiTeaserEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    
    const emailDict = dict.engagement.onboardingAiTeaser;
    const aiInsightText = profile.aiInsights?.topStrengths[0] 
        
        ? populateTemplate(emailDict.aiInsight, { insight: profile.aiInsights.topStrengths[0] })
        
        : emailDict.genericInsight;

    return {
      type: 'ONBOARDING_AI_TEASER',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: `${emailDict.mainMessage} ${aiInsightText}`,
        specificAction: emailDict.specificAction,
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getOnboardingQuestionnaireWhyEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    
    const emailDict = dict.engagement.onboardingQuestionnaireWhy;
    return {
        type: 'ONBOARDING_QUESTIONNAIRE_WHY',
        priority: 'NORMAL',
        subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
        content: {
            hook: emailDict.hook,
            mainMessage: emailDict.mainMessage,
            specificAction: emailDict.specificAction,
            encouragement: emailDict.encouragement
        },
        sendInDays: 0
    };
  }

  private static getOnboardingValueAddEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    
    const emailDict = dict.engagement.onboardingValueAdd;
    const tipFromAI = profile.aiInsights?.topGaps[0] 
      
      ? populateTemplate(emailDict.aiTip, { tip: profile.aiInsights.topGaps[0] })
      
      : emailDict.genericTip;
    
    return {
        type: 'ONBOARDING_VALUE_ADD',
        priority: 'LOW',
        subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
        content: {
            hook: emailDict.hook,
            mainMessage: `${emailDict.mainMessage} ${tipFromAI}`,
            specificAction: emailDict.specificAction,
            encouragement: emailDict.encouragement
        },
        sendInDays: 0
    };
  }
  
  private static getPhotoNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.photoNudge;
    const missingCount = 3 - profile.completionStatus.photos.current;
    
    return {
      type: 'NUDGE',
      priority: 'HIGH',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: populateTemplate(emailDict.hook, { firstName: profile.firstName }),
        mainMessage: populateTemplate(emailDict.mainMessage, { missingCount }),
        specificAction: emailDict.specificAction,
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getQuestionnaireNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.questionnaireNudge;
    const { worldsStatus } = profile.completionStatus.questionnaire;
    
    const mostEmptyWorld = worldsStatus
        .filter(w => !w.isDone)
        .sort((a, b) => a.completed - b.completed)[0] || { world: '×›×œ×œ×™' };
    
    return {
      type: 'NUDGE',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: populateTemplate(emailDict.hook, { firstName: profile.firstName }),
        mainMessage: populateTemplate(emailDict.mainMessage, { worldName: mostEmptyWorld.world }),
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getAlmostDoneEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.almostDone;
    
    return {
      type: 'CELEBRATION',
      priority: 'HIGH',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: populateTemplate(emailDict.hook, { completion: profile.completionStatus.overall }),
        mainMessage: emailDict.mainMessage,
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static async getAiSummaryEmail(
    profile: UserEngagementProfile, 
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    const { aiInsights } = profile;
    const emailDict = dict.engagement.aiSummary;
    
    if (!aiInsights) {
      console.warn('âš ï¸ [AI Summary Email] No AI insights, using generic message');
      return {
        type: 'AI_SUMMARY',
        priority: 'NORMAL',
        subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
        content: {
          hook: emailDict.hook,
          mainMessage: emailDict.mainMessage,
          systemSummary: '×”×ª×—×œ× ×• ×œ× ×ª×— ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š. ×›×›×œ ×©×ª×•×¡×™×£ ×™×•×ª×¨ ××™×“×¢, × ×•×›×œ ×œ×¡×¤×§ ×ª×•×‘× ×•×ª ××“×•×™×§×•×ª ×™×•×ª×¨ ×¢×œ ××™ ×©××ª××™× ×œ×š.',
          specificAction: this.getNextBestAction(profile),
          encouragement: emailDict.encouragement
        },
        sendInDays: 0
      };
    }
    
    return {
      type: 'AI_SUMMARY',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: emailDict.mainMessage,
        systemSummary: aiInsights.personalitySummary,
        aiInsight: aiInsights.lookingForSummary,
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getValueEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const topics = dict.engagement.value;
    const topic = topics[Math.floor(Math.random() * topics.length)];
    
    return {
      type: 'VALUE',
      priority: 'LOW',
      subject: populateTemplate(topic.subject, { firstName: profile.firstName }),
      content: {
        hook: populateTemplate(topic.hook, { firstName: profile.firstName }),
        mainMessage: topic.mainMessage,
        encouragement: topic.encouragement
      },
      sendInDays: 0
    };
  }

  // ========== Helper Methods ==========
  
  private static getNextBestAction(profile: UserEngagementProfile): string {
    if (!profile.completionStatus.photos.isDone) {
      return `×”×¢×œ×” ${3 - profile.completionStatus.photos.current} ×ª××•× ×•×ª × ×•×¡×¤×•×ª`;
    }
    if (profile.completionStatus.personalDetails.missing.length > 0) {
      return `×”×©×œ× ××ª ×”×¤×¨×˜: ${profile.completionStatus.personalDetails.missing[0]}`;
    }
    if (profile.completionStatus.questionnaire.completionPercent < 100) {
      return '×”××©×š ×œ××œ× ××ª ×©××œ×•×Ÿ ×”×¢×•××§';
    }
    if (!profile.completionStatus.hasSeenPreview) {
      return '×¦×¤×” ×‘×ª×¦×•×’×” ×”××§×“×™××” ×©×œ ×”×¤×¨×•×¤×™×œ ×©×œ×š';
    }
    return '×”×¤×¨×•×¤×™×œ ×©×œ×š ×‘××¦×‘ ××¦×•×™×Ÿ! ×× ×• ××ª×—×™×œ×™× ×œ×—×¤×© ×¢×‘×•×¨×š.';
  }

  private static generateProgressBar(percentage: number): string {
    const filled = Math.floor(percentage / 10);
    const empty = 10 - filled;
    return 'â–ˆ'.repeat(filled) + 'â–‘'.repeat(empty) + ` ${percentage}%`;
  }

  private static async getActiveUsers() {
    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        engagementEmailsConsent: true, 
        isProfileComplete: false
      },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
  }

  private static async getTodaysActiveUsers() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        engagementEmailsConsent: true,
        OR: [
          { updatedAt: { gte: today } },
          { questionnaireResponses: { some: { lastSaved: { gte: today } } } }
        ]
      },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
  }

  private static async detectDailyActivity(userId: string): Promise<{
    hasActivity: boolean;
    completedToday: string[];
    progressDelta: number;
  }> {
    console.log('\n==============================================');
    console.log('ğŸ”¥ğŸ”¥ğŸ”¥ DETECT DAILY ACTIVITY - START ğŸ”¥ğŸ”¥ğŸ”¥');
    console.log(`ğŸ” User ID: ${userId}`);
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const recentUpdates = await prisma.profile.findUnique({
      where: { userId },
      select: {
        updatedAt: true,
        user: {
          select: {
            updatedAt: true,
            questionnaireResponses: {
              where: { lastSaved: { gte: today } },
              orderBy: { lastSaved: 'desc' },
              take: 1
            },
            images: {
              where: { createdAt: { gte: today } }
            }
          }
        }
      }
    });
    
    if (!recentUpdates) {
      console.log('âŒ ERROR: No profile found for this user!');
      return { hasActivity: false, completedToday: [], progressDelta: 0 };
    }
    
    const userUpdated = recentUpdates.user.updatedAt && recentUpdates.user.updatedAt >= today;
    const profileTableUpdated = recentUpdates.updatedAt && recentUpdates.updatedAt >= today;
    const profileUpdated = userUpdated || profileTableUpdated;
    
    const questionnaireUpdated = recentUpdates.user.questionnaireResponses.length > 0;
    const imagesUploaded = recentUpdates.user.images.length > 0;
    
    const hasActivity = profileUpdated || questionnaireUpdated || imagesUploaded;
    
    const completedToday: string[] = [];
    if (imagesUploaded) completedToday.push(`${recentUpdates.user.images.length} ×ª××•× ×•×ª ×—×“×©×•×ª`);
    if (questionnaireUpdated) completedToday.push('×”×ª×§×“××•×ª ×‘×©××œ×•×Ÿ');
    if (profileUpdated) completedToday.push('×¢×“×›×•×Ÿ ×¤×¨×•×¤×™×œ ××• × ×ª×•× ×™ ××©×ª××©');
    
    console.log('ğŸ”¥ğŸ”¥ğŸ”¥ DETECT DAILY ACTIVITY - END ğŸ”¥ğŸ”¥ğŸ”¥\n');
    
    return { 
      hasActivity, 
      completedToday, 
      progressDelta: 0 
    };
  }

  private static async getEveningFeedbackEmail(
    profile: UserEngagementProfile,
    dailyActivity: Awaited<ReturnType<typeof SmartEngagementOrchestrator.detectDailyActivity>>,
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    if (!dailyActivity.hasActivity) return null;
    
    const emailDict = dict.engagement.eveningFeedback;
    
    return {
      type: 'EVENING_FEEDBACK',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: emailDict.mainMessage,
        todayProgress: {
          itemsCompleted: dailyActivity.completedToday,
          newCompletion: dailyActivity.progressDelta
        },
        systemSummary: profile.aiInsights?.personalitySummary 
          ? populateTemplate(emailDict.systemSummary || '', { 
              summary: profile.aiInsights.personalitySummary.slice(0, 200) 
            })
          : undefined,
        aiInsight: profile.aiInsights?.topStrengths[0],
        specificAction: this.getNextBestAction(profile),
        progressVisualization: this.generateProgressBar(profile.completionStatus.overall),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getEstimatedTime(profile: UserEngagementProfile, locale: Language = 'he'): string {
    const { completionStatus } = profile;
    
    if (!completionStatus.photos.isDone) {
      const missingPhotos = 3 - completionStatus.photos.current;
      return locale === 'he' 
        ? `${missingPhotos * 2}-${missingPhotos * 3} ×“×§×•×ª` 
        : `${missingPhotos * 2}-${missingPhotos * 3} minutes`;
    }
    
    if (completionStatus.personalDetails.missing.length > 0) {
      return locale === 'he' ? '3-5 ×“×§×•×ª' : '3-5 minutes';
    }
    
    if (completionStatus.questionnaire.completionPercent < 100) {
      const remaining = 100 - completionStatus.questionnaire.completionPercent;
      if (remaining < 30) return locale === 'he' ? '5-8 ×“×§×•×ª' : '5-8 minutes';
      if (remaining < 60) return locale === 'he' ? '10-15 ×“×§×•×ª' : '10-15 minutes';
      return locale === 'he' ? '15-20 ×“×§×•×ª' : '15-20 minutes';
    }
    
    if (completionStatus.partnerPreferences.missing.length > 0) {
      return locale === 'he' ? '5-7 ×“×§×•×ª' : '5-7 minutes';
    }
    
    return locale === 'he' ? '×›××” ×“×§×•×ª' : 'a few minutes';
  }

  private static async sendEmail(user: User, email: EmailToSend) {
    const { emailService } = await import('./emailService');
    const locale = user.language || 'he';
    
    try {
      let success = false;
      
      let unsubscribeUrl = '';
      const secret = new TextEncoder().encode(process.env.NEXTAUTH_SECRET);
      if (secret) {
          const token = await new SignJWT({ userId: user.id, email: user.email })
              .setProtectedHeader({ alg: 'HS256' })
              .setIssuedAt()
              .setExpirationTime('90d')
              .sign(secret);
          
          const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000';
          unsubscribeUrl = `${baseUrl}/${locale}/unsubscribe?token=${token}`;
      }

      const profile = await this.buildUserEngagementProfile(user.id, false);
      const estimatedTime = this.getEstimatedTime(profile, locale as Language);
      const ctaLink = `${process.env.NEXT_PUBLIC_BASE_URL}/profile`;
      const ctaText = locale === 'he' ? '×œ×”××©×š ×‘× ×™×™×ª ×”×¤×¨×•×¤×™×œ' : 'Continue building profile';

      switch(email.type) {
        case 'AI_SUMMARY':
          success = await emailService.sendTemplateEmail({
            locale: locale as Language,
            to: user.email!,
            subject: email.subject,
            templateName: 'aiInsight',
            context: {
              firstName: user.firstName,
              personalitySummary: email.content.systemSummary,
              unsubscribeUrl,
            }
          });
          break;
          
        case 'EVENING_FEEDBACK':
          success = await emailService.sendTemplateEmail({
            locale: locale as Language,
            to: user.email!,
            subject: email.subject,
            templateName: 'evening_feedback',
            context: {
              firstName: user.firstName,
              progressPercentage: email.content.progressVisualization?.match(/\d+/)?.[0] || '0',
              todayCompletedItems: email.content.todayProgress?.itemsCompleted || [],
              systemSummary: email.content.systemSummary,
              aiInsight: email.content.aiInsight,
              nextAction: email.content.specificAction,
              estimatedTime: estimatedTime,
              ctaLink: ctaLink,
              ctaText: ctaText,
              unsubscribeUrl,
            }
          });
          break;

        case 'CELEBRATION':
          success = await emailService.sendTemplateEmail({
              locale: locale as Language,
              to: user.email!,
              subject: email.subject,
              templateName: 'almostDone',
              context: {
                  firstName: user.firstName,
                  progressPercentage: profile.completionStatus.overall,
                  remainingItem: email.content.specificAction,
                  estimatedTime: estimatedTime,
                  aiSummary: profile.aiInsights?.personalitySummary?.slice(0, 150) + '...',
                  ctaLink: ctaLink,
                  unsubscribeUrl,
              }
          });
          break;

        case 'NUDGE':
        case 'ONBOARDING_DAY_1':
        case 'ONBOARDING_PHOTOS':
        case 'ONBOARDING_AI_TEASER':
        case 'ONBOARDING_QUESTIONNAIRE_WHY':
        case 'ONBOARDING_VALUE_ADD':
        case 'VALUE':
        default:
          success = await emailService.sendCustomEmail(
            user.email!,
            email.subject,
            'generic',
            {
              firstName: user.firstName,
              headerTitle: email.content.hook,
              mainContent: email.content.mainMessage,
              encouragement: email.content.encouragement,
              specificAction: email.content.specificAction,
              estimatedTime: estimatedTime,
              ctaLink: ctaLink,
              ctaText: ctaText,
              unsubscribeUrl,
            },
            locale as Language
          );
          break;
      }
      
      if (success) {
        console.log(`ğŸ“§ Successfully sent ${email.type} email to ${user.email} in ${locale}`);
      }
    } catch (error) {
      console.error(`âŒ Error in sendEmail for user ${user.id}:`, error);
    }
  }

  private static async updateCampaignRecord(userId: string, emailType: string) {
    const updateData: Prisma.UserDripCampaignUpdateInput = {
      currentStep: { increment: 1 },
      lastSentType: emailType,
      updatedAt: new Date(),
      sentEmailTypes: { push: emailType }
    };
    
    if (emailType === 'EVENING_FEEDBACK') {
      updateData.lastEveningEmailSent = new Date();
      updateData.eveningEmailsCount = { increment: 1 };
    }
    
    if (emailType === 'AI_SUMMARY') {
      updateData.lastAiSummarySent = new Date();
      updateData.aiSummaryCount = { increment: 1 };
    }
    
    await prisma.userDripCampaign.upsert({
      where: { userId },
      update: updateData,
      create: {
        userId,
        currentStep: 1,
        lastSentType: emailType,
        nextSendDate: new Date(Date.now() + 1 * 24 * 60 * 60 * 1000),
        status: 'ACTIVE',
        sentEmailTypes: [emailType],
        ...(emailType === 'EVENING_FEEDBACK' && {
          lastEveningEmailSent: new Date(),
          eveningEmailsCount: 1
        }),
        ...(emailType === 'AI_SUMMARY' && {
          lastAiSummarySent: new Date(),
          aiSummaryCount: 1
        })
      }
    });
  }
}

export default SmartEngagementOrchestrator;
--- End of Content for SmartEngagementOrchestrator.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\emailService.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/emailService.ts

import nodemailer from 'nodemailer';
import Handlebars from 'handlebars';
import fs from 'fs';
import path from 'path';

/**
 * ğŸ“§ ×©×™×¨×•×ª ××™×™×œ×™× ××©×•×¤×¨ ×¢× ×ª××™×›×” ×‘×ª×‘× ×™×•×ª Handlebars ×•×ª××™×›×” ×“×•-×œ×©×•× ×™×ª
 */

// âœ… ×¨×™×©×•× Handlebars Helpers
Handlebars.registerHelper('eq', function(a, b) {
  return a === b;
});

Handlebars.registerHelper('getDir', function(locale: string) {
  return locale === 'he' ? 'rtl' : 'ltr';
});

interface EmailData {
  to: string;
  subject: string;
  templateName: string;
  context: Record<string, any>;
  locale?: 'he' | 'en';
}

class EmailService {
  private transporter: nodemailer.Transporter;
  private templatesCache: Map<string, HandlebarsTemplateDelegate> = new Map();

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });

    this.transporter.verify((error) => {
      if (error) {
        console.error('âŒ Email service initialization failed:', error);
      } else {
        console.log('âœ… Email service ready');
      }
    });
  }

  private loadTemplate(templateName: string): HandlebarsTemplateDelegate {
    if (this.templatesCache.has(templateName)) {
      return this.templatesCache.get(templateName)!;
    }

    const templatePath = path.join(
      process.cwd(),
      'src',
      'lib',
      'engagement',
      'templates',
      'email',
      `${templateName}.hbs`
    );

    if (!fs.existsSync(templatePath)) {
      throw new Error(`Template not found: ${templateName} at ${templatePath}`);
    }

    const source = fs.readFileSync(templatePath, 'utf-8');
    const template = Handlebars.compile(source);
    this.templatesCache.set(templateName, template);
    return template;
  }

  async sendTemplateEmail(data: EmailData): Promise<boolean> {
    try {
      const enhancedContext = {
        ...data.context,
        baseUrl: process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000',
        currentYear: new Date().getFullYear(),
        locale: data.locale || 'he',
      };

      const template = this.loadTemplate(data.templateName);
      const htmlContent = template(enhancedContext);

      const info = await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: data.to,
        subject: data.subject,
        html: htmlContent,
      });

      console.log(`âœ… Email sent to ${data.to} | Template: ${data.templateName} | Lang: ${enhancedContext.locale} | ID: ${info.messageId}`);
      return true;

    } catch (error) {
      console.error(`âŒ Failed to send email to ${data.to}:`, error);
      return false;
    }
  }

  async sendOnboardingDay1(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    completionData: {
      progressPercentage: number;
      completedItems: string[];
      missingItemsCount: number;
      nextAction: string;
      aiInsight?: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech! ğŸ‰` 
        : `Welcome to NeshamaTech, ${user.firstName}! ğŸ‰`,
      templateName: 'onboardingDay1',
      context: {
        firstName: user.firstName,
        ...user.completionData,
      },
      locale: user.locale,
    });
  }

  async sendProgressUpdate(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    progressData: {
      progressPercentage: number;
      aiLearning: string;
      photosCount: number;
      photosComplete: boolean;
      photosPercent: number;
      personalComplete: boolean;
      personalMissingCount: number;
      personalPercent: number;
      questionnaireComplete: boolean;
      questionnairePercent: number;
      preferencesComplete: boolean;
      preferencesMissingCount: number;
      preferencesPercent: number;
      nextAction: string;
      estimatedTime: string;
      nextMilestone: number;
      aiPersonalInsight?: string;
      ctaLink: string;
      ctaText: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ××™×š ××ª×§×“××™×? ğŸ“Š` 
        : `How's it going, ${user.firstName}? ğŸ“Š`,
      templateName: 'progressUpdate',
      context: {
        firstName: user.firstName,
        ...user.progressData,
      },
      locale: user.locale,
    });
  }

  async sendAlmostDone(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    celebrationData: {
      progressPercentage: number;
      remainingItem: string;
      estimatedTime: string;
      aiSummary?: string;
      ctaLink: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ××ª/×” ×›××¢×˜ ×©×! ğŸŠ` 
        : `You're almost there, ${user.firstName}! ğŸŠ`,
      templateName: 'almostDone',
      context: {
        firstName: user.firstName,
        ...user.celebrationData,
      },
      locale: user.locale,
    });
  }

  async sendCustomEmail(
    to: string,
    subject: string,
    templateName: string,
    context: Record<string, any>,
    locale: 'he' | 'en' = 'he'
  ): Promise<boolean> {
    return this.sendTemplateEmail({
      to,
      subject,
      templateName,
      context,
      locale,
    });
  }

  clearTemplateCache(): void {
    this.templatesCache.clear();
    console.log('ğŸ“¦ Template cache cleared');
  }
}

export const emailService = new EmailService();
export default emailService;
--- End of Content for emailService.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\engagement_contents.txt
--------------------------------------------------------------------------------
[This is the output log file itself. Content not included.]

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\email.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/email.adapter.ts
import nodemailer from 'nodemailer';

export interface RecipientInfo {
  email: string;
  phone?: string | null;
  name: string;
}

export interface NotificationContent {
  subject: string;
  body: string; // For text-based channels like SMS or simple emails
  htmlBody?: string; // For rich HTML emails
}

export class EmailAdapter {
  private transporter: nodemailer.Transporter;

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!recipient.email;
  }

  public async send(recipient: RecipientInfo, content: NotificationContent): Promise<boolean> {
    if (!this.canSend(recipient)) return false;

    try {
      await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: recipient.email,
        subject: content.subject,
        html: content.htmlBody || `<p>${content.body.replace(/\n/g, '<br>')}</p>`,
      });
      console.log(`[EmailAdapter] Email sent to ${recipient.email}`);
      return true;
    } catch (error) {
      console.error(`[EmailAdapter] Failed to send email to ${recipient.email}:`, error);
      return false;
    }
  }
}
--- End of Content for email.adapter.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\whatsapp.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/whatsapp.adapter.ts
import twilio from 'twilio';
import { RecipientInfo } from './email.adapter';

export class WhatsAppAdapter {
  private client: twilio.Twilio | null;
  private fromNumber: string;

  constructor() {
    this.fromNumber = process.env.TWILIO_WHATSAPP_NUMBER || '';
    if (process.env.TWILIO_ACCOUNT_SID && process.env.TWILIO_AUTH_TOKEN) {
      this.client = twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN);
    } else {
      this.client = null;
      console.warn('[WhatsAppAdapter] Twilio is not configured.');
    }
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!(this.client && recipient.phone && recipient.phone.startsWith('+'));
  }

  public async send(recipient: RecipientInfo, templateSid: string, contentVariables: Record<string, string>): Promise<boolean> {
    if (!this.canSend(recipient) || !recipient.phone) return false;

    try {
      await this.client!.messages.create({
        contentSid: templateSid,
        contentVariables: JSON.stringify(contentVariables),
        from: `whatsapp:${this.fromNumber}`,
        to: `whatsapp:${recipient.phone}`,
      });
      console.log(`[WhatsAppAdapter] Message sent to ${recipient.phone}`);
      return true;
    } catch (error: any) {
      console.error(`[WhatsAppAdapter] Failed to send message to ${recipient.phone}:`, error.message);
      return false;
    }
  }
}
--- End of Content for whatsapp.adapter.ts ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates
================================================================================

(This directory contains subdirectories but no files directly. See subdirectories below.)

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\aiInsight.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×’×™×œ×™× ×• ××©×”×• ××¢× ×™×™×Ÿ ×¢×œ×™×š{{else}}We've discovered something interesting about you{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 30px;
            font-weight: 800;
            line-height: 1.4;
            text-shadow: 0 2px 15px rgba(0,0,0,0.15);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .ai-analysis-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 20px;
            padding: 32px;
            margin: 28px 0;
            border: 2px solid rgba(139, 92, 246, 0.2);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.1);
        }
        
        .ai-analysis-header {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
        }
        
        .ai-analysis-icon {
            font-size: 36px;
            {{#if (eq locale 'he')}}margin-left{{else}}margin-right{{/if}}: 15px;
        }
        
        .ai-analysis-box h2 {
            color: transparent;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            margin: 0;
            font-size: 22px;
            font-weight: 800;
        }
        
        .ai-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
        }
        
        .ai-content p {
            color: #1e293b;
            margin: 0;
            font-size: 17px;
            line-height: 1.8;
            white-space: pre-wrap;
            font-weight: 500;
            text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};
        }
        
        .why-important {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .why-important h3 {
            color: #2d3748;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .why-important p {
            color: #4a5568;
            margin: 0 0 12px 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .why-important p:last-child {
            margin-bottom: 0;
        }
        
        .why-important strong {
            color: #1e293b;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }

        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 30px 20px;
            text-align: center;
        }

        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }

    </style>
</head>
<body dir="{{getDir locale}}">
    <table role="presentation" style="width: 100%; border-collapse: collapse; direction: {{getDir locale}};">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ§ âœ¨</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×™×© ×œ× ×• ×ª×•×‘× ×•×ª ××¨×ª×§×•×ª ×¢×œ×™×š!
                                {{else}}
                                    {{firstName}}, We Have Fascinating Insights About You!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ××¢×¨×›×ª ×”-AI ×©×œ× ×• × ×™×ª×—×” ××ª ×”×©××œ×•×Ÿ ×©×œ×š
                                {{else}}
                                    Our AI system has analyzed your questionnaire
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×ª×•×“×” ×©×”×©×§×¢×ª ×–××Ÿ ×œ××œ× ××ª ×”×©××œ×•×Ÿ ×©×œ× ×•! ×”×ª×©×•×‘×•×ª ×©×œ×š ×¢×–×¨×• ×œ××¢×¨×›×ª ×”-AI ×”××ª×§×“××ª ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×˜×•×‘ ×™×•×ª×¨. ×”× ×” ××” ×©×’×™×œ×™× ×•:
                                {{else}}
                                    Thank you for taking the time to fill out our questionnaire! Your answers have helped our advanced AI system understand you better. Here's what we discovered:
                                {{/if}}
                            </p>

                            <!-- AI Analysis Box -->
                            <div class="ai-analysis-box">
                                <div class="ai-analysis-header">
                                    <span class="ai-analysis-icon">ğŸ¯</span>
                                    <h2>
                                        {{#if (eq locale 'he')}}×”×ª×•×‘× ×•×ª ×©×œ× ×• ×¢×œ×™×š:{{else}}Our Insights About You:{{/if}}
                                    </h2>
                                </div>
                                <div class="ai-content">
                                    <p>{{personalitySummary}}</p>
                                </div>
                            </div>

                            <div class="why-important">
                                <h3>
                                    ğŸŒŸ {{#if (eq locale 'he')}}×œ××” ×–×” ×—×©×•×‘?{{else}}Why is this important?{{/if}}
                                </h3>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×”×ª×××” ××“×•×™×§×ª ×™×•×ª×¨:{{else}}More Accurate Matches:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×”×©×“×›× ×™× ×©×œ× ×• ××©×ª××©×™× ×‘×ª×•×‘× ×•×ª ×”××œ×” ×›×“×™ ×œ××¦×•× ×œ×š ×”×ª×××•×ª ×©××ª××™××•×ª ×‘×××ª ×œ××™ ×©××ª/×”.
                                    {{else}}
                                        Our matchmakers use these insights to find matches that truly fit who you are.
                                    {{/if}}
                                </p>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×”×‘× ×” ××¢××™×§×”:{{else}}Deeper Understanding:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×× ×—× ×• ×œ× ×¨×§ ××¡×ª×›×œ×™× ×¢×œ "×’×•×‘×”" ×•×¢×™×¡×•×§ - ×× ×—× ×• ××‘×™× ×™× ××ª ×”×¢×¨×›×™×, ×”××™×©×™×•×ª ×•×”×—×œ×•××•×ª ×©×œ×š.
                                    {{else}}
                                        We don't just look at "height" and "occupation" - we understand your values, personality, and dreams.
                                    {{/if}}
                                </p>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×©×™×—×•×ª ×˜×•×‘×•×ª ×™×•×ª×¨:{{else}}Better Conversations:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×”×”×ª×××•×ª ×©×œ×š ×™×›×™×¨×• ××•×ª×š ×˜×•×‘ ×™×•×ª×¨ ×›×‘×¨ ××”×”×ª×—×œ×”.
                                    {{else}}
                                        Your matches will get to know you better right from the start.
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ ×”××œ× ×©×œ×™ ğŸ¯{{else}}View My Full Profile ğŸ¯{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                <strong>{{#if (eq locale 'he')}}×©××œ×•×ª ××• ×¨×•×¦×” ×œ×“×‘×¨ ×¢× ×©×“×›×Ÿ?{{else}}Questions or want to talk to a matchmaker?{{/if}}</strong><br>
                                {{#if (eq locale 'he')}}
                                    ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×!
                                {{else}}
                                    Just reply to this email and we'll get back to you soon!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                             <p class="footer-copyright">
                                Â© {{currentYear}} NeshamaTech. 
                                {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                            </p>
                            <p class="footer-legal">
                                <a href="{{baseUrl}}/privacy">
                                    {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                </a> | 
                                <a href="{{baseUrl}}/terms">
                                    {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                </a> |
                                <a href="{{unsubscribeUrl}}">
                                    {{#if (eq locale 'he')}}×”×¡×¨×” ××”×¨×©×™××”{{else}}Unsubscribe{{/if}}
                                </a>
                            </p>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for aiInsight.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\almostDone.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}××ª/×” ×›××¢×˜ ×©×!{{else}}You're almost there!{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #f59e0b 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 15px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-reminder {
            background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%);
            border-radius: 16px;
            padding: 28px;
            margin: 25px 0;
            border: 2px solid #3b82f6;
        }
        
        .progress-reminder h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }
        
        .progress-circle {
            text-align: center;
            margin: 20px 0;
        }
        
        .circle {
            display: inline-block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            position: relative;
        }
        
        .circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .circle-percentage {
            font-size: 42px;
            font-weight: 900;
            line-height: 1;
        }
        
        .circle-label {
            font-size: 13px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .progress-text {
            color: #1e40af;
            margin: 15px 0 0 0;
            font-size: 15px;
            text-align: center;
            line-height: 1.6;
        }
        
        .ai-summary-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border: 2px solid #a78bfa;
        }
        
        .ai-summary-box h3 {
            color: #5b21b6;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .ai-summary-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
        }
        
        .ai-summary-content p {
            color: #4c1d95;
            margin: 0;
            font-size: 15px;
            line-height: 1.7;
            font-style: italic;
        }
        
        .last-step-box {
            background: linear-gradient(to left, #fef3c7, #fed7aa);
            border-radius: 16px;
            padding: 4px;
            margin: 30px 0;
        }
        
        .last-step-inner {
            background: white;
            border-radius: 12px;
            padding: 24px;
        }
        
        .last-step-inner h3 {
            color: #92400e;
            margin: 0 0 15px 0;
            font-size: 19px;
            font-weight: 700;
            text-align: center;
        }
        
        .last-step-inner p {
            color: #78350f;
            margin: 0;
            font-size: 17px;
            line-height: 1.6;
            text-align: center;
            font-weight: 500;
        }
        
        .time-estimate {
            color: #a16207;
            margin: 15px 0 0 0;
            font-size: 14px;
            text-align: center;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 18px;
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 16px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸŠ</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ××ª/×” ×›××¢×˜ ×©×!
                                {{else}}
                                    {{firstName}}, You're Almost There!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×¨×§ ×¢×•×“ ×“×—×™×¤×” ×§×˜× ×” ×œ×¡×™×•×
                                {{else}}
                                    Just one last push to the finish line
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×ª×§×“××•×ª! ×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-<strong>{{progressPercentage}}%</strong>. × ×©××¨ ×œ×š ×¨×§ ×¢×•×“ ×¦×¢×“ ××—×“ ×§×˜×Ÿ ×›×“×™ ×œ×”×©×œ×™× ××•×ª×• ×•×œ×”×’×“×™×œ ××©××¢×•×ª×™×ª ××ª ×”×¡×™×›×•×™×™× ×©×œ×š ×œ××¦×•× ×”×ª×××”.
                                {{else}}
                                    Great job on your progress! Your profile is already at <strong>{{progressPercentage}}%</strong>. You have just one small step left to complete it and significantly increase your chances of finding a match.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div class="progress-reminder">
                                <h3>
                                    ğŸ¯ {{#if (eq locale 'he')}}×”×™×¢×“ ×”×¡×•×¤×™{{else}}The Final Goal{{/if}}
                                </h3>
                                <div class="progress-circle">
                                    <div class="circle">
                                        <div class="circle-inner">
                                            <div class="circle-percentage">{{progressPercentage}}%</div>
                                            <div class="circle-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Completed{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                                <p class="progress-text">
                                    {{#if (eq locale 'he')}}××ª/×” ×›×œ ×›×š ×§×¨×•×‘/×” ×œ-100%!{{else}}You're so close to 100%!{{/if}}
                                </p>
                            </div>

                            {{#if aiSummary}}
                            <!-- AI Summary -->
                            <div class="ai-summary-box">
                                <h3>
                                    ğŸ§  {{#if (eq locale 'he')}}××” ×”-AI ×©×œ× ×• ×—×•×©×‘ ×¢×“ ×›×”{{else}}What Our AI Thinks So Far{{/if}}
                                </h3>
                                <div class="ai-summary-content">
                                    <p>"{{aiSummary}}"</p>
                                </div>
                            </div>
                            {{/if}}

                            <!-- Next Step -->
                            <div class="last-step-box">
                                <div class="last-step-inner">
                                    <h3>
                                        ğŸ¯ {{#if (eq locale 'he')}}×”×“×‘×¨ ×”××—×¨×•×Ÿ ×©× ×©××¨{{else}}Your Last Step{{/if}}
                                    </h3>
                                    <p>{{remainingItem}}</p>
                                    <p class="time-estimate">
                                        {{#if (eq locale 'he')}}
                                            ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - ×××© ×¢×•×“ ×¨×’×¢!
                                        {{else}}
                                            This will take about {{estimatedTime}} - you're almost done!
                                        {{/if}}
                                    </p>
                                </div>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">
                                    {{#if (eq locale 'he')}}×‘×•×/×™ × ×¡×™×™× ××ª ×–×”! ğŸ’ª{{else}}Let's Finish This! ğŸ’ª{{/if}}
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for almostDone.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\email_contents.txt
--------------------------------------------------------------------------------
Content:
################################################################################
# Directory Content Map For: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email
# Generated on: 2025-10-26 12:47:23
################################################################################

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\aiInsight.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×’×™×œ×™× ×• ××©×”×• ××¢× ×™×™×Ÿ ×¢×œ×™×š{{else}}We've discovered something interesting about you{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 30px;
            font-weight: 800;
            line-height: 1.4;
            text-shadow: 0 2px 15px rgba(0,0,0,0.15);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .ai-analysis-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 20px;
            padding: 32px;
            margin: 28px 0;
            border: 2px solid rgba(139, 92, 246, 0.2);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.1);
        }
        
        .ai-analysis-header {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
        }
        
        .ai-analysis-icon {
            font-size: 36px;
            {{#if (eq locale 'he')}}margin-left{{else}}margin-right{{/if}}: 15px;
        }
        
        .ai-analysis-box h2 {
            color: transparent;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            margin: 0;
            font-size: 22px;
            font-weight: 800;
        }
        
        .ai-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
        }
        
        .ai-content p {
            color: #1e293b;
            margin: 0;
            font-size: 17px;
            line-height: 1.8;
            white-space: pre-wrap;
            font-weight: 500;
            text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};
        }
        
        .why-important {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .why-important h3 {
            color: #2d3748;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .why-important p {
            color: #4a5568;
            margin: 0 0 12px 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .why-important p:last-child {
            margin-bottom: 0;
        }
        
        .why-important strong {
            color: #1e293b;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        
        .help-text strong {
            color: #2d3748;
        }
        
        /* ×©××¨ ×”-CSS... */
    </style>
</head>
<body dir="{{getDir locale}}">
    <table role="presentation" style="width: 100%; border-collapse: collapse; direction: {{getDir locale}};">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ§ âœ¨</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×™×© ×œ× ×• ×ª×•×‘× ×•×ª ××¨×ª×§×•×ª ×¢×œ×™×š!
                                {{else}}
                                    {{firstName}}, We Have Fascinating Insights About You!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ××¢×¨×›×ª ×”-AI ×©×œ× ×• × ×™×ª×—×” ××ª ×”×©××œ×•×Ÿ ×©×œ×š
                                {{else}}
                                    Our AI system has analyzed your questionnaire
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×ª×•×“×” ×©×”×©×§×¢×ª ×–××Ÿ ×œ××œ× ××ª ×”×©××œ×•×Ÿ ×©×œ× ×•! ×”×ª×©×•×‘×•×ª ×©×œ×š ×¢×–×¨×• ×œ××¢×¨×›×ª ×”-AI ×”××ª×§×“××ª ×©×œ× ×• ×œ×”×‘×™×Ÿ ××•×ª×š ×˜×•×‘ ×™×•×ª×¨. ×”× ×” ××” ×©×’×™×œ×™× ×•:
                                {{else}}
                                    Thank you for taking the time to fill out our questionnaire! Your answers have helped our advanced AI system understand you better. Here's what we discovered:
                                {{/if}}
                            </p>

                            <!-- AI Analysis Box -->
                            <div class="ai-analysis-box">
                                <div class="ai-analysis-header">
                                    <span class="ai-analysis-icon">ğŸ¯</span>
                                    <h2>
                                        {{#if (eq locale 'he')}}×”×ª×•×‘× ×•×ª ×©×œ× ×• ×¢×œ×™×š:{{else}}Our Insights About You:{{/if}}
                                    </h2>
                                </div>
                                <div class="ai-content">
                                    <p>{{personalitySummary}}</p>
                                </div>
                            </div>

                            <div class="why-important">
                                <h3>
                                    ğŸŒŸ {{#if (eq locale 'he')}}×œ××” ×–×” ×—×©×•×‘?{{else}}Why is this important?{{/if}}
                                </h3>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×”×ª×××” ××“×•×™×§×ª ×™×•×ª×¨:{{else}}More Accurate Matches:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×”×©×“×›× ×™× ×©×œ× ×• ××©×ª××©×™× ×‘×ª×•×‘× ×•×ª ×”××œ×” ×›×“×™ ×œ××¦×•× ×œ×š ×”×ª×××•×ª ×©××ª××™××•×ª ×‘×××ª ×œ××™ ×©××ª/×”.
                                    {{else}}
                                        Our matchmakers use these insights to find matches that truly fit who you are.
                                    {{/if}}
                                </p>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×”×‘× ×” ××¢××™×§×”:{{else}}Deeper Understanding:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×× ×—× ×• ×œ× ×¨×§ ××¡×ª×›×œ×™× ×¢×œ "×’×•×‘×”" ×•×¢×™×¡×•×§ - ×× ×—× ×• ××‘×™× ×™× ××ª ×”×¢×¨×›×™×, ×”××™×©×™×•×ª ×•×”×—×œ×•××•×ª ×©×œ×š.
                                    {{else}}
                                        We don't just look at "height" and "occupation" - we understand your values, personality, and dreams.
                                    {{/if}}
                                </p>
                                <p>
                                    <strong>âœ“ {{#if (eq locale 'he')}}×©×™×—×•×ª ×˜×•×‘×•×ª ×™×•×ª×¨:{{else}}Better Conversations:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×”×”×ª×××•×ª ×©×œ×š ×™×›×™×¨×• ××•×ª×š ×˜×•×‘ ×™×•×ª×¨ ×›×‘×¨ ××”×”×ª×—×œ×”.
                                    {{else}}
                                        Your matches will get to know you better right from the start.
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ ×”××œ× ×©×œ×™ ğŸ¯{{else}}View My Full Profile ğŸ¯{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                <strong>{{#if (eq locale 'he')}}×©××œ×•×ª ××• ×¨×•×¦×” ×œ×“×‘×¨ ×¢× ×©×“×›×Ÿ?{{else}}Questions or want to talk to a matchmaker?{{/if}}</strong><br>
                                {{#if (eq locale 'he')}}
                                    ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×!
                                {{else}}
                                    Just reply to this email and we'll get back to you soon!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <!-- ×ª×•×›×Ÿ ×”×¤×•×˜×¨... -->
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for aiInsight.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\almostDone.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}××ª/×” ×›××¢×˜ ×©×!{{else}}You're almost there!{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #f59e0b 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 15px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-reminder {
            background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%);
            border-radius: 16px;
            padding: 28px;
            margin: 25px 0;
            border: 2px solid #3b82f6;
        }
        
        .progress-reminder h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }
        
        .progress-circle {
            text-align: center;
            margin: 20px 0;
        }
        
        .circle {
            display: inline-block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            position: relative;
        }
        
        .circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .circle-percentage {
            font-size: 42px;
            font-weight: 900;
            line-height: 1;
        }
        
        .circle-label {
            font-size: 13px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .progress-text {
            color: #1e40af;
            margin: 15px 0 0 0;
            font-size: 15px;
            text-align: center;
            line-height: 1.6;
        }
        
        .ai-summary-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border: 2px solid #a78bfa;
        }
        
        .ai-summary-box h3 {
            color: #5b21b6;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .ai-summary-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
        }
        
        .ai-summary-content p {
            color: #4c1d95;
            margin: 0;
            font-size: 15px;
            line-height: 1.7;
            font-style: italic;
        }
        
        .last-step-box {
            background: linear-gradient(to left, #fef3c7, #fed7aa);
            border-radius: 16px;
            padding: 4px;
            margin: 30px 0;
        }
        
        .last-step-inner {
            background: white;
            border-radius: 12px;
            padding: 24px;
        }
        
        .last-step-inner h3 {
            color: #92400e;
            margin: 0 0 15px 0;
            font-size: 19px;
            font-weight: 700;
            text-align: center;
        }
        
        .last-step-inner p {
            color: #78350f;
            margin: 0;
            font-size: 17px;
            line-height: 1.6;
            text-align: center;
            font-weight: 500;
        }
        
        .time-estimate {
            color: #a16207;
            margin: 15px 0 0 0;
            font-size: 14px;
            text-align: center;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 18px;
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 16px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸŠ</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ××ª/×” ×›××¢×˜ ×©×!
                                {{else}}
                                    {{firstName}}, You're Almost There!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×¨×§ ×¢×•×“ ×“×—×™×¤×” ×§×˜× ×” ×œ×¡×™×•×
                                {{else}}
                                    Just one last push to the finish line
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×ª×§×“××•×ª! ×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-<strong>{{progressPercentage}}%</strong>. × ×©××¨ ×œ×š ×¨×§ ×¢×•×“ ×¦×¢×“ ××—×“ ×§×˜×Ÿ ×›×“×™ ×œ×”×©×œ×™× ××•×ª×• ×•×œ×”×’×“×™×œ ××©××¢×•×ª×™×ª ××ª ×”×¡×™×›×•×™×™× ×©×œ×š ×œ××¦×•× ×”×ª×××”.
                                {{else}}
                                    Great job on your progress! Your profile is already at <strong>{{progressPercentage}}%</strong>. You have just one small step left to complete it and significantly increase your chances of finding a match.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div class="progress-reminder">
                                <h3>
                                    ğŸ¯ {{#if (eq locale 'he')}}×”×™×¢×“ ×”×¡×•×¤×™{{else}}The Final Goal{{/if}}
                                </h3>
                                <div class="progress-circle">
                                    <div class="circle">
                                        <div class="circle-inner">
                                            <div class="circle-percentage">{{progressPercentage}}%</div>
                                            <div class="circle-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Completed{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                                <p class="progress-text">
                                    {{#if (eq locale 'he')}}××ª/×” ×›×œ ×›×š ×§×¨×•×‘/×” ×œ-100%!{{else}}You're so close to 100%!{{/if}}
                                </p>
                            </div>

                            {{#if aiSummary}}
                            <!-- AI Summary -->
                            <div class="ai-summary-box">
                                <h3>
                                    ğŸ§  {{#if (eq locale 'he')}}××” ×”-AI ×©×œ× ×• ×—×•×©×‘ ×¢×“ ×›×”{{else}}What Our AI Thinks So Far{{/if}}
                                </h3>
                                <div class="ai-summary-content">
                                    <p>"{{aiSummary}}"</p>
                                </div>
                            </div>
                            {{/if}}

                            <!-- Next Step -->
                            <div class="last-step-box">
                                <div class="last-step-inner">
                                    <h3>
                                        ğŸ¯ {{#if (eq locale 'he')}}×”×“×‘×¨ ×”××—×¨×•×Ÿ ×©× ×©××¨{{else}}Your Last Step{{/if}}
                                    </h3>
                                    <p>{{remainingItem}}</p>
                                    <p class="time-estimate">
                                        {{#if (eq locale 'he')}}
                                            ×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - ×××© ×¢×•×“ ×¨×’×¢!
                                        {{else}}
                                            This will take about {{estimatedTime}} - you're almost done!
                                        {{/if}}
                                    </p>
                                </div>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">
                                    {{#if (eq locale 'he')}}×‘×•×/×™ × ×¡×™×™× ××ª ×–×”! ğŸ’ª{{else}}Let's Finish This! ğŸ’ª{{/if}}
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for almostDone.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\email_contents.txt
--------------------------------------------------------------------------------
[This is the output log file itself. Content not included.]

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\evening_feedback.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×”×ª×§×“××•×ª ××¦×•×™× ×ª, {{firstName}}!{{else}}Excellent progress, {{firstName}}!{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 50px 30px;
            text-align: center;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 15px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .today-actions {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .today-actions h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 700;
        }
        
        .today-actions ul {
            color: #1e40af;
            margin: 0;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px;
            line-height: 1.8;
        }
        
        .today-actions li {
            margin-bottom: 8px;
        }
        
        .ai-insight-box {
            background: #f0fdfa;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #06b6d4;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .ai-insight-box h3 {
            color: #0f766e;
            margin: 0 0 12px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .ai-insight-box p {
            color: #115e59;
            margin: 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .ai-disclaimer {
            font-size: 13px;
            color: #134e4a;
            margin-top: 12px;
            font-style: italic;
        }
        
        .progress-section {
            margin: 30px 0;
        }
        
        .progress-label {
            text-align: center;
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .progress-label strong {
            color: #1e293b;
        }
        
        .progress-bar-container {
            background: #e2e8f0;
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
        }
        
        .next-step-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 12px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .next-step-box h3 {
            color: #92400e;
            margin: 0 0 12px 0;
            font-size: 19px;
            font-weight: 700;
        }
        
        .next-step-box p {
            color: #78350f;
            margin: 0;
            font-size: 17px;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .time-estimate {
            color: #92400e;
            margin: 15px 0 0 0;
            font-size: 14px;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 18px;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }
        
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 16px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">âœ¨</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×›×œ ×”×›×‘×•×“ ×¢×œ ×”×”×©×§×¢×”, {{firstName}}!
                                {{else}}
                                    Great work today, {{firstName}}!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×©×× ×• ×œ×‘ ×œ×”×ª×§×“××•×ª ×©×œ×š ×”×™×•×
                                {{else}}
                                    We noticed your progress today
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×¨×¦×™× ×• ×œ×¢×¦×•×¨ ×œ×¨×’×¢ ×•×œ×•××¨ ×ª×•×“×” ×¢×œ ×”×–××Ÿ ×•×”××—×©×‘×” ×©×”×©×§×¢×ª ×”×™×•× ×‘×¤×¨×•×¤×™×œ ×©×œ×š. ×›×œ ×¤×¨×˜ ×©××ª×” ××•×¡×™×£ ×œ× ×¨×§ ××§×“× ××•×ª×š, ××œ× ×’× ×¢×•×–×¨ ×œ××¢×¨×›×ª ×©×œ× ×• ×œ×œ××•×“ ××•×ª×š ×œ×¢×•××§ ×•×œ×—×¤×© ×¢×‘×•×¨×š ×‘×¦×•×¨×” ××“×•×™×§×ª ×™×•×ª×¨.
                                {{else}}
                                    We wanted to take a moment to thank you for the time and thought you invested in your profile today. Every detail you add not only moves you forward but also helps our system learn more about you and search more accurately on your behalf.
                                {{/if}}
                            </p>

                            <!-- What was done today -->
                            <div class="today-actions">
                                <h3>
                                    âœ… {{#if (eq locale 'he')}}×”×¤×¢×•×œ×•×ª ×©×œ×š ×”×™×•×{{else}}Your Actions Today{{/if}}
                                </h3>
                                <ul>
                                    {{#each todayCompletedItems}}
                                    <li>{{this}}</li>
                                    {{/each}}
                                </ul>
                            </div>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div class="ai-insight-box">
                                <h3>
                                    ğŸ’¡ {{#if (eq locale 'he')}}×ª×•×‘× ×” ×¨××©×•× ×™×ª ××”××¢×¨×›×ª{{else}}An Initial Insight From Our System{{/if}}
                                </h3>
                                <p>"{{aiInsight}}"</p>
                                <p class="ai-disclaimer">
                                    {{#if (eq locale 'he')}}
                                        ×–×•×”×™ ×¨×§ ×˜×¢×™××” ××”×ª××•× ×” ×©×”××¢×¨×›×ª ××¨×›×™×‘×”. ×›×›×œ ×©×”×¤×¨×•×¤×™×œ ×™×”×™×” ××œ× ×™×•×ª×¨, ×›×š ×”×ª×•×‘× ×•×ª ×™×”×™×• ×¢××•×§×•×ª ×•××“×•×™×§×•×ª ×™×•×ª×¨.
                                    {{else}}
                                        This is just a glimpse of the picture our system is building. The more complete your profile becomes, the deeper and more accurate the insights will be.
                                    {{/if}}
                                </p>
                            </div>
                            {{/if}}
                            
                            <!-- Overall Progress Bar -->
                            <div class="progress-section">
                                 <p class="progress-label">
                                    {{#if (eq locale 'he')}}
                                        ×”×”×ª×§×“××•×ª ×”×›×•×œ×œ×ª ×©×œ×š: <strong>{{progressPercentage}}%</strong>
                                    {{else}}
                                        Your overall progress: <strong>{{progressPercentage}}%</strong>
                                    {{/if}}
                                </p>
                                <div class="progress-bar-container">
                                    <div class="progress-bar" style="width: {{progressPercentage}}%;"></div>
                                </div>
                            </div>

                            <!-- Next Step -->
                            <div class="next-step-box">
                                <h3>
                                    {{#if (eq locale 'he')}}ğŸ¯ ×”×¦×¢×“ ×”×‘× ×‘××¡×¢{{else}}ğŸ¯ The Next Step on Your Journey{{/if}}
                                </h3>
                                <p>{{nextAction}}</p>
                                <p class="time-estimate">
                                    {{#if (eq locale 'he')}}
                                        ×–××Ÿ ××•×¢×¨×š: {{estimatedTime}}
                                    {{else}}
                                        Estimated time: {{estimatedTime}}
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">
                                    {{ctaText}} ğŸ’ª
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×× ×—× ×• ×××©×™×›×™× ×œ×¢×‘×•×“ ×‘×©×‘×™×œ×š!{{else}}We're continuing to work for you!{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for evening_feedback.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\generic.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{subject}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333333;
            background-color: #f5f5f5;
            direction: {{getDir locale}};
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            text-align: center;
            color: #ffffff;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .greeting {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .main-message {
            font-size: 16px;
            line-height: 1.8;
            color: #4a5568;
            margin-bottom: 30px;
        }
        
        .main-message p {
            margin-bottom: 15px;
        }
        
        .cta-container {
            text-align: center;
            margin: 40px 0;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s;
        }
        
        .cta-button:hover {
            transform: translateY(-2px);
        }
        
        .highlight-box {
            background-color: #f7fafc;
            border-right: 4px solid #667eea;
            padding: 20px;
            margin: 30px 0;
            border-radius: 4px;
        }
        
        [dir="ltr"] .highlight-box {
            border-right: none;
            border-left: 4px solid #667eea;
        }
        
        .highlight-box h3 {
            color: #667eea;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .highlight-box p {
            color: #4a5568;
            font-size: 15px;
        }
        
        .footer {
            background-color: #f7fafc;
            padding: 30px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
        }
        
        .footer-text {
            font-size: 14px;
            color: #718096;
            margin-bottom: 15px;
        }
        
        .footer-links {
            margin-top: 20px;
        }
        
        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }
        
        .social-links {
            margin-top: 20px;
        }
        
        .social-links a {
            display: inline-block;
            margin: 0 8px;
            color: #718096;
            text-decoration: none;
        }
        
        @media only screen and (max-width: 600px) {
            .content {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .cta-button {
                padding: 14px 30px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            <h1>{{headerTitle}}</h1>
            {{#if headerSubtitle}}
            <p>{{headerSubtitle}}</p>
            {{/if}}
        </div>
        
        <!-- Main Content -->
        <div class="content">
            <!-- Greeting -->
            <div class="greeting">
                {{#if (eq locale 'he')}}
                    ×©×œ×•× {{firstName}},
                {{else}}
                    Hello {{firstName}},
                {{/if}}
            </div>
            
            <!-- Main Message -->
            <div class="main-message">
                {{{mainContent}}}
            </div>
            
            <!-- Highlight Box (Optional) -->
            {{#if highlightTitle}}
            <div class="highlight-box">
                <h3>{{highlightTitle}}</h3>
                <p>{{highlightContent}}</p>
            </div>
            {{/if}}
            
            <!-- Call to Action -->
            {{#if ctaText}}
            <div class="cta-container">
                <a href="{{ctaLink}}" class="cta-button">{{ctaText}}</a>
            </div>
            {{/if}}
            
            <!-- Additional Content (Optional) -->
            {{#if additionalContent}}
            <div class="main-message">
                {{{additionalContent}}}
            </div>
            {{/if}}
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="footer-text">
                {{#if (eq locale 'he')}}
                    <p><strong>NeshamaTech</strong> - ×”×¤×œ×˜×¤×•×¨××” ×”××•×‘×™×œ×” ×œ×‘× ×™×™×ª ×¤×¨×•×¤×™×œ ×©×™×“×•×›×™× ××§×¦×•×¢×™</p>
                    <p>×× ×—× ×• ×›××Ÿ ×œ×¢×–×•×¨ ×œ×š ×œ××¦×•× ××ª ×”×”×ª×××” ×”××•×©×œ××ª ğŸ’œ</p>
                {{else}}
                    <p><strong>NeshamaTech</strong> - The leading platform for building professional dating profiles</p>
                    <p>We're here to help you find your perfect match ğŸ’œ</p>
                {{/if}}
            </div>
            
            <div class="footer-links">
                {{#if (eq locale 'he')}}
                    <a href="{{appUrl}}/dashboard">×”×¤×¨×•×¤×™×œ ×©×œ×™</a> |
                    <a href="{{appUrl}}/settings">×”×’×“×¨×•×ª</a> |
                    <a href="{{appUrl}}/support">×ª××™×›×”</a>
                {{else}}
                    <a href="{{appUrl}}/dashboard">My Profile</a> |
                    <a href="{{appUrl}}/settings">Settings</a> |
                    <a href="{{appUrl}}/support">Support</a>
                {{/if}}
            </div>
            
            <div class="footer-text" style="margin-top: 20px; font-size: 12px;">
                {{#if (eq locale 'he')}}
                    <p>×§×™×‘×œ×ª ××™×™×œ ×–×” ×›×™ ××ª×” ×¨×©×•× ×‘-NeshamaTech</p>
                    <p>×œ× ×¨×•×¦×” ×œ×§×‘×œ ××™×™×œ×™×? <a href="{{unsubscribeUrl}}" style="color: #667eea;">×œ×—×¥ ×›××Ÿ ×œ×”×¡×¨×”</a></p>
                {{else}}
                    <p>You received this email because you are registered with NeshamaTech</p>
                    <p>Don't want to receive emails? <a href="{{unsubscribeUrl}}" style="color: #667eea;">Click here to unsubscribe</a></p>
                {{/if}}
            </div>
        </div>
    </div>
</body>
</html>
--- End of Content for generic.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\onboardingDay1.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!{{else}}Welcome to NeshamaTech!{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .progress-section h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .progress-bar-container {
            background: #e2e8f0;
            border-radius: 12px;
            height: 24px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #06b6d4, #8b5cf6);
            height: 100%;
            transition: width 0.5s;
            border-radius: 12px;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #1e293b;
            font-weight: 600;
            font-size: 13px;
        }
        
        .next-step-box {
            background: #fef3c7;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .next-step-box h3 {
            color: #92400e;
            margin: 0 0 10px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .next-step-box p {
            color: #78350f;
            margin: 0;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .ai-insight-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border: 2px solid rgba(139, 92, 246, 0.2);
        }
        
        .ai-insight-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .ai-insight-icon {
            font-size: 28px;
            margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px;
        }
        
        .ai-insight-box h3 {
            color: transparent;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            margin: 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .ai-insight-box p {
            color: #4c1d95;
            margin: 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
            transition: transform 0.2s;
        }
        
        .cta-button:hover {
            transform: scale(1.05);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact strong {
            color: #1f2937;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-contact a:hover {
            text-decoration: underline;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
            transition: transform 0.2s;
        }
        
        .footer-social a:hover {
            transform: scale(1.2);
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .footer-legal a:hover {
            text-decoration: underline;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto; background: white; border-radius: 24px; overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech, {{firstName}}!
                                {{else}}
                                    Welcome to NeshamaTech, {{firstName}}!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×”××¡×¢ ×©×œ×š ××ª×—×™×œ ×›××Ÿ
                                {{else}}
                                    Your journey starts here
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech. ×”××¢×¨×›×ª ×©×œ× ×• ×›×‘×¨ ××ª×—×™×œ×” ×œ×œ××•×“ ×¢×œ×™×š, ×•×›×œ ×¤×¨×˜ ×©×ª×•×¡×™×£ ×™×¢×–×•×¨ ×œ× ×• ×œ××¦×•× ×œ×š ××ª ×”×”×ª×××” ×”××•×©×œ××ª.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family. Our system is already starting to learn about you, and every detail you add will help us find your perfect match.
                                {{/if}}
                            </p>

                            <!-- Progress Section -->
                            <div class="progress-section">
                                <h3>
                                    ğŸ“Š {{#if (eq locale 'he')}}××™×¤×” ×× ×—× ×• ×¢×›×©×™×•?{{else}}Where are we now?{{/if}}
                                </h3>
                                
                                <div class="progress-bar-container">
                                    <div class="progress-bar" style="width: {{progressPercentage}}%;"></div>
                                    <span class="progress-text">
                                        {{progressPercentage}}% {{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}
                                    </span>
                                </div>
                            </div>

                            <!-- Next Step -->
                            <div class="next-step-box">
                                <h3>
                                    ğŸ¯ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×¨××©×•×Ÿ ×©×œ×š{{else}}Your First Step{{/if}}
                                </h3>
                                <p>{{nextAction}}</p>
                            </div>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div class="ai-insight-box">
                                <div class="ai-insight-header">
                                    <span class="ai-insight-icon">ğŸ§ </span>
                                    <h3>
                                        {{#if (eq locale 'he')}}×ª×•×‘× ×ª AI ××™×©×™×ª{{else}}Personal AI Insight{{/if}}
                                    </h3>
                                </div>
                                <p>{{aiInsight}}</p>
                            </div>
                            {{/if}}

                            <!-- CTA Button -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×‘×•××• × ×ª×—×™×œ! ğŸš€{{else}}Let's Start! ğŸš€{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š 24/7. ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×”!
                                {{else}}
                                    Questions? We're here for you 24/7. Just reply to this email!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <!-- Logo -->
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <!-- Company Name with Gradient -->
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <!-- Tagline -->
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <!-- Contact Info -->
                                        <div class="footer-contact">
                                            <p>
                                                <strong>
                                                    {{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}
                                                </strong>
                                            </p>
                                            <p>
                                                ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a>
                                            </p>
                                            <p>
                                                ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a>
                                            </p>
                                        </div>
                                        
                                        <!-- Social Links -->
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <!-- Copyright -->
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}
                                                ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª
                                            {{else}}
                                                All rights reserved
                                            {{/if}}
                                        </p>
                                        
                                        <!-- Legal Links -->
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a>
                                            |
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for onboardingDay1.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\profileNudge.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×˜×™×¤ ×§×˜×Ÿ ×©×™×¢×©×” ×”×‘×“×œ ×’×“×•×œ{{else}}A small tip that makes a big difference{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.7);
        }
        
        .email-header {
            background: linear-gradient(135deg, #ec4899 0%, #f97316 100%);
            padding: 45px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 56px;
            margin-bottom: 15px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 28px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 100%);
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #ec4899;
            border-radius: 16px;
            padding: 24px;
            margin: 28px 0;
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.1);
        }
        
        .stat-box p {
            color: #be123c;
            margin: 0;
            font-size: 16px;
            line-height: 1.8;
            font-weight: 600;
        }
        
        .stat-box strong {
            display: block;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .stat-highlight {
            font-size: 20px;
            background: linear-gradient(135deg, #ec4899, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .missing-section h2 {
            color: #2d3748;
            margin: 30px 0 20px 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .missing-items {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .missing-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .missing-item:last-child {
            margin-bottom: 0;
        }
        
        .missing-icon {
            color: #f56565;
            font-size: 20px;
            margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px;
            flex-shrink: 0;
        }
        
        .missing-text {
            color: #4a5568;
            margin: 0;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .promise-text {
            font-size: 16px;
            color: #4a5568;
            margin: 25px 0;
            line-height: 1.7;
        }
        
        .promise-text strong {
            color: #1e293b;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #ec4899 0%, #f97316 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.35);
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 22px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ’¡</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×™×© ×›××Ÿ ×›××” ×“×‘×¨×™× ×©×—×¡×¨×™×...
                                {{else}}
                                    {{firstName}}, a few things are missing...
                                {{/if}}
                            </h1>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×©×× ×• ×œ×‘ ×©×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×“×™×™×Ÿ ×œ× ××•×©×œ× ×œ×’××¨×™. ×× ×—× ×• ×™×•×“×¢×™× ×©×–×” ×œ×•×§×— ×–××Ÿ, ××‘×œ ×™×© ×œ× ×• × ×ª×•×Ÿ ××¢× ×™×™×Ÿ ×œ×©×ª×£ ××ª×š:
                                {{else}}
                                    We noticed your profile isn't quite complete yet. We know it takes time, but we have an interesting statistic to share with you:
                                {{/if}}
                            </p>

                            <!-- Stat Box -->
                            <div class="stat-box">
                                <p>
                                    <strong>ğŸ“Š {{#if (eq locale 'he')}}× ×ª×•×Ÿ ×©×•×•×” ×œ×“×¢×ª:{{else}}A stat worth knowing:{{/if}}</strong>
                                    {{#if (eq locale 'he')}}
                                        ×¤×¨×•×¤×™×œ×™× ××œ××™× ×¢× ×ª××•× ×•×ª ××™×›×•×ª×™×•×ª ××§×‘×œ×™× <span class="stat-highlight">×¤×™ 3 ×™×•×ª×¨</span> ×”×¦×¢×•×ª ×”×ª×××” ××¤×¨×•×¤×™×œ×™× ×—×œ×§×™×™×!
                                    {{else}}
                                        Complete profiles with high-quality photos receive <span class="stat-highlight">3 times more</span> match suggestions than partial profiles!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- Missing Items Section -->
                            <div class="missing-section">
                                <h2>
                                    {{#if (eq locale 'he')}}×”× ×” ××” ×©×—×¡×¨ ×‘×¤×¨×•×¤×™×œ ×©×œ×š:{{else}}Here is what's missing from your profile:{{/if}}
                                </h2>

                                <div class="missing-items">
                                    {{#each missingItems}}
                                    <div class="missing-item">
                                        <span class="missing-icon">âœ—</span>
                                        <p class="missing-text">{{this}}</p>
                                    </div>
                                    {{/each}}
                                </div>
                            </div>

                            <p class="promise-text">
                                {{#if (eq locale 'he')}}
                                    ×× ×—× ×• ××‘×˜×™×—×™× ×©×–×” ×œ× ×™×™×§×— ×™×•×ª×¨ ×-<strong>10 ×“×§×•×ª</strong>! ×•×–×” ×™×›×•×œ ×œ×¢×©×•×ª ××ª ×›×œ ×”×”×‘×“×œ.
                                {{else}}
                                    We promise it won't take more than <strong>10 minutes</strong>! And it can make all the difference.
                                {{/if}}
                            </p>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ğŸš€{{else}}Complete Your Profile ğŸš€{{/if}}
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for profileNudge.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\progressUpdate.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª{{else}}Progress Update{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            padding: 45px 30px;
            text-align: center;
        }
        
        .header-icon {
            font-size: 56px;
            margin-bottom: 15px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 28px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .big-progress {
            text-align: center;
            margin: 30px 0;
        }
        
        .progress-circle {
            display: inline-block;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            position: relative;
        }
        
        .progress-circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 48px;
            font-weight: 800;
            line-height: 1;
        }
        
        .progress-label {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .progress-text {
            font-size: 16px;
            color: #4a5568;
            margin: 20px 0;
            line-height: 1.7;
            text-align: center;
        }
        
        .progress-text strong {
            color: #1e293b;
        }
        
        .breakdown-section {
            background: #f8fafc;
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .breakdown-section h3 {
            color: #334155;
            margin: 0 0 20px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .breakdown-item {
            margin-bottom: 20px;
        }
        
        .breakdown-item:last-child {
            margin-bottom: 0;
        }
        
        .breakdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .breakdown-name {
            color: #64748b;
            font-size: 15px;
            font-weight: 500;
        }
        
        .breakdown-value {
            font-weight: 600;
            font-size: 14px;
        }
        
        .breakdown-value.complete {
            color: #10b981;
        }
        
        .breakdown-value.incomplete {
            color: #f59e0b;
        }
        
        .breakdown-bar {
            background: #e2e8f0;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
        }
        
        .breakdown-bar-fill {
            height: 100%;
        }
        
        .breakdown-bar-fill.complete {
            background: #10b981;
        }
        
        .breakdown-bar-fill.incomplete {
            background: #f59e0b;
        }
        
        .next-action-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 12px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .next-action-box h3 {
            color: #92400e;
            margin: 0 0 12px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .next-action-box p {
            color: #78350f;
            margin: 0 0 15px 0;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .next-action-box p:last-child {
            margin-bottom: 0;
        }
        
        .milestone-text {
            color: #92400e;
            font-size: 14px;
        }
        
        .milestone-text strong {
            color: #78350f;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 22px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .progress-circle {
                width: 120px;
                height: 120px;
            }
            
            .progress-percentage {
                font-size: 40px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ“Š</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ××ª×” ×¢×•×©×” ×¢×‘×•×“×” ××¢×•×œ×”!
                                {{else}}
                                    {{firstName}}, you're doing a great job!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}×”× ×” ×¢×“×›×•×Ÿ ××”×™×¨ ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×š{{else}}Here's a quick update on your progress{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <!-- Big Progress Number -->
                            <div class="big-progress">
                                <div class="progress-circle">
                                    <div class="progress-circle-inner">
                                        <div class="progress-percentage">{{progressPercentage}}%</div>
                                        <div class="progress-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}</div>
                                    </div>
                                </div>
                            </div>

                            <p class="progress-text">
                                <strong>{{#if (eq locale 'he')}}×›×œ ×”×›×‘×•×“!{{else}}Great job!{{/if}}</strong> 
                                {{#if (eq locale 'he')}}×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-{{else}}Your profile is already at{{/if}} {{progressPercentage}}%.
                            </p>

                            <!-- Detailed Breakdown -->
                            <div class="breakdown-section">
                                <h3>
                                    {{#if (eq locale 'he')}}×¤×™×¨×•×˜ ×”×”×ª×§×“××•×ª:{{else}}Progress Breakdown:{{/if}}
                                </h3>
                                
                                <div class="breakdown-item">
                                    <div class="breakdown-header">
                                        <span class="breakdown-name">
                                            ğŸ“¸ {{#if (eq locale 'he')}}×ª××•× ×•×ª{{else}}Photos{{/if}}
                                        </span>
                                        <span class="breakdown-value {{#if photosComplete}}complete{{else}}incomplete{{/if}}">
                                            {{photosCount}}/3
                                        </span>
                                    </div>
                                    <div class="breakdown-bar">
                                        <div class="breakdown-bar-fill {{#if photosComplete}}complete{{else}}incomplete{{/if}}" style="width: {{photosPercent}}%;"></div>
                                    </div>
                                </div>

                                <div class="breakdown-item">
                                    <div class="breakdown-header">
                                        <span class="breakdown-name">
                                            ğŸ“ {{#if (eq locale 'he')}}×©××œ×•×Ÿ{{else}}Questionnaire{{/if}}
                                        </span>
                                        <span class="breakdown-value {{#if questionnaireComplete}}complete{{else}}incomplete{{/if}}">
                                            {{questionnairePercent}}%
                                        </span>
                                    </div>
                                    <div class="breakdown-bar">
                                        <div class="breakdown-bar-fill {{#if questionnaireComplete}}complete{{else}}incomplete{{/if}}" style="width: {{questionnairePercent}}%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Next Action -->
                            <div class="next-action-box">
                                <h3>
                                    ğŸš€ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×‘× ×©×œ×š{{else}}Your Next Step{{/if}}
                                </h3>
                                <p>{{nextAction}}</p>
                                <p class="milestone-text">
                                    {{#if (eq locale 'he')}}
                                        ×–×” ×™×™×§×— ×¨×§ <strong>{{estimatedTime}}</strong> ×•×™×§×¤×™×¥ ××•×ª×š ×œ-<strong>{{nextMilestone}}%</strong>!
                                    {{else}}
                                        This will only take <strong>{{estimatedTime}}</strong> and will get you to <strong>{{nextMilestone}}%</strong>!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">
                                    {{ctaText}} ğŸ’ª
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for progressUpdate.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\reengagement.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×–×•×›×¨/×ª ××•×ª× ×•?{{else}}Remember us?{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 15px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-reminder-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%);
            border-radius: 16px;
            padding: 28px;
            margin: 25px 0;
            border: 2px solid #3b82f6;
        }
        
        .progress-reminder-box h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }
        
        .progress-circle-wrapper {
            text-align: center;
            margin: 20px 0;
        }
        
        .progress-circle {
            display: inline-block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            position: relative;
        }
        
        .progress-circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 42px;
            font-weight: 900;
            line-height: 1;
        }
        
        .progress-label {
            font-size: 13px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .whats-new-box {
            background: #f0fdf4;
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #10b981;
        }
        
        .whats-new-box h3 {
            color: #166534;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .whats-new-box ul {
            color: #15803d;
            margin: 0;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px;
            line-height: 1.8;
        }
        
        .whats-new-box li {
            margin-bottom: 10px;
        }
        
        .whats-new-box li strong {
            color: #14532d;
        }
        
        .next-step-box {
            background: linear-gradient(to {{#if (eq locale 'he')}}left{{else}}right{{/if}}, #fef3c7, #fed7aa);
            border-radius: 16px;
            padding: 4px;
            margin: 30px 0;
        }
        
        .next-step-inner {
            background: white;
            border-radius: 12px;
            padding: 24px;
        }
        
        .next-step-inner h3 {
            color: #92400e;
            margin: 0 0 15px 0;
            font-size: 19px;
            font-weight: 700;
            text-align: center;
        }
        
        .next-step-inner p {
            color: #78350f;
            margin: 0;
            font-size: 17px;
            line-height: 1.6;
            text-align: center;
            font-weight: 500;
        }
        
        .time-estimate {
            color: #a16207;
            margin: 15px 0 0 0;
            font-size: 14px;
            text-align: center;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 18px;
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
            text-align: center;
        }
        
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 26px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 16px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ’Œ</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                                {{else}}
                                    {{firstName}}, remember us?
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}×¢×‘×¨ ×§×¦×ª ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...{{else}}It's been a while since we talked...{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×. ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                                {{else}}
                                    It's been {{daysSinceActive}} days since you were last active. We get it - life is busy. But we wanted to remind you that you're not alone on this journey.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div class="progress-reminder-box">
                                <h3>
                                    ğŸ“Œ {{#if (eq locale 'he')}}××™×¤×” ×”×¤×¡×§× ×•?{{else}}Where did we leave off?{{/if}}
                                </h3>
                                <div class="progress-circle-wrapper">
                                    <div class="progress-circle">
                                        <div class="progress-circle-inner">
                                            <div class="progress-percentage">{{progressPercentage}}%</div>
                                            <div class="progress-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- What's New -->
                            <div class="whats-new-box">
                                <h3>
                                    âœ¨ {{#if (eq locale 'he')}}××” ×—×“×© ×××–{{else}}What's new since you've been away{{/if}}
                                </h3>
                                <ul>
                                    <li>
                                        {{#if (eq locale 'he')}}
                                            ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - <strong>×™×•×ª×¨ ××“×•×™×§ ××ª××™×“</strong>
                                        {{else}}
                                            We've improved our matching engine - <strong>more accurate than ever</strong>
                                        {{/if}}
                                    </li>
                                    <li>
                                        {{#if (eq locale 'he')}}
                                            ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                        {{else}}
                                            We've added advanced AI insights to every profile
                                        {{/if}}
                                    </li>
                                    <li>
                                        {{newUsersCount}}+ {{#if (eq locale 'he')}}××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©{{else}}new users joined this month{{/if}}
                                    </li>
                                </ul>
                            </div>

                            <!-- Next Step -->
                            <div class="next-step-box">
                                <div class="next-step-inner">
                                    <h3>
                                        ğŸ¯ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×‘× ×©×œ×š{{else}}Your Next Step{{/if}}
</h3>
<p>{{nextAction}}</p>
<p class="time-estimate">
{{#if (eq locale 'he')}}
×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
{{else}}
This should take about {{estimatedTime}} - sound good?
{{/if}}
</p>
</div>
</div>
                        <!-- CTA -->
                        <div class="cta-section">
                            <a href="{{ctaLink}}" class="cta-button">
                                {{#if (eq locale 'he')}}×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×• ğŸ’ª{{else}}Let's continue where we left off ğŸ’ª{{/if}}
                            </a>
                        </div>

                        <p class="help-text">
                            {{#if (eq locale 'he')}}
                                ×× ×™×© ××©×”×• ×©××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨ ×œ×š.
                            {{else}}
                                If something is preventing you from continuing, we'd love to know.<br>Just reply to this email, and we'll help.
                            {{/if}}
                        </p>
                    </td>
                </tr>

                <!-- Footer -->
                <tr>
                    <td class="email-footer">
                        <table role="presentation" style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td class="footer-content">
                                    <div class="footer-logo">
                                        <img 
                                            src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                            alt="NeshamaTech Logo"
                                        />
                                    </div>
                                    
                                    <div class="footer-company-name">
                                        <span>NeshamaTech</span>
                                    </div>
                                    
                                    <p class="footer-tagline">
                                        {{#if (eq locale 'he')}}
                                            ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                        {{else}}
                                            Connecting Hearts, Building Shared Futures
                                        {{/if}}
                                    </p>
                                    
                                    <div class="footer-contact">
                                        <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                        <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                        <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                    </div>
                                    
                                    <div class="footer-social">
                                        <a href="#" title="Facebook">ğŸ“˜</a>
                                        <a href="#" title="Instagram">ğŸ“·</a>
                                        <a href="#" title="Twitter">ğŸ¦</a>
                                    </div>
                                    
                                    <p class="footer-copyright">
                                        Â© {{currentYear}} NeshamaTech. 
                                        {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                    </p>
                                    
                                    <p class="footer-legal">
                                        <a href="{{baseUrl}}/privacy">
                                            {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                        </a> | 
                                        <a href="{{baseUrl}}/terms">
                                            {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                        </a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
            </table>
        </td>
    </tr>
</table>
</body>
</html>
--- End of Content for reengagement.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\welcome.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×‘×¨×•×›×™× ×”×‘××™× ×œ-NeshamaTech{{else}}Welcome to NeshamaTech{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .celebration-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .welcome-box {
            background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .welcome-box h2 {
            color: #5a67d8;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .welcome-box ul {
            color: #4a5568;
            margin: 0;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px;
            line-height: 1.8;
        }
        
        .welcome-box li {
            margin-bottom: 10px;
        }
        
        .welcome-box li strong {
            color: #1e293b;
        }
        
        .tip-box {
            background: #fef3c7;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 20px 0;
        }
        
        .tip-box p {
            margin: 0;
            color: #78350f;
            line-height: 1.7;
        }
        
        .tip-box strong {
            color: #92400e;
        }
        
        .cta-section {
            margin: 30px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s;
        }
        
        .cta-button:hover {
            transform: scale(1.05);
        }
        
        .help-text {
            font-size: 15px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 26px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 14px 35px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="celebration-icon">ğŸ‰</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!
                                {{else}}
                                    Welcome to NeshamaTech!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×”××¡×¢ ×©×œ×š ×œ×”×ª×××” ××•×©×œ××ª ××ª×—×™×œ ×›××Ÿ
                                {{else}}
                                    Your journey to the perfect match starts here
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech - ××¢×¨×›×ª ×”×©×™×“×•×›×™× ×”×—×›××” ×©××©×œ×‘×ª ×˜×›× ×•×œ×•×’×™×” ××ª×§×“××ª ×¢× ×”×‘×™× ×” ×•×”×—×•× ×”×× ×•×©×™×™× ×©×œ ×©×“×›× ×™× ××§×¦×•×¢×™×™×.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family - the smart matchmaking system that combines advanced technology with the human wisdom and warmth of professional matchmakers.
                                {{/if}}
                            </p>

                            <!-- What's Next -->
                            <div class="welcome-box">
                                <h2>
                                    ğŸ’¡ {{#if (eq locale 'he')}}××” ×”×œ××”?{{else}}What's next?{{/if}}
                                </h2>
                                <ul>
                                    <li>
                                        <strong>{{#if (eq locale 'he')}}×”×©×œ× ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š{{else}}Complete your profile{{/if}}</strong> - 
                                        {{#if (eq locale 'he')}}
                                            ×›×›×œ ×©× ×“×¢ ×¢×œ×™×š ×™×•×ª×¨, ×›×š × ×•×›×œ ×œ××¦×•× ×œ×š ×”×ª×××” ×˜×•×‘×” ×™×•×ª×¨
                                        {{else}}
                                            the more we know about you, the better we can find a match
                                        {{/if}}
                                    </li>
                                    <li>
                                        <strong>{{#if (eq locale 'he')}}×”×•×¡×£ ×ª××•× ×•×ª{{else}}Add photos{{/if}}</strong> - 
                                        {{#if (eq locale 'he')}}
                                            ×ª××•× ×” ×©×•×•×” ××œ×£ ××™×œ×™×, ×•-3 ×ª××•× ×•×ª? ×–×” ×”×¨×‘×” ×™×•×ª×¨!
                                        {{else}}
                                            a picture is worth a thousand words, and 3 pictures? Even more!
                                        {{/if}}
                                    </li>
                                </ul>
                            </div>

                            <!-- Important Tip -->
                            <div class="tip-box">
                                <p>
                                    <strong>{{#if (eq locale 'he')}}×˜×™×¤ ×—×©×•×‘:{{else}}Important tip:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×¤×¨×•×¤×™×œ×™× ××œ××™× ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª!
                                    {{else}}
                                        Complete profiles get 3 times more matches!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA Button -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×™{{else}}Complete My Profile{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×™×© ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š! ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×”.
                                {{else}}
                                    Questions? We're here for you! Just reply to this email.
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for welcome.hbs ---

--- End of Content for email_contents.txt ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\evening_feedback.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html lang="{{#if (eq locale 'he')}}he{{else}}en{{/if}}" dir="{{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{#if (eq locale 'he')}}×¡×™×›×•× ×™×•×{{else}}Daily Summary{{/if}}</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333333;
            background-color: #f5f7fa;
            direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}};
            text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};
        }

        /* RTL Support for Hebrew */
        [dir="rtl"] {
            text-align: right;
            direction: rtl;
        }
        
        [dir="rtl"] ul,
        [dir="rtl"] ol {
            padding-right: 20px;
            padding-left: 0;
        }
        
        [dir="rtl"] .email-body ul li,
        [dir="rtl"] .welcome-box ul li {
            text-align: right;
        }
        
        [dir="rtl"] .tip-box,
        [dir="rtl"] .welcome-box,
        [dir="rtl"] .progress-section {
            text-align: right;
        }
        
        [dir="rtl"] h1,
        [dir="rtl"] h2,
        [dir="rtl"] h3,
        [dir="rtl"] p {
            text-align: right;
        }

        /* Container */
        .email-wrapper {
            width: 100%;
            background-color: #f5f7fa;
            padding: 40px 20px;
        }

        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Header */
        .email-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .email-header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            text-align: center;
        }

        .email-header p {
            font-size: 16px;
            opacity: 0.95;
            margin: 0;
            text-align: center;
        }

        .celebration-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        /* Body */
        .email-body {
            padding: 40px 30px;
            direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}};
            text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};
        }

        .greeting {
            font-size: 18px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 20px;
        }

        .email-body p {
            font-size: 16px;
            color: #555555;
            margin-bottom: 20px;
            line-height: 1.7;
        }

        /* Progress Section */
        .progress-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #667eea;
            direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}};
            text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};
        }

        .progress-section h2 {
            color: #667eea;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-items {
            list-style: none;
            padding: 0;
        }

        .progress-items li {
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            color: #333;
            font-size: 15px;
        }

        .progress-items li:last-child {
            border-bottom: none;
        }

        .progress-items li::before {
            content: "âœ… ";
            margin-inline-end: 8px;
        }

        /* AI Insight Box */
        .ai-insight {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #fdcb6e;
        }

        [dir="rtl"] .ai-insight {
            border-left: none;
            border-right: 5px solid #fdcb6e;
        }

        .ai-insight h3 {
            color: #2d3436;
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-insight p {
            color: #2d3436;
            margin: 0;
            font-size: 15px;
            line-height: 1.6;
        }

        /* CTA Section */
        .cta-section {
            text-align: center;
            margin: 35px 0;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        /* Help Text */
        .help-text {
            text-align: center;
            color: #888888;
            font-size: 14px;
            margin-top: 30px;
        }
        
        /* Footer */
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }

        /* Responsive */
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header,
            .email-body {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .cta-button {
                padding: 14px 30px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header" style="direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}}; text-align: center;">
                            <div class="celebration-icon">ğŸŒ™</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×¡×™×›×•× ×”×™×•× ×©×œ×š
                                {{else}}
                                    Your Daily Summary
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×”× ×” ××” ×©×”×©×’×ª ×”×™×•×!
                                {{else}}
                                    Here's what you accomplished today!
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body" style="direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}}; text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{hook}}
                            </p>

                            <!-- Progress Section -->
                            {{#if todayProgress}}
                            <div class="progress-section" style="direction: {{#if (eq locale 'he')}}rtl{{else}}ltr{{/if}}; text-align: {{#if (eq locale 'he')}}right{{else}}left{{/if}};">
                                <h2>
                                    âœ¨ {{#if (eq locale 'he')}}×”×”×™×©×’×™× ×©×œ×š ×”×™×•×{{else}}Your Achievements Today{{/if}}
                                </h2>
                                <ul class="progress-items">
                                    {{#each todayProgress.itemsCompleted}}
                                    <li>{{this}}</li>
                                    {{/each}}
                                </ul>
                            </div>
                            {{/if}}

                            <!-- AI Insight -->
                            {{#if aiInsight}}
                            <div class="ai-insight">
                                <h3>ğŸ’¡ {{#if (eq locale 'he')}}×ª×•×‘× ×ª AI{{else}}AI Insight{{/if}}</h3>
                                <p>{{aiInsight}}</p>
                            </div>
                            {{/if}}

                            <p>
                                {{mainMessage}}
                            </p>

                            {{#if specificAction}}
                            <p>
                                <strong>{{#if (eq locale 'he')}}×”×¦×¢×“ ×”×‘×:{{else}}Next Step:{{/if}}</strong> {{specificAction}}
                            </p>
                            {{/if}}

                            <!-- CTA Button -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×”××©×š ×‘× ×™×™×ª ×”×¤×¨×•×¤×™×œ{{else}}Continue Building Profile{{/if}}
                                </a>
                            </div>

                            <p>
                                {{encouragement}}
                            </p>

                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š!
                                {{else}}
                                    Questions? We're here for you!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a> |
                                            <a href="{{unsubscribeUrl}}">
                                                {{#if (eq locale 'he')}}×”×¡×¨×” ××”×¨×©×™××”{{else}}Unsubscribe{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for evening_feedback.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\generic.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{subject}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
            display: block;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 30px;
            font-weight: 800;
            line-height: 1.4;
            text-shadow: 0 2px 15px rgba(0,0,0,0.15);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.8;
            margin: 0 0 20px 0;
        }
        
        .main-content {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 25px;
        }
        
        .main-content p {
            margin-bottom: 15px;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 20px;
            padding: 32px;
            margin: 28px 0;
            border: 2px solid rgba(139, 92, 246, 0.2);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.1);
        }
        
        .highlight-box h3 {
            color: transparent;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            background-clip: text;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 800;
            display: flex;
            align-items: center;
        }
        
        .highlight-icon {
            font-size: 28px;
            {{#if (eq locale 'he')}}margin-left{{else}}margin-right{{/if}}: 12px;
        }
        
        .highlight-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
        }
        
        .highlight-content p {
            color: #1e293b;
            margin: 0;
            font-size: 16px;
            line-height: 1.8;
            font-weight: 500;
        }
        
        .info-section {
            background: #f7fafc;
            border-radius: 16px;
            padding: 28px;
            margin: 25px 0;
            border: 1px solid #e2e8f0;
        }
        
        .info-section h3 {
            color: #2d3748;
            margin: 0 0 18px 0;
            font-size: 19px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .info-icon {
            font-size: 24px;
            {{#if (eq locale 'he')}}margin-left{{else}}margin-right{{/if}}: 10px;
        }
        
        .info-section ul {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        
        .info-section li {
            color: #4a5568;
            margin-bottom: 14px;
            font-size: 15px;
            line-height: 1.7;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 30px;
            position: relative;
        }
        
        .info-section li:before {
            content: "âœ“";
            position: absolute;
            {{#if (eq locale 'he')}}right{{else}}left{{/if}}: 0;
            color: #667eea;
            font-weight: 700;
            font-size: 18px;
        }
        
        .info-section li:last-child {
            margin-bottom: 0;
        }
        
        .info-section p {
            color: #4a5568;
            margin: 0 0 12px 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .info-section p:last-child {
            margin-bottom: 0;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }
        
        .additional-content {
            margin-top: 25px;
            font-size: 16px;
            color: #4a5568;
            line-height: 1.8;
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 30px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
            text-align: center;
        }
        
        .help-text strong {
            color: #2d3748;
        }
        
        .email-footer {
            background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
            padding: 45px 30px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
        }
        
        .footer-content {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .footer-company-name {
            font-size: 22px;
            font-weight: 800;
            color: transparent;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            background-clip: text;
            margin-bottom: 8px;
        }
        
        .footer-tagline {
            color: #64748b;
            font-size: 14px;
            margin: 0 0 25px 0;
            font-weight: 500;
        }
        
        .footer-contact {
            margin: 25px 0;
        }
        
        .footer-contact p {
            color: #64748b;
            font-size: 13px;
            margin: 8px 0;
        }
        
        .footer-contact a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer-social {
            margin: 25px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 8px;
            font-size: 24px;
            text-decoration: none;
            transition: transform 0.2s;
        }
        
        .footer-social a:hover {
            transform: scale(1.1);
        }
        
        .footer-links {
            margin: 20px 0;
        }
        
        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 12px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .footer-copyright {
            color: #94a3b8;
            font-size: 12px;
            margin: 20px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 26px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .highlight-box,
            .info-section {
                padding: 24px 20px;
            }
            
            .cta-button {
                padding: 14px 35px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            {{#if headerIcon}}
                            <span class="header-icon">{{headerIcon}}</span>
                            {{/if}}
                            <h1>{{headerTitle}}</h1>
                            {{#if headerSubtitle}}
                            <p>{{headerSubtitle}}</p>
                            {{/if}}
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <!-- Greeting -->
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <!-- Main Content -->
                            <div class="main-content">
                                {{{mainContent}}}
                            </div>
                            
                            <!-- Highlight Box (Optional) -->
                            {{#if highlightTitle}}
                            <div class="highlight-box">
                                <h3>
                                    {{#if highlightIcon}}
                                    <span class="highlight-icon">{{highlightIcon}}</span>
                                    {{/if}}
                                    {{highlightTitle}}
                                </h3>
                                <div class="highlight-content">
                                    <p>{{{highlightContent}}}</p>
                                </div>
                            </div>
                            {{/if}}
                            
                            <!-- Info Section (Optional) -->
                            {{#if infoTitle}}
                            <div class="info-section">
                                <h3>
                                    {{#if infoIcon}}
                                    <span class="info-icon">{{infoIcon}}</span>
                                    {{/if}}
                                    {{infoTitle}}
                                </h3>
                                {{{infoContent}}}
                            </div>
                            {{/if}}
                            
                            <!-- Call to Action -->
                            {{#if ctaText}}
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">{{ctaText}}</a>
                            </div>
                            {{/if}}
                            
                            <!-- Additional Content (Optional) -->
                            {{#if additionalContent}}
                            <div class="additional-content">
                                {{{additionalContent}}}
                            </div>
                            {{/if}}
                            
                            <!-- Help Text -->
                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×™×© ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š! ğŸ’œ<br>
                                    ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×” ×•× ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×.
                                {{else}}
                                    Questions? We're here for you! ğŸ’œ<br>
                                    Just reply to this email and we'll get back to you soon.
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <div class="footer-links">
                                            {{#if (eq locale 'he')}}
                                                <a href="{{baseUrl}}/profile">×”×¤×¨×•×¤×™×œ ×©×œ×™</a> |
                                                <a href="{{baseUrl}}/settings">×”×’×“×¨×•×ª</a> |
                                                <a href="{{baseUrl}}/support">×ª××™×›×”</a>
                                            {{else}}
                                                <a href="{{baseUrl}}/profile">My Profile</a> |
                                                <a href="{{baseUrl}}/settings">Settings</a> |
                                                <a href="{{baseUrl}}/support">Support</a>
                                            {{/if}}
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a> | 
                                            <a href="{{unsubscribeUrl}}">
                                                {{#if (eq locale 'he')}}×”×¡×¨×” ××”×¨×©×™××”{{else}}Unsubscribe{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for generic.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\onboardingDay1.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!{{else}}Welcome to NeshamaTech!{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .progress-section h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .progress-bar-container {
            background: #e2e8f0;
            border-radius: 12px;
            height: 24px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #06b6d4, #8b5cf6);
            height: 100%;
            transition: width 0.5s;
            border-radius: 12px;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #1e293b;
            font-weight: 600;
            font-size: 13px;
        }
        
        .next-step-box {
            background: #fef3c7;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .next-step-box h3 {
            color: #92400e;
            margin: 0 0 10px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .next-step-box p {
            color: #78350f;
            margin: 0;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .ai-insight-box {
            background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border: 2px solid rgba(139, 92, 246, 0.2);
        }
        
        .ai-insight-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .ai-insight-icon {
            font-size: 28px;
            margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px;
        }
        
        .ai-insight-box h3 {
            color: transparent;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            margin: 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .ai-insight-box p {
            color: #4c1d95;
            margin: 0;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
            transition: transform 0.2s;
        }
        
        .cta-button:hover {
            transform: scale(1.05);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact strong {
            color: #1f2937;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-contact a:hover {
            text-decoration: underline;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
            transition: transform 0.2s;
        }
        
        .footer-social a:hover {
            transform: scale(1.2);
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .footer-legal a:hover {
            text-decoration: underline;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 24px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto; background: white; border-radius: 24px; overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech, {{firstName}}!
                                {{else}}
                                    Welcome to NeshamaTech, {{firstName}}!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×”××¡×¢ ×©×œ×š ××ª×—×™×œ ×›××Ÿ
                                {{else}}
                                    Your journey starts here
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech. ×”××¢×¨×›×ª ×©×œ× ×• ×›×‘×¨ ××ª×—×™×œ×” ×œ×œ××•×“ ×¢×œ×™×š, ×•×›×œ ×¤×¨×˜ ×©×ª×•×¡×™×£ ×™×¢×–×•×¨ ×œ× ×• ×œ××¦×•× ×œ×š ××ª ×”×”×ª×××” ×”××•×©×œ××ª.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family. Our system is already starting to learn about you, and every detail you add will help us find your perfect match.
                                {{/if}}
                            </p>

                            <!-- Progress Section -->
                            <div class="progress-section">
                                <h3>
                                    ğŸ“Š {{#if (eq locale 'he')}}××™×¤×” ×× ×—× ×• ×¢×›×©×™×•?{{else}}Where are we now?{{/if}}
                                </h3>
                                
                                <div class="progress-bar-container">
                                    <div class="progress-bar" style="width: {{progressPercentage}}%;"></div>
                                    <span class="progress-text">
                                        {{progressPercentage}}% {{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}
                                    </span>
                                </div>
                            </div>

                            <!-- Next Step -->
                            <div class="next-step-box">
                                <h3>
                                    ğŸ¯ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×¨××©×•×Ÿ ×©×œ×š{{else}}Your First Step{{/if}}
                                </h3>
                                <p>{{nextAction}}</p>
                            </div>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div class="ai-insight-box">
                                <div class="ai-insight-header">
                                    <span class="ai-insight-icon">ğŸ§ </span>
                                    <h3>
                                        {{#if (eq locale 'he')}}×ª×•×‘× ×ª AI ××™×©×™×ª{{else}}Personal AI Insight{{/if}}
                                    </h3>
                                </div>
                                <p>{{aiInsight}}</p>
                            </div>
                            {{/if}}

                            <!-- CTA Button -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×‘×•××• × ×ª×—×™×œ! ğŸš€{{else}}Let's Start! ğŸš€{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š 24/7. ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×”!
                                {{else}}
                                    Questions? We're here for you 24/7. Just reply to this email!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <!-- Logo -->
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <!-- Company Name with Gradient -->
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <!-- Tagline -->
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <!-- Contact Info -->
                                        <div class="footer-contact">
                                            <p>
                                                <strong>
                                                    {{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}
                                                </strong>
                                            </p>
                                            <p>
                                                ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a>
                                            </p>
                                            <p>
                                                ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a>
                                            </p>
                                        </div>
                                        
                                        <!-- Social Links -->
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <!-- Copyright -->
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}
                                                ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª
                                            {{else}}
                                                All rights reserved
                                            {{/if}}
                                        </p>
                                        
                                        <!-- Legal Links -->
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a>
                                            |
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for onboardingDay1.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\profileNudge.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×˜×™×¤ ×§×˜×Ÿ ×©×™×¢×©×” ×”×‘×“×œ ×’×“×•×œ{{else}}A small tip that makes a big difference{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.7);
        }
        
        .email-header {
            background: linear-gradient(135deg, #ec4899 0%, #f97316 100%);
            padding: 45px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 56px;
            margin-bottom: 15px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 28px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 100%);
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #ec4899;
            border-radius: 16px;
            padding: 24px;
            margin: 28px 0;
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.1);
        }
        
        .stat-box p {
            color: #be123c;
            margin: 0;
            font-size: 16px;
            line-height: 1.8;
            font-weight: 600;
        }
        
        .stat-box strong {
            display: block;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .stat-highlight {
            font-size: 20px;
            background: linear-gradient(135deg, #ec4899, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .missing-section h2 {
            color: #2d3748;
            margin: 30px 0 20px 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .missing-items {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .missing-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .missing-item:last-child {
            margin-bottom: 0;
        }
        
        .missing-icon {
            color: #f56565;
            font-size: 20px;
            margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px;
            flex-shrink: 0;
        }
        
        .missing-text {
            color: #4a5568;
            margin: 0;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .promise-text {
            font-size: 16px;
            color: #4a5568;
            margin: 25px 0;
            line-height: 1.7;
        }
        
        .promise-text strong {
            color: #1e293b;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #ec4899 0%, #f97316 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.35);
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 22px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ’¡</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×™×© ×›××Ÿ ×›××” ×“×‘×¨×™× ×©×—×¡×¨×™×...
                                {{else}}
                                    {{firstName}}, a few things are missing...
                                {{/if}}
                            </h1>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×©×× ×• ×œ×‘ ×©×”×¤×¨×•×¤×™×œ ×©×œ×š ×¢×“×™×™×Ÿ ×œ× ××•×©×œ× ×œ×’××¨×™. ×× ×—× ×• ×™×•×“×¢×™× ×©×–×” ×œ×•×§×— ×–××Ÿ, ××‘×œ ×™×© ×œ× ×• × ×ª×•×Ÿ ××¢× ×™×™×Ÿ ×œ×©×ª×£ ××ª×š:
                                {{else}}
                                    We noticed your profile isn't quite complete yet. We know it takes time, but we have an interesting statistic to share with you:
                                {{/if}}
                            </p>

                            <!-- Stat Box -->
                            <div class="stat-box">
                                <p>
                                    <strong>ğŸ“Š {{#if (eq locale 'he')}}× ×ª×•×Ÿ ×©×•×•×” ×œ×“×¢×ª:{{else}}A stat worth knowing:{{/if}}</strong>
                                    {{#if (eq locale 'he')}}
                                        ×¤×¨×•×¤×™×œ×™× ××œ××™× ×¢× ×ª××•× ×•×ª ××™×›×•×ª×™×•×ª ××§×‘×œ×™× <span class="stat-highlight">×¤×™ 3 ×™×•×ª×¨</span> ×”×¦×¢×•×ª ×”×ª×××” ××¤×¨×•×¤×™×œ×™× ×—×œ×§×™×™×!
                                    {{else}}
                                        Complete profiles with high-quality photos receive <span class="stat-highlight">3 times more</span> match suggestions than partial profiles!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- Missing Items Section -->
                            <div class="missing-section">
                                <h2>
                                    {{#if (eq locale 'he')}}×”× ×” ××” ×©×—×¡×¨ ×‘×¤×¨×•×¤×™×œ ×©×œ×š:{{else}}Here is what's missing from your profile:{{/if}}
                                </h2>

                                <div class="missing-items">
                                    {{#each missingItems}}
                                    <div class="missing-item">
                                        <span class="missing-icon">âœ—</span>
                                        <p class="missing-text">{{this}}</p>
                                    </div>
                                    {{/each}}
                                </div>
                            </div>

                            <p class="promise-text">
                                {{#if (eq locale 'he')}}
                                    ×× ×—× ×• ××‘×˜×™×—×™× ×©×–×” ×œ× ×™×™×§×— ×™×•×ª×¨ ×-<strong>10 ×“×§×•×ª</strong>! ×•×–×” ×™×›×•×œ ×œ×¢×©×•×ª ××ª ×›×œ ×”×”×‘×“×œ.
                                {{else}}
                                    We promise it won't take more than <strong>10 minutes</strong>! And it can make all the difference.
                                {{/if}}
                            </p>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ğŸš€{{else}}Complete Your Profile ğŸš€{{/if}}
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for profileNudge.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\progressUpdate.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª{{else}}Progress Update{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            padding: 45px 30px;
            text-align: center;
        }
        
        .header-icon {
            font-size: 56px;
            margin-bottom: 15px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 28px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 17px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .big-progress {
            text-align: center;
            margin: 30px 0;
        }
        
        .progress-circle {
            display: inline-block;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            position: relative;
        }
        
        .progress-circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 48px;
            font-weight: 800;
            line-height: 1;
        }
        
        .progress-label {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .progress-text {
            font-size: 16px;
            color: #4a5568;
            margin: 20px 0;
            line-height: 1.7;
            text-align: center;
        }
        
        .progress-text strong {
            color: #1e293b;
        }
        
        .breakdown-section {
            background: #f8fafc;
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .breakdown-section h3 {
            color: #334155;
            margin: 0 0 20px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .breakdown-item {
            margin-bottom: 20px;
        }
        
        .breakdown-item:last-child {
            margin-bottom: 0;
        }
        
        .breakdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .breakdown-name {
            color: #64748b;
            font-size: 15px;
            font-weight: 500;
        }
        
        .breakdown-value {
            font-weight: 600;
            font-size: 14px;
        }
        
        .breakdown-value.complete {
            color: #10b981;
        }
        
        .breakdown-value.incomplete {
            color: #f59e0b;
        }
        
        .breakdown-bar {
            background: #e2e8f0;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
        }
        
        .breakdown-bar-fill {
            height: 100%;
        }
        
        .breakdown-bar-fill.complete {
            background: #10b981;
        }
        
        .breakdown-bar-fill.incomplete {
            background: #f59e0b;
        }
        
        .next-action-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 12px;
            padding: 24px;
            margin: 25px 0;
        }
        
        .next-action-box h3 {
            color: #92400e;
            margin: 0 0 12px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .next-action-box p {
            color: #78350f;
            margin: 0 0 15px 0;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .next-action-box p:last-child {
            margin-bottom: 0;
        }
        
        .milestone-text {
            color: #92400e;
            font-size: 14px;
        }
        
        .milestone-text strong {
            color: #78350f;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            color: white;
            text-decoration: none;
            padding: 18px 48px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 22px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .progress-circle {
                width: 120px;
                height: 120px;
            }
            
            .progress-percentage {
                font-size: 40px;
            }
            
            .cta-button {
                padding: 15px 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ“Š</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ××ª×” ×¢×•×©×” ×¢×‘×•×“×” ××¢×•×œ×”!
                                {{else}}
                                    {{firstName}}, you're doing a great job!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}×”× ×” ×¢×“×›×•×Ÿ ××”×™×¨ ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×š{{else}}Here's a quick update on your progress{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <!-- Big Progress Number -->
                            <div class="big-progress">
                                <div class="progress-circle">
                                    <div class="progress-circle-inner">
                                        <div class="progress-percentage">{{progressPercentage}}%</div>
                                        <div class="progress-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}</div>
                                    </div>
                                </div>
                            </div>

                            <p class="progress-text">
                                <strong>{{#if (eq locale 'he')}}×›×œ ×”×›×‘×•×“!{{else}}Great job!{{/if}}</strong> 
                                {{#if (eq locale 'he')}}×”×¤×¨×•×¤×™×œ ×©×œ×š ×›×‘×¨ ×‘-{{else}}Your profile is already at{{/if}} {{progressPercentage}}%.
                            </p>

                            <!-- Detailed Breakdown -->
                            <div class="breakdown-section">
                                <h3>
                                    {{#if (eq locale 'he')}}×¤×™×¨×•×˜ ×”×”×ª×§×“××•×ª:{{else}}Progress Breakdown:{{/if}}
                                </h3>
                                
                                <div class="breakdown-item">
                                    <div class="breakdown-header">
                                        <span class="breakdown-name">
                                            ğŸ“¸ {{#if (eq locale 'he')}}×ª××•× ×•×ª{{else}}Photos{{/if}}
                                        </span>
                                        <span class="breakdown-value {{#if photosComplete}}complete{{else}}incomplete{{/if}}">
                                            {{photosCount}}/3
                                        </span>
                                    </div>
                                    <div class="breakdown-bar">
                                        <div class="breakdown-bar-fill {{#if photosComplete}}complete{{else}}incomplete{{/if}}" style="width: {{photosPercent}}%;"></div>
                                    </div>
                                </div>

                                <div class="breakdown-item">
                                    <div class="breakdown-header">
                                        <span class="breakdown-name">
                                            ğŸ“ {{#if (eq locale 'he')}}×©××œ×•×Ÿ{{else}}Questionnaire{{/if}}
                                        </span>
                                        <span class="breakdown-value {{#if questionnaireComplete}}complete{{else}}incomplete{{/if}}">
                                            {{questionnairePercent}}%
                                        </span>
                                    </div>
                                    <div class="breakdown-bar">
                                        <div class="breakdown-bar-fill {{#if questionnaireComplete}}complete{{else}}incomplete{{/if}}" style="width: {{questionnairePercent}}%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Next Action -->
                            <div class="next-action-box">
                                <h3>
                                    ğŸš€ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×‘× ×©×œ×š{{else}}Your Next Step{{/if}}
                                </h3>
                                <p>{{nextAction}}</p>
                                <p class="milestone-text">
                                    {{#if (eq locale 'he')}}
                                        ×–×” ×™×™×§×— ×¨×§ <strong>{{estimatedTime}}</strong> ×•×™×§×¤×™×¥ ××•×ª×š ×œ-<strong>{{nextMilestone}}%</strong>!
                                    {{else}}
                                        This will only take <strong>{{estimatedTime}}</strong> and will get you to <strong>{{nextMilestone}}%</strong>!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <div class="cta-section">
                                <a href="{{ctaLink}}" class="cta-button">
                                    {{ctaText}} ğŸ’ª
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for progressUpdate.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\reengagement.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×–×•×›×¨/×ª ××•×ª× ×•?{{else}}Remember us?{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .header-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 15px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 25px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .progress-reminder-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%);
            border-radius: 16px;
            padding: 28px;
            margin: 25px 0;
            border: 2px solid #3b82f6;
        }
        
        .progress-reminder-box h3 {
            color: #1e40af;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }
        
        .progress-circle-wrapper {
            text-align: center;
            margin: 20px 0;
        }
        
        .progress-circle {
            display: inline-block;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            position: relative;
        }
        
        .progress-circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 42px;
            font-weight: 900;
            line-height: 1;
        }
        
        .progress-label {
            font-size: 13px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .whats-new-box {
            background: #f0fdf4;
            border-radius: 16px;
            padding: 24px;
            margin: 25px 0;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #10b981;
        }
        
        .whats-new-box h3 {
            color: #166534;
            margin: 0 0 15px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .whats-new-box ul {
            color: #15803d;
            margin: 0;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px;
            line-height: 1.8;
        }
        
        .whats-new-box li {
            margin-bottom: 10px;
        }
        
        .whats-new-box li strong {
            color: #14532d;
        }
        
        .next-step-box {
            background: linear-gradient(to {{#if (eq locale 'he')}}left{{else}}right{{/if}}, #fef3c7, #fed7aa);
            border-radius: 16px;
            padding: 4px;
            margin: 30px 0;
        }
        
        .next-step-inner {
            background: white;
            border-radius: 12px;
            padding: 24px;
        }
        
        .next-step-inner h3 {
            color: #92400e;
            margin: 0 0 15px 0;
            font-size: 19px;
            font-weight: 700;
            text-align: center;
        }
        
        .next-step-inner p {
            color: #78350f;
            margin: 0;
            font-size: 17px;
            line-height: 1.6;
            text-align: center;
            font-weight: 500;
        }
        
        .time-estimate {
            color: #a16207;
            margin: 15px 0 0 0;
            font-size: 14px;
            text-align: center;
        }
        
        .cta-section {
            margin: 35px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 18px;
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .help-text {
            font-size: 14px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
            text-align: center;
        }
        
        .email-footer {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 0;
            border-top: 1px solid #d1d5db;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 26px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 16px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="header-icon">ğŸ’Œ</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ×–×•×›×¨/×ª ××•×ª× ×•?
                                {{else}}
                                    {{firstName}}, remember us?
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}×¢×‘×¨ ×§×¦×ª ×–××Ÿ ×××– ×©×“×™×‘×¨× ×•...{{else}}It's been a while since we talked...{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×”×™×™{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×¢×‘×¨×• {{daysSinceActive}} ×™××™× ×××– ×©×¤×¢×œ×ª ×‘××¢×¨×›×ª. ×× ×—× ×• ××‘×™× ×™× - ×”×—×™×™× ×¢×¡×•×§×™×. ××‘×œ ×¨×¦×™× ×• ×œ×”×–×›×™×¨ ×œ×š ×©××ª/×” ×œ× ×œ×‘×“ ×‘××¡×¢ ×”×–×”.
                                {{else}}
                                    It's been {{daysSinceActive}} days since you were last active. We get it - life is busy. But we wanted to remind you that you're not alone on this journey.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div class="progress-reminder-box">
                                <h3>
                                    ğŸ“Œ {{#if (eq locale 'he')}}××™×¤×” ×”×¤×¡×§× ×•?{{else}}Where did we leave off?{{/if}}
                                </h3>
                                <div class="progress-circle-wrapper">
                                    <div class="progress-circle">
                                        <div class="progress-circle-inner">
                                            <div class="progress-percentage">{{progressPercentage}}%</div>
                                            <div class="progress-label">{{#if (eq locale 'he')}}×”×•×©×œ×{{else}}Complete{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- What's New -->
                            <div class="whats-new-box">
                                <h3>
                                    âœ¨ {{#if (eq locale 'he')}}××” ×—×“×© ×××–{{else}}What's new since you've been away{{/if}}
                                </h3>
                                <ul>
                                    <li>
                                        {{#if (eq locale 'he')}}
                                            ×©×™×¤×¨× ×• ××ª ×× ×•×¢ ×”×”×ª×××•×ª - <strong>×™×•×ª×¨ ××“×•×™×§ ××ª××™×“</strong>
                                        {{else}}
                                            We've improved our matching engine - <strong>more accurate than ever</strong>
                                        {{/if}}
                                    </li>
                                    <li>
                                        {{#if (eq locale 'he')}}
                                            ×”×•×¡×¤× ×• ×ª×•×‘× ×•×ª AI ××ª×§×“××•×ª ×œ×›×œ ×¤×¨×•×¤×™×œ
                                        {{else}}
                                            We've added advanced AI insights to every profile
                                        {{/if}}
                                    </li>
                                    <li>
                                        {{newUsersCount}}+ {{#if (eq locale 'he')}}××©×ª××©×™× ×—×“×©×™× ×”×¦×˜×¨×¤×• ×”×—×•×“×©{{else}}new users joined this month{{/if}}
                                    </li>
                                </ul>
                            </div>

                            <!-- Next Step -->
                            <div class="next-step-box">
                                <div class="next-step-inner">
                                    <h3>
                                        ğŸ¯ {{#if (eq locale 'he')}}×”×¦×¢×“ ×”×‘× ×©×œ×š{{else}}Your Next Step{{/if}}
</h3>
<p>{{nextAction}}</p>
<p class="time-estimate">
{{#if (eq locale 'he')}}
×–×” ×™×™×§×— ×‘×¢×¨×š {{estimatedTime}} - × ×©××¢ ×¡×‘×™×¨?
{{else}}
This should take about {{estimatedTime}} - sound good?
{{/if}}
</p>
</div>
</div>
                        <!-- CTA -->
                        <div class="cta-section">
                            <a href="{{ctaLink}}" class="cta-button">
                                {{#if (eq locale 'he')}}×‘×•×/×™ × ××©×™×š ×××™×¤×” ×©×¢×¦×¨× ×• ğŸ’ª{{else}}Let's continue where we left off ğŸ’ª{{/if}}
                            </a>
                        </div>

                        <p class="help-text">
                            {{#if (eq locale 'he')}}
                                ×× ×™×© ××©×”×• ×©××•× ×¢ ×××š ×œ×”××©×™×š, × ×©××— ×œ×“×¢×ª.<br>×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×•×× ×—× ×• × ×¢×–×•×¨ ×œ×š.
                            {{else}}
                                If something is preventing you from continuing, we'd love to know.<br>Just reply to this email, and we'll help.
                            {{/if}}
                        </p>
                    </td>
                </tr>

                <!-- Footer -->
                <tr>
                    <td class="email-footer">
                        <table role="presentation" style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td class="footer-content">
                                    <div class="footer-logo">
                                        <img 
                                            src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                            alt="NeshamaTech Logo"
                                        />
                                    </div>
                                    
                                    <div class="footer-company-name">
                                        <span>NeshamaTech</span>
                                    </div>
                                    
                                    <p class="footer-tagline">
                                        {{#if (eq locale 'he')}}
                                            ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                        {{else}}
                                            Connecting Hearts, Building Shared Futures
                                        {{/if}}
                                    </p>
                                    
                                    <div class="footer-contact">
                                        <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                        <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                        <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                    </div>
                                    
                                    <div class="footer-social">
                                        <a href="#" title="Facebook">ğŸ“˜</a>
                                        <a href="#" title="Instagram">ğŸ“·</a>
                                        <a href="#" title="Twitter">ğŸ¦</a>
                                    </div>
                                    
                                    <p class="footer-copyright">
                                        Â© {{currentYear}} NeshamaTech. 
                                        {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                    </p>
                                    
                                    <p class="footer-legal">
                                        <a href="{{baseUrl}}/privacy">
                                            {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                        </a> | 
                                        <a href="{{baseUrl}}/terms">
                                            {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                        </a>
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
            </table>
        </td>
    </tr>
</table>
</body>
</html>
--- End of Content for reengagement.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\welcome.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}×‘×¨×•×›×™× ×”×‘××™× ×œ-NeshamaTech{{else}}Welcome to NeshamaTech{{/if}}</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            direction: {{getDir locale}};
        }
        
        .email-wrapper {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
            overflow: hidden;
        }
        
        .email-header {
            background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%);
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }
        
        .email-header h1 {
            color: white;
            margin: 0;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .celebration-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .email-header p {
            color: rgba(255,255,255,0.95);
            margin: 12px 0 0 0;
            font-size: 17px;
            font-weight: 500;
        }
        
        .email-body {
            padding: 40px 30px;
        }
        
        .email-body p {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin: 0 0 20px 0;
        }
        
        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }
        
        .welcome-box {
            background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .welcome-box h2 {
            color: #5a67d8;
            margin: 0 0 15px 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .welcome-box ul {
            color: #4a5568;
            margin: 0;
            padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px;
            line-height: 1.8;
        }
        
        .welcome-box li {
            margin-bottom: 10px;
        }
        
        .welcome-box li strong {
            color: #1e293b;
        }
        
        .tip-box {
            background: #fef3c7;
            border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 20px 0;
        }
        
        .tip-box p {
            margin: 0;
            color: #78350f;
            line-height: 1.7;
        }
        
        .tip-box strong {
            color: #92400e;
        }
        
        .cta-section {
            margin: 30px 0;
            text-align: center;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s;
        }
        
        .cta-button:hover {
            transform: scale(1.05);
        }
        
        .help-text {
            font-size: 15px;
            color: #718096;
            margin: 25px 0 0 0;
            line-height: 1.6;
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        
        .email-footer {
            background: #f7fafc;
            padding: 0;
            border-top: 2px solid #e5e7eb;
        }
        
        .footer-content {
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-logo {
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 50px;
            width: auto;
            display: inline-block;
        }
        
        .footer-company-name {
            margin-bottom: 15px;
        }
        
        .footer-company-name span {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #0891b2, #f97316, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer-tagline {
            color: #6b7280;
            font-size: 14px;
            margin: 10px 0 20px 0;
            font-style: italic;
        }
        
        .footer-contact {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer-contact p {
            margin: 5px 0;
            color: #4b5563;
            font-size: 13px;
        }
        
        .footer-contact a {
            color: #06b6d4;
            text-decoration: none;
        }
        
        .footer-social {
            margin: 20px 0;
        }
        
        .footer-social a {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            text-decoration: none;
        }
        
        .footer-copyright {
            color: #9ca3af;
            font-size: 12px;
            margin: 15px 0 5px 0;
        }
        
        .footer-legal {
            color: #9ca3af;
            font-size: 11px;
            margin: 5px 0;
        }
        
        .footer-legal a {
            color: #6b7280;
            text-decoration: none;
            margin: 0 5px;
        }
        
        @media only screen and (max-width: 600px) {
            .email-wrapper {
                padding: 20px 10px;
            }
            
            .email-header {
                padding: 30px 20px;
            }
            
            .email-header h1 {
                font-size: 26px;
            }
            
            .email-body {
                padding: 30px 20px;
            }
            
            .cta-button {
                padding: 14px 35px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td class="email-wrapper">
                <table role="presentation" class="email-container" style="width: 100%; max-width: 600px; margin: 0 auto;">
                    
                    <!-- Header -->
                    <tr>
                        <td class="email-header">
                            <div class="celebration-icon">ğŸ‰</div>
                            <h1>
                                {{#if (eq locale 'he')}}
                                    ×‘×¨×•×š ×”×‘× ×œ-NeshamaTech!
                                {{else}}
                                    Welcome to NeshamaTech!
                                {{/if}}
                            </h1>
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×”××¡×¢ ×©×œ×š ×œ×”×ª×××” ××•×©×œ××ª ××ª×—×™×œ ×›××Ÿ
                                {{else}}
                                    Your journey to the perfect match starts here
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Body -->
                    <tr>
                        <td class="email-body">
                            <p class="greeting">
                                {{#if (eq locale 'he')}}×©×œ×•×{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p>
                                {{#if (eq locale 'he')}}
                                    ×›××” ××¨×’×©! ×”×¦×˜×¨×¤×ª ×œ××©×¤×—×ª NeshamaTech - ××¢×¨×›×ª ×”×©×™×“×•×›×™× ×”×—×›××” ×©××©×œ×‘×ª ×˜×›× ×•×œ×•×’×™×” ××ª×§×“××ª ×¢× ×”×‘×™× ×” ×•×”×—×•× ×”×× ×•×©×™×™× ×©×œ ×©×“×›× ×™× ××§×¦×•×¢×™×™×.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family - the smart matchmaking system that combines advanced technology with the human wisdom and warmth of professional matchmakers.
                                {{/if}}
                            </p>

                            <!-- What's Next -->
                            <div class="welcome-box">
                                <h2>
                                    ğŸ’¡ {{#if (eq locale 'he')}}××” ×”×œ××”?{{else}}What's next?{{/if}}
                                </h2>
                                <ul>
                                    <li>
                                        <strong>{{#if (eq locale 'he')}}×”×©×œ× ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×š{{else}}Complete your profile{{/if}}</strong> - 
                                        {{#if (eq locale 'he')}}
                                            ×›×›×œ ×©× ×“×¢ ×¢×œ×™×š ×™×•×ª×¨, ×›×š × ×•×›×œ ×œ××¦×•× ×œ×š ×”×ª×××” ×˜×•×‘×” ×™×•×ª×¨
                                        {{else}}
                                            the more we know about you, the better we can find a match
                                        {{/if}}
                                    </li>
                                    <li>
                                        <strong>{{#if (eq locale 'he')}}×”×•×¡×£ ×ª××•× ×•×ª{{else}}Add photos{{/if}}</strong> - 
                                        {{#if (eq locale 'he')}}
                                            ×ª××•× ×” ×©×•×•×” ××œ×£ ××™×œ×™×, ×•-3 ×ª××•× ×•×ª? ×–×” ×”×¨×‘×” ×™×•×ª×¨!
                                        {{else}}
                                            a picture is worth a thousand words, and 3 pictures? Even more!
                                        {{/if}}
                                    </li>
                                </ul>
                            </div>

                            <!-- Important Tip -->
                            <div class="tip-box">
                                <p>
                                    <strong>{{#if (eq locale 'he')}}×˜×™×¤ ×—×©×•×‘:{{else}}Important tip:{{/if}}</strong> 
                                    {{#if (eq locale 'he')}}
                                        ×¤×¨×•×¤×™×œ×™× ××œ××™× ××§×‘×œ×™× ×¤×™ 3 ×™×•×ª×¨ ×”×ª×××•×ª!
                                    {{else}}
                                        Complete profiles get 3 times more matches!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA Button -->
                            <div class="cta-section">
                                <a href="{{baseUrl}}/profile" class="cta-button">
                                    {{#if (eq locale 'he')}}×œ×”×©×œ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×™{{else}}Complete My Profile{{/if}}
                                </a>
                            </div>

                            <p class="help-text">
                                {{#if (eq locale 'he')}}
                                    ×™×© ×©××œ×•×ª? ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š! ×¤×©×•×˜ ×ª×©×™×‘ ×œ××™×™×œ ×”×–×”.
                                {{else}}
                                    Questions? We're here for you! Just reply to this email.
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="email-footer">
                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td class="footer-content">
                                        <div class="footer-logo">
                                            <img 
                                                src="https://res.cloudinary.com/dmfxoi6g0/image/upload/v1753713907/ChatGPT_Image_Jul_28_2025_05_45_00_PM_zueqou.png" 
                                                alt="NeshamaTech Logo"
                                            />
                                        </div>
                                        
                                        <div class="footer-company-name">
                                            <span>NeshamaTech</span>
                                        </div>
                                        
                                        <p class="footer-tagline">
                                            {{#if (eq locale 'he')}}
                                                ××—×‘×¨×™× ×œ×‘×‘×•×ª, ×‘×•× ×™× ×¢×ª×™×“ ××©×•×ª×£
                                            {{else}}
                                                Connecting Hearts, Building Shared Futures
                                            {{/if}}
                                        </p>
                                        
                                        <div class="footer-contact">
                                            <p><strong>{{#if (eq locale 'he')}}×¦×•×¨ ×§×©×¨:{{else}}Contact:{{/if}}</strong></p>
                                            <p>ğŸ“§ <a href="mailto:{{supportEmail}}">{{supportEmail}}</a></p>
                                            <p>ğŸŒ <a href="{{baseUrl}}">{{baseUrl}}</a></p>
                                        </div>
                                        
                                        <div class="footer-social">
                                            <a href="#" title="Facebook">ğŸ“˜</a>
                                            <a href="#" title="Instagram">ğŸ“·</a>
                                            <a href="#" title="Twitter">ğŸ¦</a>
                                        </div>
                                        
                                        <p class="footer-copyright">
                                            Â© {{currentYear}} NeshamaTech. 
                                            {{#if (eq locale 'he')}}×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª{{else}}All rights reserved{{/if}}
                                        </p>
                                        
                                        <p class="footer-legal">
                                            <a href="{{baseUrl}}/privacy">
                                                {{#if (eq locale 'he')}}××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª{{else}}Privacy Policy{{/if}}
                                            </a> | 
                                            <a href="{{baseUrl}}/terms">
                                                {{#if (eq locale 'he')}}×ª× ××™ ×©×™××•×©{{else}}Terms of Service{{/if}}
                                            </a>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for welcome.hbs ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\whatsapp
================================================================================

(This directory is empty.)

