################################################################################
# Directory Content Map For: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
# Generated on: 2025-10-09 16:06:04
################################################################################

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\SmartEngagementOrchestrator.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/SmartEngagementOrchestrator.ts
// üéØ OPTIMIZED VERSION - AI only when needed

import prisma from '@/lib/prisma';
import { CampaignStatus, Language, User } from '@prisma/client';
import aiService from '@/lib/services/aiService';
import profileAiService from '@/lib/services/profileAiService';
import { profileFeedbackService } from '@/lib/services/profileFeedbackService';
import { getEmailDictionary } from '@/lib/dictionaries';
import type { EmailDictionary } from '@/types/dictionaries/email';

interface UserEngagementProfile {
  userId: string;
  firstName: string;
  daysInSystem: number;
  completionStatus: {
    overall: number;
    photos: { current: number; needed: number; isDone: boolean };
    personalDetails: { missing: string[]; isDone: boolean };
    partnerPreferences: { missing: string[]; isDone: boolean };
    questionnaire: {
      completionPercent: number;
      worldsStatus: Array<{ world: string; completed: number; total: number; isDone: boolean; }>;
    };
    hasSeenPreview: boolean;
  };
  aiInsights: {
    personalitySummary?: string;
    lookingForSummary?: string;
    topStrengths: string[];
    topGaps: string[];
  } | null;
  lastEmailSent?: Date;
  lastEmailType?: string;
  emailsSentCount: number;
  lastActiveDate?: Date;
  triggers: {
    stagnant?: boolean;
    almostDone?: boolean;
  };
}

interface EmailToSend {
  type: 'ONBOARDING' | 'NUDGE' | 'CELEBRATION' | 'INSIGHT' | 'VALUE' | 'EVENING_FEEDBACK' | 'AI_SUMMARY';
  priority: 'HIGH' | 'NORMAL' | 'LOW';
  subject: string;
  content: {
    hook: string;
    mainMessage: string;
    aiContent?: string;
    specificAction?: string;
    progressVisualization?: string;
    encouragement: string;
    systemSummary?: string;
    aiInsight?: string;
    todayProgress?: {
      itemsCompleted: string[];
      newCompletion: number;
    };
  };
  sendInDays: number;
}

function populateTemplate(template: string, data: Record<string, any>): string {
  if (!template) return '';
  let result = template;
  for (const key in data) {
    result = result.replace(new RegExp(`{{${key}}}`, 'g'), String(data[key]));
  }
  return result;
}

export class SmartEngagementOrchestrator {

  // ========== Test Methods ==========
  
  static async testBuildUserEngagementProfile(userId: string) {
    return this.buildUserEngagementProfile(userId, false);
  }

  static async testDetectDailyActivity(userId: string) {
    return this.detectDailyActivity(userId);
  }

  static async testGetEveningFeedbackEmail(
    profile: UserEngagementProfile,
    dailyActivity: Awaited<ReturnType<typeof SmartEngagementOrchestrator.detectDailyActivity>>,
    dict: EmailDictionary
  ) {
    return this.getEveningFeedbackEmail(profile, dailyActivity, dict);
  }

  // ========== Main Campaign Methods ==========
  
  static async runDailyCampaign() {
    console.log('üöÄ [Smart Engagement] Starting daily campaign run...');
    const usersToProcess = await this.getActiveUsers();
    console.log(`üìä [Smart Engagement] Found ${usersToProcess.length} users to process`);
    
    let emailsSent = 0;
    
    for (const user of usersToProcess) {
      try {
        // ‚úÖ STEP 1: Build profile WITHOUT expensive AI
        const profile = await this.buildUserEngagementProfile(user.id, false); // false = no AI yet
        const dict = await getEmailDictionary(user.language as Language);
        
        // ‚úÖ STEP 2: Decide if email is needed (cheap check)
        const emailType = await this.determineEmailType(profile, dict);
        
        if (!emailType) {
          console.log(`‚è≠Ô∏è [Smart Engagement] No email needed for user ${user.id} at this time`);
          continue; // üéØ Skip expensive AI if no email needed!
        }
        
        // ‚úÖ STEP 3: Only NOW get AI insights if needed
        const needsAI = emailType === 'AI_SUMMARY' || emailType === 'INSIGHT';
        if (needsAI && !profile.aiInsights) {
          console.log(`üß† [Smart Engagement] Fetching AI insights for ${emailType} email...`);
          await this.loadAiInsights(profile, user.language as Language);
        }
        
        // ‚úÖ STEP 4: Generate the actual email
        const emailToSend = await this.generateEmail(emailType, profile, dict);
        
        if (emailToSend) {
          await this.sendEmail(user, emailToSend);
          await this.updateCampaignRecord(user.id, emailToSend.type);
          emailsSent++;
          console.log(`‚úÖ [Smart Engagement] Sent ${emailToSend.type} email to user ${user.id}`);
        }
        
      } catch (error) {
        console.error(`‚ùå [Smart Engagement] Error processing user ${user.id}:`, error);
      }
    }
    
    console.log(`üéâ [Smart Engagement] Campaign complete. Sent ${emailsSent} emails.`);
    return { processed: usersToProcess.length, sent: emailsSent };
  }

  static async runEveningCampaign() {
    console.log('üåô [Smart Engagement] Starting evening feedback campaign run...');
    const usersToProcess = await this.getTodaysActiveUsers();
    console.log(`üìä [Smart Engagement] Found ${usersToProcess.length} active users today`);
    
    let emailsSent = 0;
    
    for (const user of usersToProcess) {
      try {
        const profile = await this.buildUserEngagementProfile(user.id, false);
        const dict = await getEmailDictionary(user.language as Language);
        const dailyActivity = await this.detectDailyActivity(profile.userId);
        
        if (!dailyActivity.hasActivity) {
          console.log(`‚è≠Ô∏è [Smart Engagement] No activity detected for user ${user.id}, skipping.`);
          continue;
        }
        
        const emailToSend = await this.getEveningFeedbackEmail(profile, dailyActivity, dict);
        
        if (emailToSend) {
          await this.sendEmail(user, emailToSend);
          await this.updateCampaignRecord(user.id, emailToSend.type);
          emailsSent++;
          console.log(`‚úÖ [Smart Engagement] Sent EVENING_FEEDBACK to user ${user.id}`);
        }
        
      } catch (error) {
        console.error(`‚ùå [Smart Engagement] Error processing user ${user.id}:`, error);
      }
    }
    
    console.log(`üéâ [Smart Engagement] Evening campaign complete. Sent ${emailsSent} emails.`);
    return { processed: usersToProcess.length, sent: emailsSent };
  }

  // ========== Core Logic Methods ==========
  
  private static async buildUserEngagementProfile(
    userId: string, 
    includeAI: boolean = false // üéØ New parameter
  ): Promise<UserEngagementProfile> {
    const user = await prisma.user.findUnique({
      where: { id: userId },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
    
    if (!user) throw new Error(`User ${userId} not found`);

    const daysInSystem = Math.floor((Date.now() - user.createdAt.getTime()) / (1000 * 60 * 60 * 24));
   const feedbackReport = await profileFeedbackService.compileFeedbackReport(
    userId, 
    user.language as Language,
    undefined,  // questionsDict
    !includeAI  // üîç skipAI = true ◊õ◊©-includeAI = false
  );


    // üéØ AI is optional now
    let aiInsights: UserEngagementProfile['aiInsights'] = null;
    if (includeAI) {
      aiInsights = await this.getAiInsights(userId, user.language as Language);
    }

    const campaign = user.dripCampaign;
    const lastActiveDate = user.lastLogin || user.updatedAt;
    const daysSinceActive = Math.floor((Date.now() - lastActiveDate.getTime()) / (1000 * 60 * 60 * 24));

    return {
      userId,
      firstName: user.firstName,
      daysInSystem,
      completionStatus: {
        overall: feedbackReport.completionPercentage,
        photos: { 
          current: user.images.length, 
          needed: 3, 
          isDone: user.images.length >= 3 
        },
        personalDetails: { 
          missing: feedbackReport.missingProfileItems, 
          isDone: feedbackReport.missingProfileItems.length === 0 
        },
        partnerPreferences: { 
          missing: feedbackReport.missingProfileItems.filter(item => 
            item.includes('◊î◊¢◊ì◊§') || item.includes('◊û◊ó◊§◊©')
          ), 
          isDone: feedbackReport.missingProfileItems.filter(item => 
            item.includes('◊î◊¢◊ì◊§') || item.includes('◊û◊ó◊§◊©')
          ).length === 0 
        },
        questionnaire: {
          completionPercent: feedbackReport.completionPercentage,
          worldsStatus: feedbackReport.missingQuestionnaireItems.map(item => ({
            world: item.world,
            completed: 0,
            total: 19,
            isDone: false
          }))
        },
        hasSeenPreview: user.profile?.hasViewedProfilePreview || false
      },
      aiInsights,
      lastEmailSent: campaign?.updatedAt,
      lastEmailType: campaign?.lastSentType || undefined,
      emailsSentCount: campaign?.currentStep || 0,
      lastActiveDate,
      triggers: {
        stagnant: daysSinceActive >= 5,
        almostDone: feedbackReport.completionPercentage >= 90
      }
    };
  }

  // üÜï Separate method to load AI only when needed
  private static async loadAiInsights(
    profile: UserEngagementProfile, 
    language: Language
  ): Promise<void> {
    const aiInsights = await this.getAiInsights(profile.userId, language);
    profile.aiInsights = aiInsights;
  }

  private static async getAiInsights(
    userId: string, 
    language: Language
  ): Promise<UserEngagementProfile['aiInsights']> {
    const narrativeProfile = await profileAiService.generateNarrativeProfile(userId);
    if (!narrativeProfile) return null;

    const analysis = await aiService.getProfileAnalysis(narrativeProfile, language);
    if (!analysis) return null;

    return {
      personalitySummary: analysis.personalitySummary,
      lookingForSummary: analysis.lookingForSummary,
      topStrengths: analysis.completenessReport
        .filter(r => r.status === 'COMPLETE')
        .slice(0, 3)
        .map(r => r.feedback),
      topGaps: analysis.actionableTips
        .slice(0, 3)
        .map(t => t.tip)
    };
  }

  // üÜï Determine email type BEFORE expensive AI calls
  private static async determineEmailType(
    profile: UserEngagementProfile,
    dict: EmailDictionary
  ): Promise<string | null> {
    const { daysInSystem, completionStatus, triggers, lastEmailSent } = profile;

    // Check if it's too soon to send
    if (lastEmailSent) {
      const daysSinceLastEmail = Math.floor(
        (Date.now() - lastEmailSent.getTime()) / (1000 * 60 * 60 * 24)
      );
      if (daysSinceLastEmail < 3) {
        return null; // üéØ Exit early - save money!
      }
    }

    // Determine email type (no AI needed yet)
    if (daysInSystem <= 7) return 'ONBOARDING';
    if (triggers.almostDone) return 'CELEBRATION';
    if (triggers.stagnant) return 'NUDGE';
    if (!completionStatus.photos.isDone) return 'NUDGE';
    if (completionStatus.questionnaire.completionPercent < 50) return 'NUDGE';
    if (completionStatus.overall >= 40 && completionStatus.overall < 90) return 'AI_SUMMARY';
    if (daysInSystem % 14 === 0) return 'VALUE';
    
    return null;
  }

  // üÜï Generate email based on type
  private static async generateEmail(
    emailType: string,
    profile: UserEngagementProfile,
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    switch (emailType) {
      case 'ONBOARDING':
        return this.getOnboardingEmail(profile, dict);
      case 'NUDGE':
        if (!profile.completionStatus.photos.isDone) {
          return this.getPhotoNudgeEmail(profile, dict);
        } else {
          return this.getQuestionnaireNudgeEmail(profile, dict);
        }
      case 'CELEBRATION':
        return this.getAlmostDoneEmail(profile, dict);
      case 'AI_SUMMARY':
        return this.getAiSummaryEmail(profile, dict);
      case 'VALUE':
        return this.getValueEmail(profile, dict);
      default:
        return null;
    }
  }

  // ========== Email Generators (existing methods) ==========
  
  private static getOnboardingEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const { daysInSystem, completionStatus } = profile;
    const { engagement } = dict;
    
    if (daysInSystem === 1) {
      const emailDict = engagement.onboardingDay1;
      return {
        type: 'ONBOARDING',
        priority: 'HIGH',
        subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
        content: {
          hook: emailDict.hook,
          mainMessage: emailDict.mainMessage,
          specificAction: this.getNextBestAction(profile),
          encouragement: emailDict.encouragement
        },
        sendInDays: 0
      };
    }
    
    // Add other onboarding days...
    return this.getOnboardingEmail(profile, dict); // Placeholder
  }

  private static getPhotoNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.photoNudge;
    const missingCount = 3 - profile.completionStatus.photos.current;
    
    return {
      type: 'NUDGE',
      priority: 'HIGH',
      subject: emailDict.subject,
      content: {
        hook: emailDict.hook,
        mainMessage: populateTemplate(emailDict.mainMessage, { missingCount }),
        specificAction: emailDict.specificAction,
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getQuestionnaireNudgeEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.questionnaireNudge;
    const { worldsStatus } = profile.completionStatus.questionnaire;
    const mostEmptyWorld = worldsStatus.sort((a, b) => a.completed - b.completed)[0] || { world: '◊õ◊ú◊ú◊ô' };
    
    return {
      type: 'NUDGE',
      priority: 'NORMAL',
      subject: emailDict.subject,
      content: {
        hook: populateTemplate(emailDict.hook, { firstName: profile.firstName }),
        mainMessage: populateTemplate(emailDict.mainMessage, { worldName: mostEmptyWorld.world }),
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getAlmostDoneEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const emailDict = dict.engagement.almostDone;
    
    return {
      type: 'CELEBRATION',
      priority: 'HIGH',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: populateTemplate(emailDict.hook, { completion: profile.completionStatus.overall }),
        mainMessage: emailDict.mainMessage,
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static async getAiSummaryEmail(
    profile: UserEngagementProfile, 
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    const { aiInsights, completionStatus } = profile;
    
    if (!aiInsights || completionStatus.overall < 40) return null;
    
    const emailDict = dict.engagement.aiSummary;
    return {
      type: 'AI_SUMMARY',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: emailDict.mainMessage,
        systemSummary: aiInsights.personalitySummary,
        aiInsight: aiInsights.lookingForSummary,
        specificAction: this.getNextBestAction(profile),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }

  private static getValueEmail(profile: UserEngagementProfile, dict: EmailDictionary): EmailToSend {
    const topics = dict.engagement.value;
    const topic = topics[Math.floor(Math.random() * topics.length)];
    
    return {
      type: 'VALUE',
      priority: 'LOW',
      subject: topic.subject,
      content: {
        hook: topic.hook,
        mainMessage: topic.mainMessage,
        encouragement: topic.encouragement
      },
      sendInDays: 0
    };
  }

  // ========== Helper Methods ==========
  
  private static getNextBestAction(profile: UserEngagementProfile): string {
    if (!profile.completionStatus.photos.isDone) {
      return `◊î◊¢◊ú◊î ${3 - profile.completionStatus.photos.current} ◊™◊û◊ï◊†◊ï◊™ ◊†◊ï◊°◊§◊ï◊™`;
    }
    if (profile.completionStatus.personalDetails.missing.length > 0) {
      return profile.completionStatus.personalDetails.missing[0];
    }
    if (profile.completionStatus.questionnaire.completionPercent < 80) {
      return '◊î◊©◊ú◊ù ◊ê◊™ ◊î◊©◊ê◊ú◊ï◊ü';
    }
    if (!profile.completionStatus.hasSeenPreview) {
      return '◊¢◊ô◊ô◊ü ◊ë◊™◊¶◊ï◊í◊î ◊î◊û◊ß◊ì◊ô◊û◊î ◊©◊ú ◊î◊§◊®◊ï◊§◊ô◊ú';
    }
    return '◊î◊§◊®◊ï◊§◊ô◊ú ◊õ◊û◊¢◊ò ◊û◊ï◊©◊ú◊ù!';
  }

  private static generateProgressBar(percentage: number): string {
    const filled = Math.floor(percentage / 10);
    const empty = 10 - filled;
    return '‚ñà'.repeat(filled) + '‚ñë'.repeat(empty) + ` ${percentage}%`;
  }

  private static async getActiveUsers() {
    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        marketingConsent: true,
        isProfileComplete: false
      },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
  }

  private static async getTodaysActiveUsers() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    return await prisma.user.findMany({
      where: {
        status: 'ACTIVE',
        marketingConsent: true,
        isProfileComplete: false,
        OR: [
          { lastLogin: { gte: today } },
          { updatedAt: { gte: today } },
          { questionnaireResponses: { some: { lastSaved: { gte: today } } } }
        ]
      },
      include: {
        profile: true,
        images: true,
        questionnaireResponses: { take: 1, orderBy: { lastSaved: 'desc' } },
        dripCampaign: true
      }
    });
  }

  private static async detectDailyActivity(userId: string): Promise<{
    hasActivity: boolean;
    completedToday: string[];
    progressDelta: number;
  }> {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const recentUpdates = await prisma.profile.findUnique({
      where: { userId },
      select: {
        updatedAt: true,
        user: {
          select: {
            questionnaireResponses: {
              where: { lastSaved: { gte: today } },
              orderBy: { lastSaved: 'desc' },
              take: 1
            },
            images: {
              where: { createdAt: { gte: today } }
            }
          }
        }
      }
    });
    
    const hasActivity = (
      (recentUpdates?.updatedAt && recentUpdates.updatedAt >= today) ||
      (recentUpdates?.user.questionnaireResponses.length ?? 0) > 0 ||
      (recentUpdates?.user.images.length ?? 0) > 0
    );
    
    const completedToday: string[] = [];
    
    if (recentUpdates?.user.images.length) {
      completedToday.push(`${recentUpdates.user.images.length} ◊™◊û◊ï◊†◊ï◊™ ◊ó◊ì◊©◊ï◊™`);
    }
    if (recentUpdates?.user.questionnaireResponses.length) {
      completedToday.push('◊î◊™◊ß◊ì◊û◊ï◊™ ◊ë◊©◊ê◊ú◊ï◊ü');
    }
    if (recentUpdates?.updatedAt && recentUpdates.updatedAt >= today) {
      completedToday.push('◊¢◊ì◊õ◊ï◊ü ◊§◊®◊ï◊§◊ô◊ú');
    }
    
    return { hasActivity, completedToday, progressDelta: 0 };
  }

  private static async getEveningFeedbackEmail(
    profile: UserEngagementProfile,
    dailyActivity: Awaited<ReturnType<typeof SmartEngagementOrchestrator.detectDailyActivity>>,
    dict: EmailDictionary
  ): Promise<EmailToSend | null> {
    if (!dailyActivity.hasActivity) return null;
    
    const emailDict = dict.engagement.eveningFeedback;
    
    return {
      type: 'EVENING_FEEDBACK',
      priority: 'NORMAL',
      subject: populateTemplate(emailDict.subject, { firstName: profile.firstName }),
      content: {
        hook: emailDict.hook,
        mainMessage: emailDict.mainMessage,
        todayProgress: {
          itemsCompleted: dailyActivity.completedToday,
          newCompletion: dailyActivity.progressDelta
        },
        systemSummary: profile.aiInsights?.personalitySummary 
          ? populateTemplate(emailDict.systemSummary || '', { 
              summary: profile.aiInsights.personalitySummary.slice(0, 200) 
            })
          : undefined,
        aiInsight: profile.aiInsights?.topStrengths[0],
        specificAction: this.getNextBestAction(profile),
        progressVisualization: this.generateProgressBar(profile.completionStatus.overall),
        encouragement: emailDict.encouragement
      },
      sendInDays: 0
    };
  }
private static getEstimatedTime(profile: UserEngagementProfile, locale: Language = 'he'): string {
  const { completionStatus } = profile;
  
  // ◊ê◊ù ◊ó◊°◊®◊ï◊™ ◊™◊û◊ï◊†◊ï◊™ - ◊ñ◊î ◊î◊õ◊ô ◊û◊î◊ô◊®
  if (!completionStatus.photos.isDone) {
    const missingPhotos = 3 - completionStatus.photos.current;
    return locale === 'he' 
      ? `${missingPhotos * 2}-${missingPhotos * 3} ◊ì◊ß◊ï◊™` 
      : `${missingPhotos * 2}-${missingPhotos * 3} minutes`;
  }
  
  // ◊ê◊ù ◊ó◊°◊®◊ô◊ù ◊§◊®◊ò◊ô◊ù ◊ê◊ô◊©◊ô◊ô◊ù
  if (completionStatus.personalDetails.missing.length > 0) {
    const missingCount = completionStatus.personalDetails.missing.length;
    if (missingCount <= 3) {
      return locale === 'he' ? '3-5 ◊ì◊ß◊ï◊™' : '3-5 minutes';
    } else {
      return locale === 'he' ? '5-10 ◊ì◊ß◊ï◊™' : '5-10 minutes';
    }
  }
  
  // ◊ê◊ù ◊î◊©◊ê◊ú◊ï◊ü ◊ú◊ê ◊û◊ú◊ê
  if (completionStatus.questionnaire.completionPercent < 100) {
    const remaining = 100 - completionStatus.questionnaire.completionPercent;
    if (remaining < 30) {
      return locale === 'he' ? '5-8 ◊ì◊ß◊ï◊™' : '5-8 minutes';
    } else if (remaining < 60) {
      return locale === 'he' ? '10-15 ◊ì◊ß◊ï◊™' : '10-15 minutes';
    } else {
      return locale === 'he' ? '15-20 ◊ì◊ß◊ï◊™' : '15-20 minutes';
    }
  }
  
  // ◊ê◊ù ◊ó◊°◊®◊ï◊™ ◊î◊¢◊ì◊§◊ï◊™ ◊ë◊ü/◊ë◊™ ◊ñ◊ï◊í
  if (completionStatus.partnerPreferences.missing.length > 0) {
    return locale === 'he' ? '5-7 ◊ì◊ß◊ï◊™' : '5-7 minutes';
  }
  
  // ◊ë◊®◊ô◊®◊™ ◊û◊ó◊ì◊ú
  return locale === 'he' ? '5 ◊ì◊ß◊ï◊™' : '5 minutes';
}

 private static async sendEmail(user: User, email: EmailToSend) {
  const { emailService } = await import('./emailService');
  const locale = user.language || 'he';
  
  try {
    let success = false;
    
    if (email.type === 'AI_SUMMARY') {
      success = await emailService.sendTemplateEmail({
        locale: locale as Language,
        to: user.email!,
        subject: email.subject,
        templateName: 'aiInsight',
        context: {
          firstName: user.firstName,
          personalitySummary: email.content.systemSummary
        }
      });
    } else if (email.type === 'EVENING_FEEDBACK') {
      // üî• ◊õ◊ê◊ü ◊î◊™◊ô◊ß◊ï◊ü - ◊ó◊ô◊©◊ï◊ë ◊ì◊ô◊†◊û◊ô ◊©◊ú ◊î◊ñ◊û◊ü
      const profile = await this.buildUserEngagementProfile(user.id, false);
      const estimatedTime = this.getEstimatedTime(profile, locale as Language);
      
      success = await emailService.sendTemplateEmail({
        locale: locale as Language,
        to: user.email!,
        subject: email.subject,
        templateName: 'evening_feedback',
        context: {
          firstName: user.firstName,
          progressPercentage: email.content.progressVisualization?.match(/\d+/)?.[0] || '0',
          todayCompletedItems: email.content.todayProgress?.itemsCompleted || [],
          systemSummary: email.content.systemSummary,
          aiInsight: email.content.aiInsight,
          nextAction: email.content.specificAction,
          estimatedTime: estimatedTime, // üéØ ◊¢◊õ◊©◊ô◊ï ◊ì◊ô◊†◊û◊ô!
          ctaLink: `${process.env.NEXT_PUBLIC_BASE_URL}/profile`,
          ctaText: locale === 'he' ? '◊ú◊î◊û◊©◊ö ◊ë◊†◊ô◊ô◊™ ◊î◊§◊®◊ï◊§◊ô◊ú' : 'Continue building profile'
        }
      });
    } else {
      // ◊¢◊ë◊ï◊® ◊û◊ô◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ô◊ù
      const profile = await this.buildUserEngagementProfile(user.id, false);
      const estimatedTime = this.getEstimatedTime(profile, locale as Language);
      
      success = await emailService.sendCustomEmail(
        user.email!,
        email.subject,
        'generic',
        {
          firstName: user.firstName,
          headerTitle: email.content.hook,
          mainMessage: email.content.mainMessage,
          encouragement: email.content.encouragement,
          specificAction: email.content.specificAction,
          estimatedTime: estimatedTime, // ◊í◊ù ◊õ◊ê◊ü ◊ì◊ô◊†◊û◊ô
          ctaLink: `${process.env.NEXT_PUBLIC_BASE_URL}/profile`,
          ctaText: locale === 'he' ? '◊ú◊î◊û◊©◊ö ◊ë◊†◊ô◊ô◊™ ◊î◊§◊®◊ï◊§◊ô◊ú' : 'Continue building profile'
        },
        locale as Language
      );
    }
    
    if (success) {
      console.log(`üìß Successfully sent ${email.type} email to ${user.email} in ${locale}`);
    }
  } catch (error) {
    console.error(`‚ùå Error in sendEmail for user ${user.id}:`, error);
  }
}

  private static async updateCampaignRecord(userId: string, emailType: string) {
    const updateData: any = {
      currentStep: { increment: 1 },
      lastSentType: emailType,
      updatedAt: new Date()
    };
    
    if (emailType === 'EVENING_FEEDBACK') {
      updateData.lastEveningEmailSent = new Date();
      updateData.eveningEmailsCount = { increment: 1 };
    }
    
    if (emailType === 'AI_SUMMARY') {
      updateData.lastAiSummarySent = new Date();
      updateData.aiSummaryCount = { increment: 1 };
    }
    
    await prisma.userDripCampaign.upsert({
      where: { userId },
      update: updateData,
      create: {
        userId,
        currentStep: 1,
        lastSentType: emailType,
        nextSendDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000),
        status: 'ACTIVE',
        ...(emailType === 'EVENING_FEEDBACK' && {
          lastEveningEmailSent: new Date(),
          eveningEmailsCount: 1
        }),
        ...(emailType === 'AI_SUMMARY' && {
          lastAiSummarySent: new Date(),
          aiSummaryCount: 1
        })
      }
    });
  }
}

export default SmartEngagementOrchestrator;
--- End of Content for SmartEngagementOrchestrator.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\emailService.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/emailService.ts

import nodemailer from 'nodemailer';
import Handlebars from 'handlebars';
import fs from 'fs';
import path from 'path';

/**
 * üìß ◊©◊ô◊®◊ï◊™ ◊û◊ô◊ô◊ú◊ô◊ù ◊û◊©◊ï◊§◊® ◊¢◊ù ◊™◊û◊ô◊õ◊î ◊ë◊™◊ë◊†◊ô◊ï◊™ Handlebars ◊ï◊™◊û◊ô◊õ◊î ◊ì◊ï-◊ú◊©◊ï◊†◊ô◊™
 */

// ‚úÖ ◊®◊ô◊©◊ï◊ù Handlebars Helpers
Handlebars.registerHelper('eq', function(a, b) {
  return a === b;
});

Handlebars.registerHelper('getDir', function(locale: string) {
  return locale === 'he' ? 'rtl' : 'ltr';
});

interface EmailData {
  to: string;
  subject: string;
  templateName: string;
  context: Record<string, any>;
  locale?: 'he' | 'en';
}

class EmailService {
  private transporter: nodemailer.Transporter;
  private templatesCache: Map<string, HandlebarsTemplateDelegate> = new Map();

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });

    this.transporter.verify((error) => {
      if (error) {
        console.error('‚ùå Email service initialization failed:', error);
      } else {
        console.log('‚úÖ Email service ready');
      }
    });
  }

  private loadTemplate(templateName: string): HandlebarsTemplateDelegate {
    if (this.templatesCache.has(templateName)) {
      return this.templatesCache.get(templateName)!;
    }

    const templatePath = path.join(
      process.cwd(),
      'src',
      'lib',
      'engagement',
      'templates',
      'email',
      `${templateName}.hbs`
    );

    if (!fs.existsSync(templatePath)) {
      throw new Error(`Template not found: ${templateName} at ${templatePath}`);
    }

    const source = fs.readFileSync(templatePath, 'utf-8');
    const template = Handlebars.compile(source);
    this.templatesCache.set(templateName, template);
    return template;
  }

  async sendTemplateEmail(data: EmailData): Promise<boolean> {
    try {
      const enhancedContext = {
        ...data.context,
        baseUrl: process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000',
        currentYear: new Date().getFullYear(),
        locale: data.locale || 'he',
      };

      const template = this.loadTemplate(data.templateName);
      const htmlContent = template(enhancedContext);

      const info = await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: data.to,
        subject: data.subject,
        html: htmlContent,
      });

      console.log(`‚úÖ Email sent to ${data.to} | Template: ${data.templateName} | Lang: ${enhancedContext.locale} | ID: ${info.messageId}`);
      return true;

    } catch (error) {
      console.error(`‚ùå Failed to send email to ${data.to}:`, error);
      return false;
    }
  }

  async sendOnboardingDay1(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    completionData: {
      progressPercentage: number;
      completedItems: string[];
      missingItemsCount: number;
      nextAction: string;
      aiInsight?: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ◊ë◊®◊ï◊ö ◊î◊ë◊ê ◊ú-NeshamaTech! üéâ` 
        : `Welcome to NeshamaTech, ${user.firstName}! üéâ`,
      templateName: 'onboardingDay1',
      context: {
        firstName: user.firstName,
        ...user.completionData,
      },
      locale: user.locale,
    });
  }

  async sendProgressUpdate(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    progressData: {
      progressPercentage: number;
      aiLearning: string;
      photosCount: number;
      photosComplete: boolean;
      photosPercent: number;
      personalComplete: boolean;
      personalMissingCount: number;
      personalPercent: number;
      questionnaireComplete: boolean;
      questionnairePercent: number;
      preferencesComplete: boolean;
      preferencesMissingCount: number;
      preferencesPercent: number;
      nextAction: string;
      estimatedTime: string;
      nextMilestone: number;
      aiPersonalInsight?: string;
      ctaLink: string;
      ctaText: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ◊ê◊ô◊ö ◊û◊™◊ß◊ì◊û◊ô◊ù? üìä` 
        : `How's it going, ${user.firstName}? üìä`,
      templateName: 'progressUpdate',
      context: {
        firstName: user.firstName,
        ...user.progressData,
      },
      locale: user.locale,
    });
  }

  async sendAlmostDone(user: {
    locale: 'he' | 'en';
    email: string;
    firstName: string;
    celebrationData: {
      progressPercentage: number;
      remainingItem: string;
      estimatedTime: string;
      aiSummary?: string;
      ctaLink: string;
    };
  }): Promise<boolean> {
    return this.sendTemplateEmail({
      to: user.email,
      subject: user.locale === 'he' 
        ? `${user.firstName}, ◊ê◊™/◊î ◊õ◊û◊¢◊ò ◊©◊ù! üéä` 
        : `You're almost there, ${user.firstName}! üéä`,
      templateName: 'almostDone',
      context: {
        firstName: user.firstName,
        ...user.celebrationData,
      },
      locale: user.locale,
    });
  }

  async sendCustomEmail(
    to: string,
    subject: string,
    templateName: string,
    context: Record<string, any>,
    locale: 'he' | 'en' = 'he'
  ): Promise<boolean> {
    return this.sendTemplateEmail({
      to,
      subject,
      templateName,
      context,
      locale,
    });
  }

  clearTemplateCache(): void {
    this.templatesCache.clear();
    console.log('üì¶ Template cache cleared');
  }
}

export const emailService = new EmailService();
export default emailService;
--- End of Content for emailService.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\engagement_contents.txt
--------------------------------------------------------------------------------
[This is the output log file itself. Content not included.]

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\email.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/email.adapter.ts
import nodemailer from 'nodemailer';

export interface RecipientInfo {
  email: string;
  phone?: string | null;
  name: string;
}

export interface NotificationContent {
  subject: string;
  body: string; // For text-based channels like SMS or simple emails
  htmlBody?: string; // For rich HTML emails
}

export class EmailAdapter {
  private transporter: nodemailer.Transporter;

  constructor() {
    this.transporter = nodemailer.createTransport({
      service: process.env.EMAIL_SERVICE || 'gmail',
      auth: {
        user: process.env.GMAIL_USER,
        pass: process.env.GMAIL_APP_PASSWORD,
      },
    });
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!recipient.email;
  }

  public async send(recipient: RecipientInfo, content: NotificationContent): Promise<boolean> {
    if (!this.canSend(recipient)) return false;

    try {
      await this.transporter.sendMail({
        from: `NeshamaTech <${process.env.GMAIL_USER}>`,
        to: recipient.email,
        subject: content.subject,
        html: content.htmlBody || `<p>${content.body.replace(/\n/g, '<br>')}</p>`,
      });
      console.log(`[EmailAdapter] Email sent to ${recipient.email}`);
      return true;
    } catch (error) {
      console.error(`[EmailAdapter] Failed to send email to ${recipient.email}:`, error);
      return false;
    }
  }
}
--- End of Content for email.adapter.ts ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\adapters\whatsapp.adapter.ts
--------------------------------------------------------------------------------
Content:
// src/lib/engagement/adapters/whatsapp.adapter.ts
import twilio from 'twilio';
import { RecipientInfo } from './email.adapter';

export class WhatsAppAdapter {
  private client: twilio.Twilio | null;
  private fromNumber: string;

  constructor() {
    this.fromNumber = process.env.TWILIO_WHATSAPP_NUMBER || '';
    if (process.env.TWILIO_ACCOUNT_SID && process.env.TWILIO_AUTH_TOKEN) {
      this.client = twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN);
    } else {
      this.client = null;
      console.warn('[WhatsAppAdapter] Twilio is not configured.');
    }
  }

  public canSend(recipient: RecipientInfo): boolean {
    return !!(this.client && recipient.phone && recipient.phone.startsWith('+'));
  }

  public async send(recipient: RecipientInfo, templateSid: string, contentVariables: Record<string, string>): Promise<boolean> {
    if (!this.canSend(recipient) || !recipient.phone) return false;

    try {
      await this.client!.messages.create({
        contentSid: templateSid,
        contentVariables: JSON.stringify(contentVariables),
        from: `whatsapp:${this.fromNumber}`,
        to: `whatsapp:${recipient.phone}`,
      });
      console.log(`[WhatsAppAdapter] Message sent to ${recipient.phone}`);
      return true;
    } catch (error: any) {
      console.error(`[WhatsAppAdapter] Failed to send message to ${recipient.phone}:`, error.message);
      return false;
    }
  }
}
--- End of Content for whatsapp.adapter.ts ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates
================================================================================

(This directory contains subdirectories but no files directly. See subdirectories below.)

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email
================================================================================

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\aiInsight.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊í◊ô◊ú◊ô◊†◊ï ◊û◊©◊î◊ï ◊û◊¢◊†◊ô◊ô◊ü ◊¢◊ú◊ô◊ö{{else}}We've discovered something interesting about you{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="font-size: 64px; margin-bottom: 20px;">üß†‚ú®</div>
                            <h1 style="color: white; margin: 0; font-size: 30px; font-weight: 800; line-height: 1.4; text-shadow: 0 2px 15px rgba(0,0,0,0.15);">
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ◊ô◊© ◊ú◊†◊ï ◊™◊ï◊ë◊†◊ï◊™ ◊û◊®◊™◊ß◊ï◊™ ◊¢◊ú◊ô◊ö!
                                {{else}}
                                    {{firstName}}, We Have Fascinating Insights About You!
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                {{#if (eq locale 'he')}}
                                    ◊û◊¢◊®◊õ◊™ ◊î-AI ◊©◊ú◊†◊ï ◊†◊ô◊™◊ó◊î ◊ê◊™ ◊î◊©◊ê◊ú◊ï◊ü ◊©◊ú◊ö
                                {{else}}
                                    Our AI system has analyzed your questionnaire
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊™◊ï◊ì◊î ◊©◊î◊©◊ß◊¢◊™ ◊ñ◊û◊ü ◊ú◊û◊ú◊ê ◊ê◊™ ◊î◊©◊ê◊ú◊ï◊ü ◊©◊ú◊†◊ï! ◊î◊™◊©◊ï◊ë◊ï◊™ ◊©◊ú◊ö ◊¢◊ñ◊®◊ï ◊ú◊û◊¢◊®◊õ◊™ ◊î-AI ◊î◊û◊™◊ß◊ì◊û◊™ ◊©◊ú◊†◊ï ◊ú◊î◊ë◊ô◊ü ◊ê◊ï◊™◊ö ◊ò◊ï◊ë ◊ô◊ï◊™◊®. ◊î◊†◊î ◊û◊î ◊©◊í◊ô◊ú◊ô◊†◊ï:
                                {{else}}
                                    Thank you for taking the time to fill out our questionnaire! Your answers have helped our advanced AI system understand you better. Here's what we discovered:
                                {{/if}}
                            </p>

                            <!-- AI Analysis Box -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 20px; padding: 32px; margin: 28px 0; border: 2px solid rgba(139, 92, 246, 0.2); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 18px;">
                                    <span style="font-size: 36px; margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 15px;">üéØ</span>
                                    <h2 style="color: transparent; background: linear-gradient(135deg, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; margin: 0; font-size: 22px; font-weight: 800;">
                                        {{#if (eq locale 'he')}}◊î◊™◊ï◊ë◊†◊ï◊™ ◊©◊ú◊†◊ï ◊¢◊ú◊ô◊ö:{{else}}Our Insights About You:{{/if}}
                                    </h2>
                                </div>
                                <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 15px rgba(0,0,0,0.06);">
                                    <p style="color: #1e293b; margin: 0; font-size: 17px; line-height: 1.8; white-space: pre-wrap; font-weight: 500;">{{personalitySummary}}</p>
                                </div>
                            </div>

                            <div style="background: #f7fafc; border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h3 style="color: #2d3748; margin: 0 0 15px 0; font-size: 18px; font-weight: 600;">
                                    {{#if (eq locale 'he')}}üåü ◊ú◊û◊î ◊ñ◊î ◊ó◊©◊ï◊ë?{{else}}üåü Why is this important?{{/if}}
                                </h3>
                                <p style="color: #4a5568; margin: 0 0 12px 0; font-size: 15px; line-height: 1.7;">
                                    <strong>‚úì {{#if (eq locale 'he')}}◊î◊™◊ê◊û◊î ◊û◊ì◊ï◊ô◊ß◊™ ◊ô◊ï◊™◊®:{{else}}More Accurate Matches:{{/if}}</strong> {{#if (eq locale 'he')}}◊î◊©◊ì◊õ◊†◊ô◊ù ◊©◊ú◊†◊ï ◊û◊©◊™◊û◊©◊ô◊ù ◊ë◊™◊ï◊ë◊†◊ï◊™ ◊î◊ê◊ú◊î ◊õ◊ì◊ô ◊ú◊û◊¶◊ï◊ê ◊ú◊ö ◊î◊™◊ê◊û◊ï◊™ ◊©◊û◊™◊ê◊ô◊û◊ï◊™ ◊ë◊ê◊û◊™ ◊ú◊û◊ô ◊©◊ê◊™/◊î.{{else}}Our matchmakers use these insights to find matches that truly fit who you are.{{/if}}
                                </p>
                                <p style="color: #4a5568; margin: 0 0 12px 0; font-size: 15px; line-height: 1.7;">
                                    <strong>‚úì {{#if (eq locale 'he')}}◊î◊ë◊†◊î ◊û◊¢◊û◊ô◊ß◊î:{{else}}Deeper Understanding:{{/if}}</strong> {{#if (eq locale 'he')}}◊ê◊†◊ó◊†◊ï ◊ú◊ê ◊®◊ß ◊û◊°◊™◊õ◊ú◊ô◊ù ◊¢◊ú "◊í◊ï◊ë◊î" ◊ï◊¢◊ô◊°◊ï◊ß - ◊ê◊†◊ó◊†◊ï ◊û◊ë◊ô◊†◊ô◊ù ◊ê◊™ ◊î◊¢◊®◊õ◊ô◊ù, ◊î◊ê◊ô◊©◊ô◊ï◊™ ◊ï◊î◊ó◊ú◊ï◊û◊ï◊™ ◊©◊ú◊ö.{{else}}We don't just look at "height" and "occupation" - we understand your values, personality, and dreams.{{/if}}
                                </p>
                                <p style="color: #4a5568; margin: 0; font-size: 15px; line-height: 1.7;">
                                    <strong>‚úì {{#if (eq locale 'he')}}◊©◊ô◊ó◊ï◊™ ◊ò◊ï◊ë◊ï◊™ ◊ô◊ï◊™◊®:{{else}}Better Conversations:{{/if}}</strong> {{#if (eq locale 'he')}}◊î◊î◊™◊ê◊û◊ï◊™ ◊©◊ú◊ö ◊ô◊õ◊ô◊®◊ï ◊ê◊ï◊™◊ö ◊ò◊ï◊ë ◊ô◊ï◊™◊® ◊õ◊ë◊® ◊û◊î◊î◊™◊ó◊ú◊î.{{else}}Your matches will get to know you better right from the start.{{/if}}
                                </p>
                            </div>

                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);">
                                            {{#if (eq locale 'he')}}◊ú◊¶◊§◊ô◊ô◊î ◊ë◊§◊®◊ï◊§◊ô◊ú ◊î◊û◊ú◊ê ◊©◊ú◊ô üéØ{{else}}View My Full Profile üéØ{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                <strong>{{#if (eq locale 'he')}}◊©◊ê◊ú◊ï◊™ ◊ê◊ï ◊®◊ï◊¶◊î ◊ú◊ì◊ë◊® ◊¢◊ù ◊©◊ì◊õ◊ü?{{else}}Questions or want to talk to a matchmaker?{{/if}}</strong><br>
                                {{#if (eq locale 'he')}}◊§◊©◊ï◊ò ◊™◊©◊ô◊ë ◊ú◊û◊ô◊ô◊ú ◊î◊ñ◊î ◊ï◊†◊ó◊ñ◊ï◊® ◊ê◊ú◊ô◊ö ◊ë◊î◊ß◊ì◊ù!{{else}}Just reply to this email and we'll get back to you soon!{{/if}}
                            </p>
                        </td>
                    </tr>

                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                             <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for aiInsight.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\almostDone.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊ê◊™/◊î ◊õ◊û◊¢◊ò ◊©◊ù!{{else}}You're almost there!{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f59e0b 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="font-size: 64px; margin-bottom: 20px;">üéä</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ◊ê◊™/◊î ◊õ◊û◊¢◊ò ◊©◊ù!
                                {{else}}
                                    {{firstName}}, You're Almost There!
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{#if (eq locale 'he')}}
                                    ◊®◊ß ◊¢◊ï◊ì ◊ì◊ó◊ô◊§◊î ◊ß◊ò◊†◊î ◊ú◊°◊ô◊ï◊ù
                                {{else}}
                                    Just one last push to the finish line
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊õ◊ú ◊î◊õ◊ë◊ï◊ì ◊¢◊ú ◊î◊î◊™◊ß◊ì◊û◊ï◊™! ◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö ◊õ◊ë◊® ◊ë-<strong>{{progressPercentage}}%</strong>. ◊†◊©◊ê◊® ◊ú◊ö ◊®◊ß ◊¢◊ï◊ì ◊¶◊¢◊ì ◊ê◊ó◊ì ◊ß◊ò◊ü ◊õ◊ì◊ô ◊ú◊î◊©◊ú◊ô◊ù ◊ê◊ï◊™◊ï ◊ï◊ú◊î◊í◊ì◊ô◊ú ◊û◊©◊û◊¢◊ï◊™◊ô◊™ ◊ê◊™ ◊î◊°◊ô◊õ◊ï◊ô◊ô◊ù ◊©◊ú◊ö ◊ú◊û◊¶◊ï◊ê ◊î◊™◊ê◊û◊î.
                                {{else}}
                                    Great job on your progress! Your profile is already at <strong>{{progressPercentage}}%</strong>. You have just one small step left to complete it and significantly increase your chances of finding a match.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%); border-radius: 16px; padding: 28px; margin: 25px 0; border: 2px solid #3b82f6;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700; text-align: center;">
                                    üéØ {{#if (eq locale 'he')}}◊î◊ô◊¢◊ì ◊î◊°◊ï◊§◊ô{{else}}The Final Goal{{/if}}
                                </h3>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="display: inline-block; width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                                        <div style="color: white; text-align: center;">
                                            <div style="font-size: 42px; font-weight: 900; line-height: 1;">{{progressPercentage}}%</div>
                                            <div style="font-size: 13px; margin-top: 5px; opacity: 0.9;">{{#if (eq locale 'he')}}◊î◊ï◊©◊ú◊ù{{else}}Completed{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                                <p style="color: #1e40af; margin: 15px 0 0 0; font-size: 15px; text-align: center; line-height: 1.6;">
                                    {{#if (eq locale 'he')}}◊ê◊™/◊î ◊õ◊ú ◊õ◊ö ◊ß◊®◊ï◊ë/◊î ◊ú-100%!{{else}}You're so close to 100%!{{/if}}
                                </p>
                            </div>

                            {{#if aiSummary}}
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid #a78bfa;">
                                <h3 style="color: #5b21b6; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    üß† {{#if (eq locale 'he')}}◊û◊î ◊î-AI ◊©◊ú◊†◊ï ◊ó◊ï◊©◊ë ◊¢◊ì ◊õ◊î{{else}}What Our AI Thinks So Far{{/if}}
                                </h3>
                                <div style="background: white; border-radius: 12px; padding: 20px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{aiSummary}}"
                                    </p>
                                </div>
                            </div>
                            {{/if}}

                            <!-- Next Step -->
                            <div style="background: linear-gradient(to left, #fef3c7, #fed7aa); border-radius: 16px; padding: 4px; margin: 30px 0;">
                                <div style="background: white; border-radius: 12px; padding: 24px;">
                                    <h3 style="color: #92400e; margin: 0 0 15px 0; font-size: 19px; font-weight: 700; text-align: center;">
                                        üéØ {{#if (eq locale 'he')}}◊î◊ì◊ë◊® ◊î◊ê◊ó◊®◊ï◊ü ◊©◊†◊©◊ê◊®{{else}}Your Last Step{{/if}}
                                    </h3>
                                    <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; text-align: center; font-weight: 500;">
                                        {{remainingItem}}
                                    </p>
                                    <p style="color: #a16207; margin: 15px 0 0 0; font-size: 14px; text-align: center;">
                                        {{#if (eq locale 'he')}}
                                            ◊ñ◊î ◊ô◊ô◊ß◊ó ◊ë◊¢◊®◊ö {{estimatedTime}} - ◊û◊û◊© ◊¢◊ï◊ì ◊®◊í◊¢!
                                        {{else}}
                                            This will take about {{estimatedTime}} - you're almost done!
                                        {{/if}}
                                    </p>
                                </div>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4); text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                            {{#if (eq locale 'he')}}◊ë◊ï◊ê/◊ô ◊†◊°◊ô◊ô◊ù ◊ê◊™ ◊ñ◊î! üí™{{else}}Let's Finish This! üí™{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for almostDone.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\evening_feedback.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊°◊ô◊õ◊ï◊ù ◊î◊î◊™◊ß◊ì◊û◊ï◊™ ◊©◊ú◊ö{{else}}Your Progress Summary{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 50px 30px; text-align: center;">
                            <div style="font-size: 64px; margin-bottom: 20px;">‚ú®</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                {{#if (eq locale 'he')}}
                                    ◊õ◊ú ◊î◊õ◊ë◊ï◊ì ◊¢◊ú ◊î◊î◊©◊ß◊¢◊î, {{firstName}}!
                                {{else}}
                                    Great job today, {{firstName}}!
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{#if (eq locale 'he')}}
                                    ◊®◊ê◊ô◊†◊ï ◊ê◊™ ◊î◊î◊™◊ß◊ì◊û◊ï◊™ ◊©◊ú◊ö ◊î◊ô◊ï◊ù
                                {{else}}
                                    We noticed your progress today
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö ◊õ◊ë◊® ◊ë-<strong>{{progressPercentage}}%</strong> - ◊ê◊ô◊ñ◊ï ◊î◊™◊ß◊ì◊û◊ï◊™ ◊†◊î◊ì◊®◊™!
                                {{else}}
                                    Your profile is now at <strong>{{progressPercentage}}%</strong> - excellent progress!
                                {{/if}}
                            </p>

                            <!-- Progress Bar -->
                            <div style="margin: 20px 0;">
                                <div style="background: #e2e8f0; border-radius: 10px; height: 12px; overflow: hidden;">
                                    <div style="background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; width: {{progressPercentage}};"></div>
                                </div>
                            </div>

                            <!-- What was done today -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700;">
                                    {{#if (eq locale 'he')}}‚úÖ ◊û◊î ◊î◊©◊ú◊û◊™ ◊î◊ô◊ï◊ù{{else}}‚úÖ What you completed today{{/if}}
                                </h3>
                                <ul style="color: #1e40af; margin: 0; padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px; line-height: 1.8;">
                                    {{#each todayCompletedItems}}
                                    <li style="margin-bottom: 8px;">{{this}}</li>
                                    {{/each}}
                                </ul>
                            </div>

                            {{#if systemSummary}}
                            <!-- AI System Summary -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid #a78bfa;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <span style="font-size: 32px; margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 12px;">üß†</span>
                                    <h3 style="color: #5b21b6; margin: 0; font-size: 20px; font-weight: 700;">
                                        {{#if (eq locale 'he')}}◊ì◊ë◊® ◊î◊û◊¢◊®◊õ◊™ (◊°◊ô◊õ◊ï◊ù ◊î◊©◊ì◊õ◊ü){{else}}System Summary (Matchmaker's View){{/if}}
                                    </h3>
                                </div>
                                <div style="background: white; border-radius: 12px; padding: 20px;">
                                    <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7; font-style: italic;">
                                        "{{systemSummary}}"
                                    </p>
                                </div>
                            </div>
                            {{/if}}

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div style="background: #f0fdfa; border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #06b6d4; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #0f766e; margin: 0 0 12px 0; font-size: 18px; font-weight: 700;">
                                    {{#if (eq locale 'he')}}üí° ◊™◊ï◊ë◊†◊™ AI ◊®◊ê◊©◊ï◊†◊ô◊™{{else}}üí° Initial AI Insight{{/if}}
                                </h3>
                                <p style="color: #115e59; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{aiInsight}}
                                </p>
                                <p style="font-size: 13px; color: #134e4a; margin-top: 12px; font-style: italic;">
                                    {{#if (eq locale 'he')}}
                                        ◊ñ◊ï◊î◊ô ◊®◊ß ◊ò◊¢◊ô◊û◊î ◊û◊û◊î ◊©◊î◊û◊¢◊®◊õ◊™ ◊ú◊ï◊û◊ì◊™. ◊õ◊õ◊ú ◊©◊™◊©◊ú◊ô◊ù ◊ô◊ï◊™◊® ◊§◊®◊ò◊ô◊ù, ◊õ◊ö ◊î◊™◊û◊ï◊†◊î ◊™◊î◊ô◊î ◊û◊ì◊ï◊ô◊ß◊™ ◊ô◊ï◊™◊®.
                                    {{else}}
                                        This is just a glimpse of what the system is learning. The more details you complete, the more accurate the picture will be.
                                    {{/if}}
                                </p>
                            </div>
                            {{/if}}

                            <!-- Next Step -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 19px; font-weight: 700;">
                                    {{#if (eq locale 'he')}}üéØ ◊î◊¶◊¢◊ì ◊î◊ë◊ê ◊©◊ú◊ö{{else}}üéØ Your Next Step{{/if}}
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; font-weight: 500;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #92400e; margin: 15px 0 0 0; font-size: 14px;">
                                    {{#if (eq locale 'he')}}
                                        ◊ñ◊î ◊ô◊ô◊ß◊ó ◊ë◊¢◊®◊ö {{estimatedTime}} - ◊†◊©◊û◊¢ ◊°◊ë◊ô◊®?
                                    {{else}}
                                        This will take about {{estimatedTime}} - sound good?
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);">
                                            {{ctaText}} üí™
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                {{#if (eq locale 'he')}}
                                    ◊ô◊© ◊©◊ê◊ú◊î? ◊§◊©◊ï◊ò ◊™◊©◊ô◊ë ◊ú◊û◊ô◊ô◊ú - ◊ê◊†◊ó◊†◊ï ◊õ◊ê◊ü ◊ë◊©◊ë◊ô◊ú◊ö!
                                {{else}}
                                    Questions? Just reply to this email - we're here for you!
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0 0 10px 0; color: #4b5563; font-size: 14px; font-weight: 600;">
                                {{#if (eq locale 'he')}}◊û◊û◊©◊ô◊õ◊ô◊ù ◊ú◊¢◊ë◊ï◊ì!{{else}}Keep going!{{/if}} üî•
                            </p>
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                {{#if (eq locale 'he')}}◊¶◊ï◊ï◊™{{else}}Team{{/if}} NeshamaTech
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for evening_feedback.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\generic.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{headerTitle}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden;">
                    
                    <!-- Dynamic Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); padding: 45px 30px; text-align: center;">
                            {{#if headerIcon}}
                            <div style="font-size: 56px; margin-bottom: 15px;">{{{headerIcon}}}</div>
                            {{/if}}
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{headerTitle}}
                            </h1>
                            {{#if headerSubtitle}}
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                {{headerSubtitle}}
                            </p>
                            {{/if}}
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                {{{mainMessage}}}
                            </p>

                            {{#if specificAction}}
                            <!-- Next Action Box -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    üéØ {{#if (eq locale 'he')}}◊î◊¶◊¢◊ì ◊î◊ë◊ê ◊©◊ú◊ö{{else}}Your Next Step{{/if}}
                                </h3>
                                <p style="color: #78350f; margin: 0 0 15px 0; font-size: 16px; line-height: 1.6;">
                                    {{specificAction}}
                                </p>
                                {{#if estimatedTime}}
                                <p style="color: #92400e; margin: 0; font-size: 14px;">
                                    {{#if (eq locale 'he')}}◊ñ◊û◊ü ◊û◊ï◊¢◊®◊ö:{{else}}Estimated time:{{/if}} <strong>{{estimatedTime}}</strong>
                                </p>
                                {{/if}}
                            </div>
                            {{/if}}

                            {{#if ctaLink}}
                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);">
                                            {{ctaText}}
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            {{/if}}

                            {{#if encouragement}}
                            <!-- Encouragement -->
                            <div style="background: #f0fdf4; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <p style="color: #166534; margin: 0; font-size: 15px; line-height: 1.7; text-align: center;">
                                    {{{encouragement}}}
                                </p>
                            </div>
                            {{/if}}
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for generic.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\onboardingDay1.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊ë◊®◊ï◊ö ◊î◊ë◊ê ◊ú-NeshamaTech!{{else}}Welcome to NeshamaTech!{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊®◊ï◊ö ◊î◊ë◊ê ◊ú-NeshamaTech, {{firstName}}!
                                {{else}}
                                    Welcome to NeshamaTech, {{firstName}}!
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{#if (eq locale 'he')}}◊î◊û◊°◊¢ ◊©◊ú◊ö ◊û◊™◊ó◊ô◊ú ◊õ◊ê◊ü{{else}}Your journey starts here{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊©◊ú◊ï◊ù{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊õ◊û◊î ◊û◊®◊í◊©! ◊î◊¶◊ò◊®◊§◊™ ◊ú◊û◊©◊§◊ó◊™ NeshamaTech. ◊î◊û◊¢◊®◊õ◊™ ◊©◊ú◊†◊ï ◊õ◊ë◊® ◊û◊™◊ó◊ô◊ú◊î ◊ú◊ú◊û◊ï◊ì ◊¢◊ú◊ô◊ö, ◊ï◊õ◊ú ◊§◊®◊ò ◊©◊™◊ï◊°◊ô◊£ ◊ô◊¢◊ñ◊ï◊® ◊ú◊†◊ï ◊ú◊û◊¶◊ï◊ê ◊ú◊ö ◊ê◊™ ◊î◊î◊™◊ê◊û◊î ◊î◊û◊ï◊©◊ú◊û◊™.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family. Our system is already starting to learn about you, and every detail you add will help us find your perfect match.
                                {{/if}}
                            </p>

                            <!-- Progress Section -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 18px; font-weight: 600;">
                                    üìä {{#if (eq locale 'he')}}◊ê◊ô◊§◊î ◊ê◊†◊ó◊†◊ï ◊¢◊õ◊©◊ô◊ï?{{else}}Where are we now?{{/if}}
                                </h3>
                                
                                <div style="background: #e2e8f0; border-radius: 12px; height: 24px; margin: 15px 0; overflow: hidden; position: relative;">
                                    <div style="background: linear-gradient(90deg, #06b6d4, #8b5cf6); height: 100%; width: {{progressPercentage}}%; transition: width 0.5s; border-radius: 12px;"></div>
                                    <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #1e293b; font-weight: 600; font-size: 13px;">
                                        {{progressPercentage}}% {{#if (eq locale 'he')}}◊î◊ï◊©◊ú◊ù{{else}}Complete{{/if}}
                                    </span>
                                </div>
                            </div>

                            <!-- Next Step -->
                            <div style="background: #fef3c7; border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b; border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">
                                    üéØ {{#if (eq locale 'he')}}◊î◊¶◊¢◊ì ◊î◊®◊ê◊©◊ï◊ü ◊©◊ú◊ö{{else}}Your First Step{{/if}}
                                </h3>
                                <p style="color: #78350f; margin: 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                            </div>

                            {{#if aiInsight}}
                            <!-- AI Insight -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #fce7f3 100%); border-radius: 16px; padding: 24px; margin: 25px 0; border: 2px solid rgba(139, 92, 246, 0.2);">
                                <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                    <span style="font-size: 28px; margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px;">üß†</span>
                                    <h3 style="color: transparent; background: linear-gradient(135deg, #8b5cf6, #ec4899); -webkit-background-clip: text; background-clip: text; margin: 0; font-size: 18px; font-weight: 700;">
                                        {{#if (eq locale 'he')}}◊™◊ï◊ë◊†◊™ AI ◊ê◊ô◊©◊ô◊™{{else}}Personal AI Insight{{/if}}
                                    </h3>
                                </div>
                                <p style="color: #4c1d95; margin: 0; font-size: 15px; line-height: 1.7;">
                                    {{aiInsight}}
                                </p>
                            </div>
                            {{/if}}

                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3); transition: transform 0.2s;">
                                            {{#if (eq locale 'he')}}◊ë◊ï◊ê◊ï ◊†◊™◊ó◊ô◊ú! üöÄ{{else}}Let's Start! üöÄ{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                {{#if (eq locale 'he')}}◊©◊ê◊ú◊ï◊™? ◊ê◊†◊ó◊†◊ï ◊õ◊ê◊ü ◊ë◊©◊ë◊ô◊ú◊ö 24/7. ◊§◊©◊ï◊ò ◊™◊©◊ô◊ë ◊ú◊û◊ô◊ô◊ú ◊î◊ñ◊î!{{else}}Questions? We're here for you 24/7. Just reply to this email!{{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0 0 10px 0; color: #718096; font-size: 14px;">
                                {{#if (eq locale 'he')}}◊ë◊î◊¶◊ú◊ó◊î ◊ë◊û◊°◊¢! üíô{{else}}Good luck on your journey! üíô{{/if}}
                            </p>
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}◊¶◊ï◊ï◊™ NeshamaTech{{else}}The NeshamaTech Team{{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for onboardingDay1.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\profileNudge.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊ò◊ô◊§ ◊ß◊ò◊ü ◊©◊ô◊¢◊©◊î ◊î◊ë◊ì◊ú ◊í◊ì◊ï◊ú{{else}}A small tip that makes a big difference{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #ecfeff 0%, #fce7f3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden; border: 1px solid rgba(255,255,255,0.7);">
                    
                    <tr>
                        <td style="background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); padding: 45px 30px; text-align: center; position: relative;">
                            <div style="font-size: 56px; margin-bottom: 15px;">üí°</div>
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ◊ô◊© ◊õ◊ê◊ü ◊õ◊û◊î ◊ì◊ë◊®◊ô◊ù ◊©◊ó◊°◊®◊ô◊ù...
                                {{else}}
                                    {{firstName}}, a few things are missing...
                                {{/if}}
                            </h1>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊©◊ú◊ï◊ù{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊©◊û◊†◊ï ◊ú◊ë ◊©◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö ◊¢◊ì◊ô◊ô◊ü ◊ú◊ê ◊û◊ï◊©◊ú◊ù ◊ú◊í◊û◊®◊ô. ◊ê◊†◊ó◊†◊ï ◊ô◊ï◊ì◊¢◊ô◊ù ◊©◊ñ◊î ◊ú◊ï◊ß◊ó ◊ñ◊û◊ü, ◊ê◊ë◊ú ◊ô◊© ◊ú◊†◊ï ◊†◊™◊ï◊ü ◊û◊¢◊†◊ô◊ô◊ü ◊ú◊©◊™◊£ ◊ê◊™◊ö:
                                {{else}}
                                    We noticed your profile isn't quite complete yet. We know it takes time, but we have an interesting statistic to share with you:
                                {{/if}}
                            </p>

                            <div style="background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 100%); border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #ec4899; border-radius: 16px; padding: 24px; margin: 28px 0; box-shadow: 0 4px 15px rgba(236, 72, 153, 0.1);">
                                <p style="color: #be123c; margin: 0; font-size: 16px; line-height: 1.8; font-weight: 600;">
                                    <strong style="font-size: 20px; display: block; margin-bottom: 8px;">üìä {{#if (eq locale 'he')}}◊†◊™◊ï◊ü ◊©◊ï◊ï◊î ◊ú◊ì◊¢◊™:{{else}}A stat worth knowing:{{/if}}</strong>
                                    {{#if (eq locale 'he')}}
                                        ◊§◊®◊ï◊§◊ô◊ú◊ô◊ù ◊û◊ú◊ê◊ô◊ù ◊¢◊ù ◊™◊û◊ï◊†◊ï◊™ ◊ê◊ô◊õ◊ï◊™◊ô◊ï◊™ ◊û◊ß◊ë◊ú◊ô◊ù <strong style="font-size: 20px; background: linear-gradient(135deg, #ec4899, #f97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">◊§◊ô 3 ◊ô◊ï◊™◊®</strong> ◊î◊¶◊¢◊ï◊™ ◊î◊™◊ê◊û◊î ◊û◊§◊®◊ï◊§◊ô◊ú◊ô◊ù ◊ó◊ú◊ß◊ô◊ô◊ù!
                                    {{else}}
                                        Complete profiles with high-quality photos receive <strong style="font-size: 20px; background: linear-gradient(135deg, #ec4899, #f97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">3 times more</strong> match suggestions than partial profiles!
                                    {{/if}}
                                </p>
                            </div>

                            <h2 style="color: #2d3748; margin: 30px 0 20px 0; font-size: 20px; font-weight: 600;">
                                {{#if (eq locale 'he')}}◊î◊†◊î ◊û◊î ◊©◊ó◊°◊® ◊ë◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö:{{else}}Here is what's missing from your profile:{{/if}}
                            </h2>

                            <div style="background: #f7fafc; border-radius: 12px; padding: 25px; margin: 20px 0;">
                                {{#each missingItems}}
                                <div style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                                    <span style="color: #f56565; font-size: 20px; margin-{{#if (eq locale 'he')}}left{{else}}right{{/if}}: 10px; flex-shrink: 0;">‚úó</span>
                                    <p style="color: #4a5568; margin: 0; line-height: 1.6; font-size: 15px;">{{this}}</p>
                                </div>
                                {{/each}}
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊ê◊†◊ó◊†◊ï ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊©◊ñ◊î ◊ú◊ê ◊ô◊ô◊ß◊ó ◊ô◊ï◊™◊® ◊û-<strong>10 ◊ì◊ß◊ï◊™</strong>! ◊ï◊ñ◊î ◊ô◊õ◊ï◊ú ◊ú◊¢◊©◊ï◊™ ◊ê◊™ ◊õ◊ú ◊î◊î◊ë◊ì◊ú.
                                {{else}}
                                    We promise it won't take more than <strong>10 minutes</strong>! And it can make all the difference.
                                {{/if}}
                            </p>

                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(236, 72, 153, 0.35);">
                                            {{#if (eq locale 'he')}}◊ú◊î◊©◊ú◊û◊™ ◊î◊§◊®◊ï◊§◊ô◊ú üöÄ{{else}}Complete Your Profile üöÄ{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for profileNudge.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\progressUpdate.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊¢◊ì◊õ◊ï◊ü ◊î◊™◊ß◊ì◊û◊ï◊™{{else}}Progress Update{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); padding: 45px 30px; text-align: center;">
                            <div style="font-size: 56px; margin-bottom: 15px;">üìä</div>
                            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ◊ê◊™◊î ◊¢◊ï◊©◊î ◊¢◊ë◊ï◊ì◊î ◊û◊¢◊ï◊ú◊î!
                                {{else}}
                                    {{firstName}}, you're doing a great job!
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 16px; font-weight: 500;">
                                {{#if (eq locale 'he')}}◊î◊†◊î ◊¢◊ì◊õ◊ï◊ü ◊û◊î◊ô◊® ◊¢◊ú ◊î◊î◊™◊ß◊ì◊û◊ï◊™ ◊©◊ú◊ö{{else}}Here's a quick update on your progress{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 17px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <!-- Big Progress Number -->
                            <div style="text-align: center; margin: 30px 0;">
                                <div style="display: inline-block; background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); border-radius: 50%; width: 140px; height: 140px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);">
                                    <div style="color: white;">
                                        <div style="font-size: 48px; font-weight: 800; line-height: 1;">{{progressPercentage}}%</div>
                                        <div style="font-size: 14px; margin-top: 5px;">{{#if (eq locale 'he')}}◊î◊ï◊©◊ú◊ù{{else}}Complete{{/if}}</div>
                                    </div>
                                </div>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7; text-align: center;">
                                <strong>{{#if (eq locale 'he')}}◊õ◊ú ◊î◊õ◊ë◊ï◊ì!{{else}}Great job!{{/if}}</strong> {{#if (eq locale 'he')}}◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö ◊õ◊ë◊® ◊ë-{{else}}Your profile is already at{{/if}} {{progressPercentage}}%.
                            </p>

                            <!-- Detailed Breakdown -->
                            <div style="background: #f8fafc; border-radius: 16px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #334155; margin: 0 0 20px 0; font-size: 18px; font-weight: 600;">
                                    {{#if (eq locale 'he')}}◊§◊ô◊®◊ï◊ò ◊î◊î◊™◊ß◊ì◊û◊ï◊™:{{else}}Progress Breakdown:{{/if}}
                                </h3>
                                
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            üì∏ {{#if (eq locale 'he')}}◊™◊û◊ï◊†◊ï◊™{{else}}Photos{{/if}}
                                        </span>
                                        <span style="color: {{#if photosComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{photosCount}}/3
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if photosComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{photosPercent}}%;"></div>
                                    </div>
                                </div>

                                <div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="color: #64748b; font-size: 15px; font-weight: 500;">
                                            üìù {{#if (eq locale 'he')}}◊©◊ê◊ú◊ï◊ü{{else}}Questionnaire{{/if}}
                                        </span>
                                        <span style="color: {{#if questionnaireComplete}}#10b981{{else}}#f59e0b{{/if}}; font-weight: 600; font-size: 14px;">
                                            {{questionnairePercent}}%
                                        </span>
                                    </div>
                                    <div style="background: #e2e8f0; border-radius: 8px; height: 8px; overflow: hidden;">
                                        <div style="background: {{#if questionnaireComplete}}#10b981{{else}}#f59e0b{{/if}}; height: 100%; width: {{questionnairePercent}}%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Next Action -->
                            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #f59e0b; border-radius: 12px; padding: 24px; margin: 25px 0;">
                                <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 18px; font-weight: 600;">
                                    üöÄ {{#if (eq locale 'he')}}◊î◊¶◊¢◊ì ◊î◊ë◊ê ◊©◊ú◊ö{{else}}Your Next Step{{/if}}
                                </h3>
                                <p style="color: #78350f; margin: 0 0 15px 0; font-size: 16px; line-height: 1.6;">
                                    {{nextAction}}
                                </p>
                                <p style="color: #92400e; margin: 0; font-size: 14px;">
                                    {{#if (eq locale 'he')}}
                                        ◊ñ◊î ◊ô◊ô◊ß◊ó ◊®◊ß <strong>{{estimatedTime}}</strong> ◊ï◊ô◊ß◊§◊ô◊• ◊ê◊ï◊™◊ö ◊ú-<strong>{{nextMilestone}}%</strong>!
                                    {{else}}
                                        This will only take <strong>{{estimatedTime}}</strong> and will get you to <strong>{{nextMilestone}}%</strong>!
                                    {{/if}}
                                </p>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); color: white; text-decoration: none; padding: 18px 48px; border-radius: 50px; font-weight: 700; font-size: 17px; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);">
                                            {{ctaText}} üí™
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for progressUpdate.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\reengagement.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊ñ◊ï◊õ◊®/◊™ ◊ê◊ï◊™◊†◊ï?{{else}}Remember us?{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); overflow: hidden;">
                    
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <div style="font-size: 64px; margin-bottom: 20px;">üíå</div>
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 15px rgba(0,0,0,0.2);">
                                {{#if (eq locale 'he')}}
                                    {{firstName}}, ◊ñ◊ï◊õ◊®/◊™ ◊ê◊ï◊™◊†◊ï?
                                {{else}}
                                    {{firstName}}, remember us?
                                {{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 15px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{#if (eq locale 'he')}}◊¢◊ë◊® ◊ß◊¶◊™ ◊ñ◊û◊ü ◊û◊ê◊ñ ◊©◊ì◊ô◊ë◊®◊†◊ï...{{else}}It's been a while since we talked...{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊î◊ô◊ô{{else}}Hi{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 25px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊¢◊ë◊®◊ï {{daysSinceActive}} ◊ô◊û◊ô◊ù ◊û◊ê◊ñ ◊©◊§◊¢◊ú◊™ ◊ë◊û◊¢◊®◊õ◊™. ◊ê◊†◊ó◊†◊ï ◊û◊ë◊ô◊†◊ô◊ù - ◊î◊ó◊ô◊ô◊ù ◊¢◊°◊ï◊ß◊ô◊ù. ◊ê◊ë◊ú ◊®◊¶◊ô◊†◊ï ◊ú◊î◊ñ◊õ◊ô◊® ◊ú◊ö ◊©◊ê◊™/◊î ◊ú◊ê ◊ú◊ë◊ì ◊ë◊û◊°◊¢ ◊î◊ñ◊î.
                                {{else}}
                                    It's been {{daysSinceActive}} days since you were last active. We get it - life is busy. But we wanted to remind you that you're not alone on this journey.
                                {{/if}}
                            </p>

                            <!-- Progress Reminder -->
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%); border-radius: 16px; padding: 28px; margin: 25px 0; border: 2px solid #3b82f6;">
                                <h3 style="color: #1e40af; margin: 0 0 15px 0; font-size: 20px; font-weight: 700; text-align: center;">
                                    üìå {{#if (eq locale 'he')}}◊ê◊ô◊§◊î ◊î◊§◊°◊ß◊†◊ï?{{else}}Where did we leave off?{{/if}}
                                </h3>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="display: inline-block; width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                                        <div style="color: white; text-align: center;">
                                            <div style="font-size: 42px; font-weight: 900; line-height: 1;">{{progressPercentage}}%</div>
                                            <div style="font-size: 13px; margin-top: 5px; opacity: 0.9;">{{#if (eq locale 'he')}}◊î◊ï◊©◊ú◊ù{{else}}Complete{{/if}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- What's New -->
                            <div style="background: #f0fdf4; border-radius: 16px; padding: 24px; margin: 25px 0; border-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 4px solid #10b981;">
                                <h3 style="color: #166534; margin: 0 0 15px 0; font-size: 18px; font-weight: 700;">
                                    ‚ú® {{#if (eq locale 'he')}}◊û◊î ◊ó◊ì◊© ◊û◊ê◊ñ{{else}}What's new since you've been away{{/if}}
                                </h3>
                                <ul style="color: #15803d; margin: 0; padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">{{#if (eq locale 'he')}}◊©◊ô◊§◊®◊†◊ï ◊ê◊™ ◊û◊†◊ï◊¢ ◊î◊î◊™◊ê◊û◊ï◊™ - <strong>◊ô◊ï◊™◊® ◊û◊ì◊ï◊ô◊ß ◊û◊™◊û◊ô◊ì</strong>{{else}}We've improved our matching engine - <strong>more accurate than ever</strong>{{/if}}</li>
                                    <li style="margin-bottom: 10px;">{{#if (eq locale 'he')}}◊î◊ï◊°◊§◊†◊ï ◊™◊ï◊ë◊†◊ï◊™ AI ◊û◊™◊ß◊ì◊û◊ï◊™ ◊ú◊õ◊ú ◊§◊®◊ï◊§◊ô◊ú{{else}}We've added advanced AI insights to every profile{{/if}}</li>
                                    <li style="margin-bottom: 10px;">{{newUsersCount}}+ {{#if (eq locale 'he')}}◊û◊©◊™◊û◊©◊ô◊ù ◊ó◊ì◊©◊ô◊ù ◊î◊¶◊ò◊®◊§◊ï ◊î◊ó◊ï◊ì◊©{{else}}new users joined this month{{/if}}</li>
                                </ul>
                            </div>

                            <!-- Next Step -->
                             <div style="background: linear-gradient(to {{#if (eq locale 'he')}}left{{else}}right{{/if}}, #fef3c7, #fed7aa); border-radius: 16px; padding: 4px; margin: 30px 0;">
                                <div style="background: white; border-radius: 12px; padding: 24px;">
                                    <h3 style="color: #92400e; margin: 0 0 15px 0; font-size: 19px; font-weight: 700; text-align: center;">
                                        üéØ {{#if (eq locale 'he')}}◊î◊¶◊¢◊ì ◊î◊ë◊ê ◊©◊ú◊ö{{else}}Your Next Step{{/if}}
                                    </h3>
                                    <p style="color: #78350f; margin: 0; font-size: 17px; line-height: 1.6; text-align: center; font-weight: 500;">
                                        {{nextAction}}
                                    </p>
                                    <p style="color: #a16207; margin: 15px 0 0 0; font-size: 14px; text-align: center;">
                                        {{#if (eq locale 'he')}}◊ñ◊î ◊ô◊ô◊ß◊ó ◊ë◊¢◊®◊ö {{estimatedTime}} - ◊†◊©◊û◊¢ ◊°◊ë◊ô◊®?{{else}}This should take about {{estimatedTime}} - sound good?{{/if}}
                                    </p>
                                </div>
                            </div>

                            <!-- CTA -->
                            <table role="presentation" style="margin: 35px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{ctaLink}}" style="display: inline-block; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; text-decoration: none; padding: 20px 50px; border-radius: 50px; font-weight: 800; font-size: 18px; box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4); text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                            {{#if (eq locale 'he')}}◊ë◊ï◊ê/◊ô ◊†◊û◊©◊ô◊ö ◊û◊ê◊ô◊§◊î ◊©◊¢◊¶◊®◊†◊ï üí™{{else}}Let's continue where we left off üí™{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>

                             <p style="font-size: 14px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center;">
                                {{#if (eq locale 'he')}}
                                    ◊ê◊ù ◊ô◊© ◊û◊©◊î◊ï ◊©◊û◊ï◊†◊¢ ◊û◊û◊ö ◊ú◊î◊û◊©◊ô◊ö, ◊†◊©◊û◊ó ◊ú◊ì◊¢◊™.<br>◊§◊©◊ï◊ò ◊™◊©◊ô◊ë ◊ú◊û◊ô◊ô◊ú ◊ï◊ê◊†◊ó◊†◊ï ◊†◊¢◊ñ◊ï◊® ◊ú◊ö.
                                {{else}}
                                    If something is preventing you from continuing, we'd love to know.<br>Just reply to this email, and we'll help.
                                {{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); padding: 25px 30px; text-align: center; border-top: 1px solid #d1d5db;">
                            <p style="margin: 0; color: #9ca3af; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for reengagement.hbs ---

--------------------------------------------------------------------------------
File: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\email\welcome.hbs
--------------------------------------------------------------------------------
Content:
<!DOCTYPE html>
<html dir="{{getDir locale}}" lang="{{locale}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if (eq locale 'he')}}◊ë◊®◊ï◊õ◊ô◊ù ◊î◊ë◊ê◊ô◊ù ◊ú-NeshamaTech{{else}}Welcome to NeshamaTech{{/if}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); direction: {{getDir locale}};">
    <table role="presentation" style="width: 100%; border-collapse: collapse;">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); overflow: hidden;">
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #06b6d4 0%, #ec4899 100%); padding: 50px 30px; text-align: center; position: relative;">
                            <h1 style="color: white; margin: 0; font-size: 32px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                üéâ {{#if (eq locale 'he')}}◊ë◊®◊ï◊ö ◊î◊ë◊ê ◊ú-NeshamaTech!{{else}}Welcome to NeshamaTech!{{/if}}
                            </h1>
                            <p style="color: rgba(255,255,255,0.95); margin: 12px 0 0 0; font-size: 17px; font-weight: 500;">
                                {{#if (eq locale 'he')}}◊î◊û◊°◊¢ ◊©◊ú◊ö ◊ú◊î◊™◊ê◊û◊î ◊û◊ï◊©◊ú◊û◊™ ◊û◊™◊ó◊ô◊ú ◊õ◊ê◊ü{{else}}Your journey to the perfect match starts here{{/if}}
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Main Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <p style="font-size: 18px; color: #2d3748; margin: 0 0 20px 0; line-height: 1.6;">
                                {{#if (eq locale 'he')}}◊©◊ú◊ï◊ù{{else}}Hello{{/if}} {{firstName}},
                            </p>
                            
                            <p style="font-size: 16px; color: #4a5568; margin: 0 0 20px 0; line-height: 1.7;">
                                {{#if (eq locale 'he')}}
                                    ◊õ◊û◊î ◊û◊®◊í◊©! ◊î◊¶◊ò◊®◊§◊™ ◊ú◊û◊©◊§◊ó◊™ NeshamaTech - ◊û◊¢◊®◊õ◊™ ◊î◊©◊ô◊ì◊ï◊õ◊ô◊ù ◊î◊ó◊õ◊û◊î ◊©◊û◊©◊ú◊ë◊™ ◊ò◊õ◊†◊ï◊ú◊ï◊í◊ô◊î ◊û◊™◊ß◊ì◊û◊™ ◊¢◊ù ◊î◊ë◊ô◊†◊î ◊ï◊î◊ó◊ï◊ù ◊î◊ê◊†◊ï◊©◊ô◊ô◊ù ◊©◊ú ◊©◊ì◊õ◊†◊ô◊ù ◊û◊ß◊¶◊ï◊¢◊ô◊ô◊ù.
                                {{else}}
                                    How exciting! You've joined the NeshamaTech family - the smart matchmaking system that combines advanced technology with the human wisdom and warmth of professional matchmakers.
                                {{/if}}
                            </p>

                            <div style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); border-radius: 12px; padding: 25px; margin: 25px 0;">
                                <h2 style="color: #5a67d8; margin: 0 0 15px 0; font-size: 20px; font-weight: 600;">
                                    üí° {{#if (eq locale 'he')}}◊û◊î ◊î◊ú◊ê◊î?{{else}}What's next?{{/if}}
                                </h2>
                                <ul style="color: #4a5568; margin: 0; padding-{{#if (eq locale 'he')}}right{{else}}left{{/if}}: 20px; line-height: 1.8;">
                                    <li style="margin-bottom: 10px;">
                                        <strong>{{#if (eq locale 'he')}}◊î◊©◊ú◊ù ◊ê◊™ ◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ö{{else}}Complete your profile{{/if}}</strong> - {{#if (eq locale 'he')}}◊õ◊õ◊ú ◊©◊†◊ì◊¢ ◊¢◊ú◊ô◊ö ◊ô◊ï◊™◊®, ◊õ◊ö ◊†◊ï◊õ◊ú ◊ú◊û◊¶◊ï◊ê ◊ú◊ö ◊î◊™◊ê◊û◊î ◊ò◊ï◊ë◊î ◊ô◊ï◊™◊®{{else}}the more we know about you, the better we can find a match{{/if}}
                                    </li>
                                    <li style="margin-bottom: 10px;">
                                        <strong>{{#if (eq locale 'he')}}◊î◊ï◊°◊£ ◊™◊û◊ï◊†◊ï◊™{{else}}Add photos{{/if}}</strong> - {{#if (eq locale 'he')}}◊™◊û◊ï◊†◊î ◊©◊ï◊ï◊î ◊ê◊ú◊£ ◊û◊ô◊ú◊ô◊ù, ◊ï-3 ◊™◊û◊ï◊†◊ï◊™? ◊ñ◊î ◊î◊®◊ë◊î ◊ô◊ï◊™◊®!{{else}}a picture is worth a thousand words, and 3 pictures? Even more!{{/if}}
                                    </li>
                                </ul>
                            </div>

                            <p style="font-size: 16px; color: #4a5568; margin: 20px 0; line-height: 1.7;">
                                <strong>{{#if (eq locale 'he')}}◊ò◊ô◊§ ◊ó◊©◊ï◊ë:{{else}}Important tip:{{/if}}</strong> {{#if (eq locale 'he')}}◊§◊®◊ï◊§◊ô◊ú◊ô◊ù ◊û◊ú◊ê◊ô◊ù ◊û◊ß◊ë◊ú◊ô◊ù ◊§◊ô 3 ◊ô◊ï◊™◊® ◊î◊™◊ê◊û◊ï◊™!{{else}}Complete profiles get 3 times more matches!{{/if}}
                            </p>

                            <!-- CTA Button -->
                            <table role="presentation" style="margin: 30px 0; width: 100%;">
                                <tr>
                                    <td style="text-align: center;">
                                        <a href="{{baseUrl}}/profile" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: transform 0.2s;">
                                            {{#if (eq locale 'he')}}◊ú◊î◊©◊ú◊û◊™ ◊î◊§◊®◊ï◊§◊ô◊ú ◊©◊ú◊ô{{else}}Complete My Profile{{/if}}
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <p style="font-size: 15px; color: #718096; margin: 25px 0 0 0; line-height: 1.6; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                                {{#if (eq locale 'he')}}◊ô◊© ◊©◊ê◊ú◊ï◊™? ◊ê◊†◊ó◊†◊ï ◊õ◊ê◊ü ◊ë◊©◊ë◊ô◊ú◊ö! ◊§◊©◊ï◊ò ◊™◊©◊ô◊ë ◊ú◊û◊ô◊ô◊ú ◊î◊ñ◊î.{{else}}Questions? We're here for you! Just reply to this email.{{/if}}
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background: #f7fafc; padding: 25px 30px; text-align: center; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; color: #a0aec0; font-size: 13px;">
                                {{#if (eq locale 'he')}}
                                    ◊ë◊ë◊®◊õ◊î,<br>◊¶◊ï◊ï◊™ NeshamaTech
                                {{else}}
                                    Best regards,<br>The NeshamaTech Team
                                {{/if}}
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
--- End of Content for welcome.hbs ---

================================================================================
Directory: C:\Users\eytan\Desktop\NeshamaTech\shidduch-system\src\lib\engagement\templates\whatsapp
================================================================================

(This directory is empty.)

